## promotedcontentd

> `/usr/libexec/promotedcontentd`

```diff

-555.48.1.8.0
-  __TEXT.__text: 0x1f6410
-  __TEXT.__auth_stubs: 0x3600
-  __TEXT.__objc_stubs: 0x17ec0
-  __TEXT.__objc_methlist: 0x148bc
-  __TEXT.__const: 0x17408
-  __TEXT.__objc_methname: 0x243b2
-  __TEXT.__oslogstring: 0xd7b7
-  __TEXT.__cstring: 0x12633
-  __TEXT.__objc_classname: 0x25c0
-  __TEXT.__objc_methtype: 0x4a1a
-  __TEXT.__gcc_except_tab: 0x1708
-  __TEXT.__constg_swiftt: 0x3b70
-  __TEXT.__swift5_typeref: 0x270e
-  __TEXT.__swift5_reflstr: 0x1a1e
-  __TEXT.__swift5_fieldmd: 0x2bd8
+555.48.15.0.0
+  __TEXT.__text: 0x1fc078
+  __TEXT.__auth_stubs: 0x3690
+  __TEXT.__objc_stubs: 0x18280
+  __TEXT.__objc_methlist: 0x14c3c
+  __TEXT.__const: 0x17668
+  __TEXT.__objc_methname: 0x24bea
+  __TEXT.__oslogstring: 0xda27
+  __TEXT.__cstring: 0x12d57
+  __TEXT.__objc_classname: 0x2632
+  __TEXT.__objc_methtype: 0x4a54
+  __TEXT.__gcc_except_tab: 0x1704
+  __TEXT.__constg_swiftt: 0x3d2c
+  __TEXT.__swift5_typeref: 0x27fe
+  __TEXT.__swift5_reflstr: 0x1b7e
+  __TEXT.__swift5_fieldmd: 0x2ce4
   __TEXT.__swift5_builtin: 0xc8
   __TEXT.__swift5_assocty: 0x128
   __TEXT.__swift5_capture: 0x6a0
-  __TEXT.__swift5_proto: 0x608
-  __TEXT.__swift5_types: 0x388
+  __TEXT.__swift5_proto: 0x60c
+  __TEXT.__swift5_types: 0x39c
   __TEXT.__swift_as_entry: 0x44
   __TEXT.__swift_as_ret: 0x60
   __TEXT.__swift5_mpenum: 0x10
-  __TEXT.__swift5_protos: 0xac
-  __TEXT.__unwind_info: 0x5990
+  __TEXT.__swift5_protos: 0xb0
+  __TEXT.__unwind_info: 0x5a78
   __TEXT.__eh_frame: 0x3d18
-  __DATA_CONST.__auth_got: 0x1b10
-  __DATA_CONST.__got: 0xfc0
-  __DATA_CONST.__auth_ptr: 0xb80
-  __DATA_CONST.__const: 0xdf90
-  __DATA_CONST.__cfstring: 0xeb60
-  __DATA_CONST.__objc_classlist: 0xd30
+  __DATA_CONST.__auth_got: 0x1b58
+  __DATA_CONST.__got: 0xfd8
+  __DATA_CONST.__auth_ptr: 0xbb0
+  __DATA_CONST.__const: 0xe058
+  __DATA_CONST.__cfstring: 0xed40
+  __DATA_CONST.__objc_classlist: 0xd68
   __DATA_CONST.__objc_catlist: 0xc8
-  __DATA_CONST.__objc_protolist: 0x290
+  __DATA_CONST.__objc_protolist: 0x288
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__objc_protorefs: 0x108
-  __DATA_CONST.__objc_superrefs: 0x720
+  __DATA_CONST.__objc_superrefs: 0x728
   __DATA_CONST.__linkguard: 0x15
-  __DATA_CONST.__objc_intobj: 0x17a0
+  __DATA_CONST.__objc_intobj: 0x17b8
   __DATA_CONST.__objc_arraydata: 0x740
   __DATA_CONST.__objc_dictobj: 0xa28
   __DATA_CONST.__objc_arrayobj: 0xc0
   __DATA_CONST.__objc_doubleobj: 0x20
-  __DATA.__objc_const: 0x26988
-  __DATA.__objc_selrefs: 0x8e08
-  __DATA.__objc_ivar: 0x149c
-  __DATA.__objc_data: 0x7db8
-  __DATA.__data: 0x91c0
-  __DATA.__common: 0x1a8
+  __DATA.__objc_const: 0x270e0
+  __DATA.__objc_selrefs: 0x8fa8
+  __DATA.__objc_ivar: 0x14c8
+  __DATA.__objc_data: 0x8250
+  __DATA.__data: 0x9150
+  __DATA.__common: 0x1c0
   __DATA.__bss: 0xae78
   - /AppleInternal/Library/Frameworks/TestHookService.framework/TestHookService
   - /AppleInternal/Library/Frameworks/TestHookShared.framework/TestHookShared

   - /usr/lib/swift/libswiftsimd.dylib
   - /usr/lib/swift/libswiftsys_time.dylib
   - /usr/lib/swift/libswiftunistd.dylib
-  UUID: 2F6A7B3D-5FC1-30FA-A661-5DC69FBE2D6C
-  Functions: 9623
-  Symbols:   2128
-  CStrings:  13163
+  UUID: FD50E477-AAE6-381A-9F01-9B6CDE866102
+  Functions: 9733
+  Symbols:   2173
+  CStrings:  13303
 
Symbols:
+ OBJC_IVAR_$_APPBAdData._startDate
+ OBJC_IVAR_$_APPBComponentMetaData._durationInSeconds
+ OBJC_IVAR_$_APPBComponentMetaData._eventTimestamp
+ OBJC_IVAR_$_APPBComponentMetaData._has
+ OBJC_IVAR_$_APPBComponentMetaData._identifier
+ OBJC_IVAR_$_APPBComponentMetaData._relevantIdentifierType
+ OBJC_IVAR_$_APPBLogMetaData._componentElements
+ OBJC_IVAR_$_APPBLogMetaData._messageIdentifier
+ _APLegacyAdOpIDKey
+ _APLegacyAnfComponentMetadataKey
+ _APLegacyBodyKey
+ _APLegacyCategoriesKey
+ _APLegacyChannelIdKey
+ _APLegacyContentEnvironmentKey
+ _APLegacyContentLanguageKey
+ _APLegacyCurrentArticleKey
+ _APLegacyFeedMetadataKey
+ _APLegacyGroupContextAboveKey
+ _APLegacyGroupContextBelowKey
+ _APLegacyGroupContextKey
+ _APLegacyHeaderKey
+ _APLegacyKeySeparator
+ _APLegacyKeywordsKey
+ _APLegacyLanguagesKey
+ _APLegacyNextArticleKey
+ _APLegacyOnboardStatus
+ _APLegacyPlacementKey
+ _APLegacyPublicationMetadataKey
+ _APLegacyRequestedAdKey
+ _APLegacyShouldUseComponentMetadataKey
+ _APLegacySourceKey
+ _APLegacySuperFeedMetadataKey
+ _APLegacySuperfeedKey
+ _APLegacyValueCreativeType
+ _APPBComponentMetaDataReadFrom
+ _OBJC_CLASS_$_APAgePolicyProcessor
+ _OBJC_CLASS_$_APAggregatedTimeSpentEventRequester
+ _OBJC_CLASS_$_APAggregatedTimeSpentLegacyInterface
+ _OBJC_CLASS_$_APExperimentationReportTelemetryDelivery
+ _OBJC_CLASS_$_APPBComponentMetaData
+ _OBJC_CLASS_$_APRemovePrivacySensitiveFieldsContextTransformer
+ _OBJC_CLASS_$_APTimestampUtilities
+ _OBJC_CLASS_$__TtC15LegacyInterface24AggregatedTimeSpentEntry
+ _OBJC_CLASS_$__TtC15LegacyInterface32AggregatedTimeSpentStoreDatabase
+ _OBJC_METACLASS_$_APAgePolicyProcessor
+ _OBJC_METACLASS_$_APAggregatedTimeSpentEventRequester
+ _OBJC_METACLASS_$_APAggregatedTimeSpentLegacyInterface
+ _OBJC_METACLASS_$_APExperimentationReportTelemetryDelivery
+ _OBJC_METACLASS_$_APPBComponentMetaData
+ _OBJC_METACLASS_$_APRemovePrivacySensitiveFieldsContextTransformer
+ _OBJC_METACLASS_$_APTimestampUtilities
+ _OBJC_METACLASS_$__TtC15LegacyInterface24AggregatedTimeSpentEntry
+ _OBJC_METACLASS_$__TtC15LegacyInterface32AggregatedTimeSpentStoreDatabase
+ _swift_isUniquelyReferenced_nonNull_bridgeObject
+ _swift_isaMask
+ _swift_unknownObjectUnownedDestroy
+ _swift_unknownObjectUnownedInit
+ _swift_unknownObjectUnownedLoadStrong
- _OBJC_CLASS_$_APExperimentationError
- _OBJC_CLASS_$_APSponsorshipPlacementConfig
- _OBJC_CLASS_$_APTimeSpentEntry
- _OBJC_CLASS_$_APTimeSpentEventRequester
- _OBJC_CLASS_$_APTimeSpentLegacyInterface
- _OBJC_CLASS_$_APTimeSpentStoreDatabase
- _OBJC_METACLASS_$_APExperimentationError
- _OBJC_METACLASS_$_APTimeSpentEntry
- _OBJC_METACLASS_$_APTimeSpentEventRequester
- _OBJC_METACLASS_$_APTimeSpentLegacyInterface
- _OBJC_METACLASS_$_APTimeSpentStoreDatabase
- _encryptStringForAdServing
- _objc_retain_x9
CStrings:
+ ", clientIdentifier: "
+ ", durationInSeconds: "
+ ", eventTimeStamp: "
+ "143441"
+ "@\"<_TtP7Reports23ReportTelemetryDelivery_>\""
+ "@\"APAggregatedTimeSpentLegacyInterface\""
+ "@\"NSData\"32@0:8@\"NSString\"16@\"NSString\"24"
+ "ADStatusCodeNoAdDueToPolicyRequirement"
+ "APAgePolicyProcessor"
+ "APAggregatedTimeSpentEventRequester"
+ "APAggregatedTimeSpentLegacyInterface"
+ "APExperimentationReportTelemetryDelivery"
+ "APPBComponentMetaData"
+ "APRemovePrivacySensitiveFieldsContextTransformer"
+ "APTimestampUtilities"
+ "Ad data did not contain valid journey start relay values."
+ "Aggregated Time Spent Activity Terminated."
+ "Aggregated Time Spent metric failed for some reason for componentData %{public}@"
+ "Aggregated time spent metric request failed due to %{public}@."
+ "Aggregated time spent metric request succeeded."
+ "AggregatedTimeSpent"
+ "AggregatedTimeSpentEntry with lineIdentifier: "
+ "AggregatedTimeSpentStore"
+ "B44@0:8@16i24@28@36"
+ "DELETE FROM AggregatedTimeSpent WHERE (lineIdentifier, eventTimestamp, clientIdentifier) IN (VALUES"
+ "ExperimentationReportTelemetry"
+ "Failed to store accumulated visibility time for contentData %{public}@ to line identifier %{public}@"
+ "INSERT INTO AggregatedTimeSpent (lineIdentifier, eventTimestamp, durationInSeconds, clientIdentifier) VALUES (?, ?, ?, ?) ON CONFLICT (lineIdentifier, eventTimestamp, clientIdentifier) DO UPDATE SET durationInSeconds = durationInSeconds + ?"
+ "Journey relay item did not contain valid key and/or value."
+ "LegacyInterface.AggregatedTimeSpentEntry"
+ "LegacyInterface.AggregatedTimeSpentStoreDatabase"
+ "Main database is nil, AggregatedTimeSpentUtilities is being used outside of PCD or in Unit tests."
+ "No representations found for contentData %{public}@"
+ "Received metric processor"
+ "Report generated with no errors"
+ "Request Aggregated Time Spent Report activity deferral."
+ "SELECT * FROM AggregatedTimeSpent WHERE eventTimestamp < ? LIMIT "
+ "Specified dictionary did not contain valid journey start relay campaign value."
+ "Starting Aggregated Time Spent Report activity."
+ "StringAsRelevantIdentifierType:"
+ "T@\"<_TtP7Reports23ReportTelemetryDelivery_>\",R,N,V_telemetryDelivery"
+ "T@\"APAggregatedTimeSpentLegacyInterface\",&,N,V_aggregatedTimeSpentLegacyInterface"
+ "T@\"NSArray\",&,N,V_timeSpentEntries"
+ "T@\"NSArray\",N,R"
+ "T@\"NSData\",&,N,V_messageIdentifier"
+ "T@\"NSMutableArray\",&,N,V_componentElements"
+ "TB,V_hasStoredAccumulatedVisibilityTime"
+ "Td,N,V_eventTimestamp"
+ "Td,N,V_startDate"
+ "Td,R,V_roundedTimestamp"
+ "Td,V_roundedTimestampForASE"
+ "Td,V_roundedTimestampForAggregatedTimespent"
+ "Telemetry log, report cadence: %ld."
+ "Ti,N,V_durationInSeconds"
+ "Ti,N,V_relevantIdentifierType"
+ "Tq,N,V_effectiveAge"
+ "Tq,R,V_effectiveBirthYear"
+ "User age is being set to age from segment data."
+ "User age is being set to effective age."
+ "[APAggregatedTimeSpentEventRequester] Failed to remove entries %{public}@"
+ "[AggregatedTimeSpentDatabase] Entries are empty, nothing to remove."
+ "[AggregatedTimeSpentDatabase] Failed to remove entries with keys %{public}@."
+ "[AggregatedTimeSpentDatabase] Failed to retrieve any entries older than date %{public}@"
+ "[AggregatedTimeSpentDatabase] Failed to store entry with lineID %{public}@, eventTimeStamp: %{public}@, durationInSeconds %{public}d, clientIdentifier: %{public}@"
+ "[AggregatedTimeSpentDatabase] Failure occurred while retrieving entries."
+ "[AggregatedTimeSpentDatabase] Removing entries: %{public}@"
+ "[AggregatedTimeSpentUtilities] Failed to retrieve time spent entries."
+ "[ExperimentationReportBuilder] Unable to insert delivered report for telemetry."
+ "_TtC15LegacyInterface24AggregatedTimeSpentEntry"
+ "_TtC15LegacyInterface28AggregatedTimeSpentUtilities"
+ "_TtC15LegacyInterface32AggregatedTimeSpentStoreDatabase"
+ "_TtC16promotedcontentd26AggregatedTimeSpentAdapter"
+ "_TtC16promotedcontentd33AggregatedTimeSpentStorageAdapter"
+ "_TtP7Reports23ReportTelemetryDelivery_"
+ "_aggregatedTimeSpentLegacyInterface"
+ "_componentElements"
+ "_durationInSeconds"
+ "_effectiveAge"
+ "_effectiveBirthYear"
+ "_eventTimestamp"
+ "_hasStoredAccumulatedVisibilityTime"
+ "_messageIdentifier"
+ "_relevantIdentifierType"
+ "_roundedTimestamp"
+ "_roundedTimestampForASE"
+ "_roundedTimestampForAggregatedTimespent"
+ "_telemetryDelivery"
+ "_timeSpentEntries"
+ "addComponentElements:"
+ "aggregatedTimeSpentEntries"
+ "aggregatedTimeSpentLegacyInterface"
+ "aggregatedTimeSpentProcessor"
+ "anfComponentMetadata"
+ "b\xc1"
+ "channelId"
+ "clearComponentElements"
+ "clientIdentifier"
+ "componentElements"
+ "componentElementsAtIndex:"
+ "componentElementsCount"
+ "componentElementsType"
+ "confirmAccumulatedVisibilityTimeStored"
+ "contentEnvironment"
+ "contentMinimumAge"
+ "contextJSONDictionaryForRequest:andPlacementType:"
+ "currentCalendar"
+ "d24@0:8d16"
+ "durationInSeconds"
+ "effectiveAge"
+ "effectiveBirthYear"
+ "encryptStringForAdServing:name:"
+ "eventTimeStamp"
+ "eventTimestamp"
+ "getAgeFromSegmentData:"
+ "getEffectiveAgeFromBirthYear:"
+ "handleInterfaceUnloaded:internalContent:"
+ "hasDurationInSeconds"
+ "hasEventTimestamp"
+ "hasMessageIdentifier"
+ "hasRelevantIdentifierType"
+ "hasStartDate"
+ "hasStoredAccumulatedVisibilityTime"
+ "initWithBundleID:aggregatedTimeSpentEntries:databaseManager:"
+ "initWithClientIdentifier:aggregatedTimeSpentEntries:"
+ "initWithTriggerTable:telemetryDelivery:metricReceiving:"
+ "journeyRelayLineId"
+ "journeyStartRelayCampaignValueFrom:"
+ "journeyStartRelayLineIdentifierValueFrom:"
+ "journeyStartRelayValuesFrom:"
+ "lineId"
+ "lineIdentifier"
+ "logExperimentationErrorWithErrorType:description:"
+ "logReportCadenceWithLastReportDate:newReportDate:"
+ "logReportSuccededIfNeeded"
+ "makeAggregatedTimeSpentRequests:activity:"
+ "messageIdentifier"
+ "midnightUTCOfCurrentDay"
+ "processContentData:"
+ "promotedcontentd.AggregatedTimeSpentStorageAdapter"
+ "promotedcontentd/AggregatedTimeSpentAdapter.swift"
+ "publicationMetadata"
+ "q24@0:8q16"
+ "relevantIdentifierType"
+ "relevantIdentifierTypeAsString:"
+ "removeEntries:"
+ "reportErrors"
+ "retrieveAggregatedTimespentEntries"
+ "retrieveComponentMetaDataFromEntries:"
+ "retrieveTimeSpentEntriesWithOlderThanDate:"
+ "roundedTimestampForASE"
+ "roundedTimestampForAggregatedTimespent"
+ "roundedTimestampFromInterval:"
+ "sendAggregatedTimeSpentMetricFor:aggregatedTimeSpentEntries:completionHandler:"
+ "setAggregatedTimeSpentLegacyInterface:"
+ "setComponentElements:"
+ "setDurationInSeconds:"
+ "setEffectiveAge:"
+ "setEventTimestamp:"
+ "setHasDurationInSeconds:"
+ "setHasEventTimestamp:"
+ "setHasRelevantIdentifierType:"
+ "setHasStartDate:"
+ "setHasStoredAccumulatedVisibilityTime:"
+ "setJourneyRelayLineId:"
+ "setMessageIdentifier:"
+ "setRelevantIdentifierType:"
+ "setRoundedTimestampForASE:"
+ "setRoundedTimestampForAggregatedTimespent:"
+ "setTimeSpentEntries:"
+ "shouldUseComponentMetadata"
+ "storeEntryWithLineID:durationInSeconds:eventTimestamp:clientIdentifier:"
+ "superFeedMetadata"
+ "superfeed_key1"
+ "telemetryDelivery"
+ "timeSpentEntries"
+ "transformedContextForDroppedDueToPolicyFromContext:"
+ "v32@0:8@\"NSDate\"16@\"NSDate\"24"
+ "values"
+ "{?=\"eventTimestamp\"b1\"durationInSeconds\"b1\"relevantIdentifierType\"b1}"
+ "{?=\"expirationDate\"b1\"minimumIntervalBetweenPresentations\"b1\"priority\"b1\"rewardTokensExpiration\"b1\"skipThreshold\"b1\"startDate\"b1\"adPrivacyMarkPosition\"b1\"bannerImpressionThreshold\"b1\"bannerNewContentCandidacyThreshold\"b1\"desiredPosition\"b1\"letterboxCreativeColor\"b1\"maximumPretapRequestCount\"b1\"unfilledReasonCode\"b1\"doesNotResetListeningTime\"b1\"downloadWebArchivesBeforeShowingBanner\"b1\"unbranded\"b1}"
- "%{public}@."
- "@\"APTimeSpentLegacyInterface\""
- "@\"NSArray\"24@0:8@\"NSDate\"16"
- "@24@0:8@\"APDatabaseManager\"16"
- "@88@0:8@16@24@32@40@48@56@64d72@80"
- "APExperimentationError"
- "APTimeSpentEntry"
- "APTimeSpentEventRequester"
- "APTimeSpentLegacyInterface"
- "APTimeSpentStore"
- "APTimeSpentStoreDatabase"
- "B36@0:8@16@24B32"
- "DELETE FROM TimeSpent WHERE contentId IN ("
- "ExpiredAnonId"
- "INSERT OR REPLACE INTO TimeSpent(contentId,timeStamp) VALUES (?,?)"
- "ManagedContentNotFound"
- "ManagedContextNotFound"
- "No managed content data for %{public}@."
- "Request Time Spent Report activity deferral."
- "R\xc1"
- "SELECT * FROM TimeSpent WHERE timestamp <= ?"
- "Starting Time Spent Report activity."
- "T@\"APTimeSpentLegacyInterface\",&,N,V_timeSpentLegacyInterface"
- "T@\"NSDate\",N,R"
- "T@\"NSString\",&,N,V_contentId"
- "Td,R"
- "Time Spent Activity Terminated."
- "Time Spent Metric Request failed for some reason, keep content with identifier %{public}@ in database to retry later."
- "Time spent metric request failed due to %{public}@."
- "Time spent metric request succeeded."
- "TimeSpentDailyRequester"
- "Trying to send time spent metric for promoted content with content id: %@, but couldn't find it or user account changed."
- "[ExperimentationAggregator] Unable to get database tables."
- "[ExperimentationReportBuilder] Unable to get tables."
- "[TimeSpentDatabase] Removing entry for contentId: %{public}@"
- "[TimeSpentDatabase] Retrieving entry for contentId: %{public}@ and timeStamp: %{public}@"
- "[TimeSpentDatabase] Storing entry for contentId: %{public}@ and timeStamp: %{public}@"
- "__ObjC.APTimeSpentEntry"
- "__ObjC.APTimeSpentStoreDatabase"
- "_contentId"
- "_timeSpentLegacyInterface"
- "calculateDuration"
- "contentId"
- "dateWithTimeIntervalSinceNow:"
- "experimentationErrorWithErrorType:description:"
- "initWithBundleID:idAccount:contentId:contextId:adDataResponseIdentifier:batchId:impressionIdentifierData:timeSpent:databaseManager:"
- "initWithContentId:timeStamp:"
- "initWithTriggerTable:metricReceiving:"
- "makeTimeSpentRequests:activity:"
- "removeEntriesForContentIds:"
- "retrieveTimeSpentEntriesOlderThan:"
- "retrieveTimeSpentTTLConfigValue"
- "sendDiagnosticReport:context:isUserChanged:"
- "sendTimeSpentMetric"
- "sendTimeSpentMetricFor:contentId:contextId:adDataResponseIdentifier:batchId:impressionIdentifierData:timeSpent:completionHandler:"
- "setContentId:"
- "setTimeSpentLegacyInterface:"
- "storeEntryForContentId:"
- "storeEntryForContentId:timeStamp:"
- "stringWithUTF8String:"
- "timeInterval"
- "timeSpentLegacyInterface"
- "timeSpentMetricTTL"
- "timeSpentProcessor"
- "v20@?0B8@\"NSString\"12"
- "v80@0:8@16@24@32@40@48@56d64@?72"
- "{?=\"expirationDate\"b1\"minimumIntervalBetweenPresentations\"b1\"priority\"b1\"rewardTokensExpiration\"b1\"skipThreshold\"b1\"adPrivacyMarkPosition\"b1\"bannerImpressionThreshold\"b1\"bannerNewContentCandidacyThreshold\"b1\"desiredPosition\"b1\"letterboxCreativeColor\"b1\"maximumPretapRequestCount\"b1\"unfilledReasonCode\"b1\"doesNotResetListeningTime\"b1\"downloadWebArchivesBeforeShowingBanner\"b1\"unbranded\"b1}"

```
