## AdPlatformsCommon

> `/System/Library/PrivateFrameworks/AdPlatformsCommon.framework/AdPlatformsCommon`

```diff

-554.14.0.0.0
-  __TEXT.__text: 0x1355c
-  __TEXT.__auth_stubs: 0x840
-  __TEXT.__objc_methlist: 0x1e84
-  __TEXT.__const: 0x68e
-  __TEXT.__cstring: 0x1740
-  __TEXT.__gcc_except_tab: 0x130
-  __TEXT.__oslogstring: 0x6f8
-  __TEXT.__swift5_typeref: 0x1f8
-  __TEXT.__swift5_fieldmd: 0x1ac
-  __TEXT.__constg_swiftt: 0x24c
-  __TEXT.__swift5_builtin: 0x28
-  __TEXT.__swift5_reflstr: 0xff
-  __TEXT.__swift5_assocty: 0x90
-  __TEXT.__swift5_protos: 0x8
-  __TEXT.__swift5_proto: 0x4c
-  __TEXT.__swift5_types: 0x28
-  __TEXT.__unwind_info: 0x5c0
+555.40.1.0.0
+  __TEXT.__text: 0x232e4
+  __TEXT.__auth_stubs: 0x11b0
+  __TEXT.__objc_methlist: 0x2214
+  __TEXT.__const: 0x188e
+  __TEXT.__cstring: 0x2e7f
+  __TEXT.__gcc_except_tab: 0x17c
+  __TEXT.__oslogstring: 0x76b
+  __TEXT.__constg_swiftt: 0xcd8
+  __TEXT.__swift5_typeref: 0x9b6
+  __TEXT.__swift5_reflstr: 0x7f0
+  __TEXT.__swift5_fieldmd: 0x9a4
+  __TEXT.__swift5_builtin: 0x50
+  __TEXT.__swift5_assocty: 0x108
+  __TEXT.__swift5_proto: 0x114
+  __TEXT.__swift5_types: 0xb8
+  __TEXT.__swift5_protos: 0x48
+  __TEXT.__swift5_capture: 0x30
+  __TEXT.__swift5_mpenum: 0x8
+  __TEXT.__unwind_info: 0x9f8
+  __TEXT.__eh_frame: 0x378
   __TEXT.__objc_classname: 0x3ba
-  __TEXT.__objc_methname: 0x454c
-  __TEXT.__objc_methtype: 0x819
-  __TEXT.__objc_stubs: 0x25c0
-  __DATA_CONST.__got: 0x208
-  __DATA_CONST.__const: 0x368
-  __DATA_CONST.__objc_classlist: 0x108
+  __TEXT.__objc_methname: 0x4897
+  __TEXT.__objc_methtype: 0x88f
+  __TEXT.__objc_stubs: 0x2600
+  __DATA_CONST.__got: 0x360
+  __DATA_CONST.__const: 0x408
+  __DATA_CONST.__objc_classlist: 0x1b8
   __DATA_CONST.__objc_protolist: 0x58
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0xf70
+  __DATA_CONST.__objc_selrefs: 0x1110
   __DATA_CONST.__objc_protorefs: 0x28
   __DATA_CONST.__objc_superrefs: 0xd0
-  __AUTH_CONST.__auth_got: 0x430
-  __AUTH_CONST.__auth_ptr: 0x110
-  __AUTH_CONST.__const: 0x468
-  __AUTH_CONST.__cfstring: 0x18a0
-  __AUTH_CONST.__objc_const: 0x4758
-  __AUTH.__objc_data: 0xf0
-  __AUTH.__data: 0xf0
-  __DATA.__objc_ivar: 0x334
-  __DATA.__data: 0x488
-  __DATA.__bss: 0x810
-  __DATA_DIRTY.__objc_data: 0x960
-  __DATA_DIRTY.__data: 0x200
-  __DATA_DIRTY.__bss: 0x140
-  __DATA_DIRTY.__common: 0x1
+  __AUTH_CONST.__auth_got: 0x8e8
+  __AUTH_CONST.__auth_ptr: 0x3b0
+  __AUTH_CONST.__const: 0xcd8
+  __AUTH_CONST.__cfstring: 0x18c0
+  __AUTH_CONST.__objc_const: 0x55f8
+  __AUTH.__objc_data: 0x138
+  __AUTH.__data: 0x1c8
+  __DATA.__objc_ivar: 0x338
+  __DATA.__data: 0x6a8
+  __DATA.__bss: 0x1320
+  __DATA_DIRTY.__objc_data: 0xae0
+  __DATA_DIRTY.__data: 0x1268
+  __DATA_DIRTY.__bss: 0x5c0
+  __DATA_DIRTY.__common: 0x18
   - /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
   - /System/Library/Frameworks/Foundation.framework/Foundation
+  - /System/Library/PrivateFrameworks/APConfigurationSystem.framework/APConfigurationSystem
   - /System/Library/PrivateFrameworks/APFoundation.framework/APFoundation
   - /System/Library/PrivateFrameworks/AppleMediaServices.framework/AppleMediaServices
   - /System/Library/PrivateFrameworks/FeatureFlags.framework/FeatureFlags

   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsys_time.dylib
   - /usr/lib/swift/libswiftunistd.dylib
-  Functions: 813
-  Symbols:   232
-  CStrings:  1312
+  Functions: 1226
+  Symbols:   308
+  CStrings:  1486
 
Symbols:
+ _APPerfLogForCategory
+ _OBJC_CLASS_$_APAnalytics
+ _OBJC_CLASS_$_APCSAnonymousSessionId
+ _OBJC_CLASS_$_APCSBucketId
+ _OBJC_CLASS_$_APCSRotatedAnonymousId
+ _OBJC_CLASS_$_APCSSessionManagementIDs
+ _OBJC_CLASS_$_APConfigurationMediator
+ _OBJC_CLASS_$_APRotatingIdentifier
+ _OBJC_CLASS_$_APRotatingIdentifierProvider
+ _OBJC_CLASS_$_NSDistributedNotificationCenter
+ _OBJC_CLASS_$_NSJSONSerialization
+ _OBJC_CLASS_$_NSOperationQueue
+ _OBJC_CLASS_$_NSProcessInfo
+ _OBJC_CLASS_$_NSUserDefaults
+ _OBJC_CLASS_$_OS_dispatch_queue
+ _OBJC_CLASS_$_OS_os_log
+ _OBJC_CLASS_$__TtCs12_SwiftObject
+ _OBJC_METACLASS_$_APRotatingIdentifier
+ _OBJC_METACLASS_$_APRotatingIdentifierProvider
+ __Block_copy
+ __Block_release
+ __os_signpost_emit_with_name_impl
+ __swiftEmptyDictionarySingleton
+ __swiftImmortalRefCount
+ __swift_stdlib_reportUnimplementedInitializer
+ _free
+ _kAPAccountChangedNotification
+ _malloc
+ _objc_allocWithZone
+ _objc_opt_self
+ _objc_retainAutoreleasedReturnValue
+ _objc_retain_x27
+ _os_signpost_enabled
+ _os_signpost_id_generate
+ _swift_allocBox
+ _swift_allocError
+ _swift_arrayInitWithCopy
+ _swift_arrayInitWithTakeBackToFront
+ _swift_arrayInitWithTakeFrontToBack
+ _swift_beginAccess
+ _swift_bridgeObjectRelease_n
+ _swift_bridgeObjectRetain_n
+ _swift_cvw_allocateGenericValueMetadataWithLayoutString
+ _swift_cvw_assignWithCopy
+ _swift_cvw_assignWithTake
+ _swift_cvw_destroy
+ _swift_cvw_enumFn_getEnumTag
+ _swift_cvw_initEnumMetadataMultiPayloadWithLayoutString
+ _swift_cvw_initStructMetadataWithLayoutString
+ _swift_cvw_initWithCopy
+ _swift_cvw_initWithTake
+ _swift_cvw_initializeBufferWithCopyOfBuffer
+ _swift_cvw_multiPayloadEnumGeneric_destructiveInjectEnumTag
+ _swift_cvw_multiPayloadEnumGeneric_getEnumTag
+ _swift_deallocObject
+ _swift_deallocPartialClassInstance
+ _swift_dynamicCast
+ _swift_dynamicCastObjCClass
+ _swift_endAccess
+ _swift_errorRelease
+ _swift_getErrorValue
+ _swift_getObjCClassFromMetadata
+ _swift_getObjCClassMetadata
+ _swift_initStackObject
+ _swift_isaMask
+ _swift_makeBoxUnique
+ _swift_release_n
+ _swift_retain_n
+ _swift_stdlib_random
+ _swift_unknownObjectRelease
+ _swift_unknownObjectWeakAssign
+ _swift_unknownObjectWeakDestroy
+ _swift_unknownObjectWeakInit
+ _swift_unknownObjectWeakLoadStrong
+ _swift_updateClassMetadata2
+ _swift_weakDestroy
+ _swift_weakInit
+ _swift_weakLoadStrong
+ _swift_willThrow
- _swift_allocateGenericValueMetadata
- _swift_initEnumMetadataMultiPayload
- _swift_initStructMetadata
CStrings:
+ "\x01\x19\x15A\x12"
+ "\x12\x12\x13\x13[)\x13"
+ " AND i.name IS NULL"
+ " AND rowId IN (SELECT identifierRowId FROM IdentifierSource WHERE source = ?)"
+ " AND s.source = ?"
+ " AND s.source IN ("
+ ", anonymousSessionId: "
+ "@56@0:8@16q24q32@40@48"
+ "APRotatingIdentifier"
+ "APRotatingIdentifierProvider"
+ "AdPlatformsCommon.RotatingIdentifier"
+ "AdPlatformsCommon.RotatingIdentifierProvider"
+ "AdPlatformsCommon/BucketIdRotation.swift"
+ "AnonymousSessionId"
+ "Client Backing Store, session is not active"
+ "Configuration Error, missing or malformed anonymousSessionId"
+ "Configuration Error, missing or malformed bucketId"
+ "Configuration Error, missing or malformed rotatedAnonymousIds"
+ "Couldn't build AnonymousSessionId to get expiration time"
+ "Couldn't get Unique DSID Token"
+ "Couldn't get Unique PA Status Token"
+ "Couldn't open XPCSession"
+ "DELETE FROM Identifier WHERE rowid IN (SELECT i.rowid FROM Identifier AS i INNER JOIN IdentifierSource AS s ON i.rowid = s.identifierRowId WHERE i.type = ?"
+ "Database Delete query failed"
+ "Database Insert query failed"
+ "Database Select query failed"
+ "Database Transaction failed"
+ "Database Update query failed"
+ "Error requesting Identifiers through XPC"
+ "Error while trying to generate JSON value for BucketId"
+ "Error: %s, Description: %s"
+ "Failed to create XPCListener"
+ "Failed to decode received XPCMessage"
+ "Failed to fetch Identifiers through XPC, error getting bundleId"
+ "Get Identifier data failure"
+ "Get config failed"
+ "INSERT INTO Identifier(value, expiration, type, timestamp, amsDSID, paStatus) VALUES (?, ?, ?, ?, ?, ?)"
+ "INSERT INTO Identifier(value, expiration, type, timestamp, generation, name, processId) VALUES (?, ?, ?, ?, ?, ?, ?)"
+ "INSERT INTO Identifier(value, expiration, type, timestamp, processId, amsDSID) VALUES (?, ?, ?, ?, ?, ?)"
+ "INSERT INTO IdentifierSource (identifierRowId, source) VALUES "
+ "Identifier Manager error: "
+ "IdentifierBuilder: Get storage failed"
+ "IdentifierData: Value: "
+ "IdentifierManager"
+ "Namespaces do not match."
+ "PersonalizedAdsStateUUID"
+ "RotatedAnonymousId"
+ "RotatingIdentifierXPCReceiver: Unknown event source"
+ "RotatingIdentifierXPCRequester dealloc."
+ "Rotation of wrong type called build data."
+ "Rotation of wrong type called stored data."
+ "SELECT i.rowid, i.value, i.expiration, i.type, i.timestamp, i.generation, i.name, i.processId, i.amsDSID, i.paStatus FROM Identifier AS i INNER JOIN IdentifierSource AS s ON i.rowid = s.identifierRowId WHERE i.name = ?"
+ "SELECT i.rowid, i.value, i.expiration, i.type, i.timestamp, i.generation, i.name, i.processId, i.amsDSID, i.paStatus FROM Identifier AS i INNER JOIN IdentifierSource AS s ON i.rowid = s.identifierRowId WHERE i.type = ? AND s.source = ?"
+ "SELECT source FROM IdentifierSource WHERE identifierRowId = ?"
+ "Save identifier failed"
+ "T@\"NSArray\",&,N,V_triggers"
+ "T@\"NSDate\",N,C"
+ "T@\"NSString\",&,V_impressionId"
+ "T@\"NSString\",N,C"
+ "Tq,N,Vsource"
+ "Tq,N,Vtype"
+ "Type: ASID, processId: "
+ "Type: BucketId, generation: "
+ "Type: RAID, amsDSID: "
+ "UPDATE Identifier SET processId = ? WHERE type = "
+ "Unable to find IdentifierType"
+ "[BucketIdDataBuilder] Error, couldn't update anonymousSessionId: %@"
+ "[BucketIdDataBuilder] New BucketId Data generated: %{public}@"
+ "[BucketIdDataBuilder] Updating bucketId linked anonymousSessionId: %@"
+ "[BucketIdDatasource] Unable to parse configuration, returning default."
+ "[IdentifierBuilder] Get Identifier data failure, error: %{public}@"
+ "[IdentifierBuilder] Identifier is valid, returning stored value: %{public}@"
+ "[IdentifierBuilder] Identifier rotated, value: %{public}@"
+ "[IdentifierBuilder] Request to build identifiers for type: %{public}@ source: %{public}d processId: %{public}@"
+ "[IdentifierBuilder] Save Identifier data failure, error: %{public}@"
+ "[IdentifierData] Unable to find the correct source for ASID or RAID."
+ "[RotatingIdentifierProvider] Identifier Cached Expired"
+ "[RotatingIdentifierProvider] Identifier cache released."
+ "[RotatingIdentifierProvider] Identifier changed processId"
+ "[RotatingIdentifierXPCRequester] Request identifiers for type: %s."
+ "[RotationNotificationListener] Notification %@ recieved"
+ "_TtC17AdPlatformsCommon15PCDBackingStore"
+ "_TtC17AdPlatformsCommon16BucketIdCacheTTL"
+ "_TtC17AdPlatformsCommon16BucketIdRotation"
+ "_TtC17AdPlatformsCommon17IdentifierBuilder"
+ "_TtC17AdPlatformsCommon18BucketIdDatasource"
+ "_TtC17AdPlatformsCommon19BucketIdDataBuilder"
+ "_TtC17AdPlatformsCommon19IdentifierDataStore"
+ "_TtC17AdPlatformsCommon21IdentifierNodeFetcher"
+ "_TtC17AdPlatformsCommon24BaseIdentifierDatasource"
+ "_TtC17AdPlatformsCommon26AnonymousSessionIdCacheTTL"
+ "_TtC17AdPlatformsCommon26AnonymousSessionIdRotation"
+ "_TtC17AdPlatformsCommon26RotatedAnonymousIdCacheTTL"
+ "_TtC17AdPlatformsCommon26RotatedAnonymousIdRotation"
+ "_TtC17AdPlatformsCommon28AnonymousSessionIdDatasource"
+ "_TtC17AdPlatformsCommon28FeatureFlagFFIFConfiguration"
+ "_TtC17AdPlatformsCommon28RotatedAnonymousIdDatasource"
+ "_TtC17AdPlatformsCommon28RotationNotificationListener"
+ "_TtC17AdPlatformsCommon29AnonymousSessionIdDataBuilder"
+ "_TtC17AdPlatformsCommon29RotatedAnonymousIdDataBuilder"
+ "_TtC17AdPlatformsCommon30RotatingIdentifierXPCRequester"
+ "_impressionId"
+ "_triggers"
+ "accountProvider"
+ "addObserverForName:object:suspensionBehavior:queue:usingBlock:"
+ "aggregationWindows"
+ "anonymousSessionId"
+ "anonymousSessionIds"
+ "backingStore"
+ "bucketIds"
+ "cacheTTL"
+ "com.apple.AdPlatforms"
+ "com.apple.adplatforms"
+ "com.apple.ap.promotedcontent.identifiermanager"
+ "com.apple.ap.promotedcontentd.identifierrequester"
+ "configurableFeatureFlag"
+ "configuration"
+ "configurationForClass:"
+ "configurationForClass:usingCache:"
+ "dataBuilder"
+ "dataSource"
+ "dataWithJSONObject:options:error:"
+ "database"
+ "datasource"
+ "defaultAggregationWindows"
+ "defaultAnonymousSessionIdForAppStore"
+ "defaultBucketIds"
+ "defaultCenter"
+ "defaultFeatureFlag"
+ "defaultRAIDForAppStore"
+ "dsidProvider"
+ "enableSessionManagementIds"
+ "fallback"
+ "featureFlagEnabled"
+ "finishedWithRequestsForRequester:logID:"
+ "getIdentifiersWithType:source:processId:"
+ "identiferCache"
+ "identifierStorage"
+ "identifiermanager"
+ "impressionId"
+ "init()"
+ "initWithInteger:"
+ "initWithSuiteName:"
+ "initWithValue:type:source:expirationDate:processId:"
+ "isRunningTests"
+ "nodeFetcher"
+ "notificationDelegate"
+ "notificationListener"
+ "notificationQueue"
+ "notificationReceived"
+ "preWarm:completion:"
+ "preWarm:forRequester:completion:"
+ "preWarm:logID:completion:"
+ "processId"
+ "processInfo"
+ "proxyURLWithLogID:completionHandler:"
+ "queue"
+ "queueLabel"
+ "refreshLazyFeatureFlagsIfNeeded"
+ "refreshLazyFeatureFlagsIfNeededWithLogID:"
+ "removeObserver:"
+ "requestPromotedContentOfTypes:forRequester:forContext:withClientInfo:deliverEntireBatch:logID:completionHandler:"
+ "rotatedAnonymousIds"
+ "rotation"
+ "sendAndRankContent:forContext:placement:logID:completionHandler:"
+ "sendEvent:customPayload:"
+ "session"
+ "setImpressionId:"
+ "setProcessId:"
+ "setSource:"
+ "setTriggers:"
+ "statusProvider"
+ "storage"
+ "token"
+ "triggers"
+ "v16@?0@\"NSNotification\"8"
+ "v32@0:8@\"NSUUID\"16Q24"
+ "v32@0:8@16Q24"
+ "v32@0:8Q16@?24"
+ "v32@0:8Q16@?<v@?@\"NSString\">24"
+ "v40@0:8@\"NSDictionary\"16Q24@?<v@?B>32"
+ "v40@0:8@16Q24@?32"
+ "v56@0:8@\"NSArray\"16@\"APContext\"24Q32Q40@?<v@?@\"NSArray\"@\"NSError\">48"
+ "v56@0:8@16@24Q32Q40@?48"
+ "v68@0:8@\"NSArray\"16@\"NSUUID\"24@\"APContext\"32@\"APClientInfo\"40B48Q52@?<v@?>60"
+ "v68@0:8@16@24@32@40B48Q52@?60"
+ "xpcDelay"
- "\x01\x18\x15A\x12"
- "\x12\x12\x13\x13[*\x12"
- "Insufficient space allocated to copy string contents"
- "Swift/ContiguousArrayBuffer.swift"
- "Swift/StringTesting.swift"
- "Swift/StringUTF8View.swift"
- "Swift/UnsafeBufferPointer.swift"
- "Swift/UnsafePointer.swift"
- "Swift/UnsafeRawPointer.swift"
- "T@\"NSUUID\",&,V_impressionID"
- "Unexpectedly found nil while unwrapping an Optional value"
- "UnsafeMutableBufferPointer with negative count"
- "UnsafeMutablePointer.initialize overlapping range"
- "UnsafeMutableRawPointer.initializeMemory overlapping range"
- "_impressionID"
- "finishedWithRequestsForRequester:"
- "impressionID"
- "invalid Collection: less than 'count' elements in collection"
- "preWarm:"
- "requestPromotedContentOfTypes:forRequester:forContext:withClientInfo:deliverEntireBatch:completionHandler:"
- "setImpressionID:"
- "v24@0:8@\"NSDictionary\"16"
- "v24@0:8@?<v@?@\"NSString\">16"
- "v48@0:8@\"NSArray\"16@\"APContext\"24Q32@?<v@?@\"NSArray\"@\"NSError\">40"
- "v60@0:8@\"NSArray\"16@\"NSUUID\"24@\"APContext\"32@\"APClientInfo\"40B48@?<v@?>52"
- "v60@0:8@16@24@32@40B48@?52"

```
