## IMDaemonCore

> `/System/Library/PrivateFrameworks/IMDaemonCore.framework/IMDaemonCore`

```diff

-1261.100.4.2.35
-  __TEXT.__text: 0x1ff268
-  __TEXT.__auth_stubs: 0x3490
-  __TEXT.__objc_methlist: 0xe014
-  __TEXT.__const: 0x1768
-  __TEXT.__cstring: 0x32df1
-  __TEXT.__gcc_except_tab: 0x13850
-  __TEXT.__oslogstring: 0x2f683
+1261.200.71.2.16
+  __TEXT.__text: 0x203ebc
+  __TEXT.__auth_stubs: 0x34d0
+  __TEXT.__objc_methlist: 0xe13c
+  __TEXT.__const: 0x17c8
+  __TEXT.__gcc_except_tab: 0x13d28
+  __TEXT.__cstring: 0x33501
+  __TEXT.__oslogstring: 0x2ff06
   __TEXT.__ustring: 0x378
   __TEXT.__dlopen_cstrs: 0xa7
-  __TEXT.__swift5_typeref: 0xaf0
-  __TEXT.__constg_swiftt: 0x914
-  __TEXT.__swift5_reflstr: 0x58b
+  __TEXT.__swift5_typeref: 0xaf4
+  __TEXT.__constg_swiftt: 0x944
+  __TEXT.__swift5_reflstr: 0x57b
   __TEXT.__swift5_fieldmd: 0x5d8
-  __TEXT.__swift5_builtin: 0x8c
-  __TEXT.__swift5_assocty: 0x210
-  __TEXT.__swift5_capture: 0x968
-  __TEXT.__swift5_proto: 0xb0
-  __TEXT.__swift5_types: 0x8c
+  __TEXT.__swift5_builtin: 0xa0
+  __TEXT.__swift5_assocty: 0x228
+  __TEXT.__swift5_capture: 0x97c
+  __TEXT.__swift5_proto: 0xb4
+  __TEXT.__swift5_types: 0x90
   __TEXT.__swift5_protos: 0xc
-  __TEXT.__unwind_info: 0x80d8
-  __TEXT.__eh_frame: 0x12e0
-  __TEXT.__objc_classname: 0x21df
-  __TEXT.__objc_methname: 0x341c1
-  __TEXT.__objc_methtype: 0x7110
-  __TEXT.__objc_stubs: 0x21d00
-  __DATA_CONST.__got: 0x1190
-  __DATA_CONST.__const: 0x48c0
-  __DATA_CONST.__objc_classlist: 0x580
+  __TEXT.__unwind_info: 0x82a8
+  __TEXT.__eh_frame: 0x1370
+  __TEXT.__objc_classname: 0x21f5
+  __TEXT.__objc_methname: 0x3445b
+  __TEXT.__objc_methtype: 0x7136
+  __TEXT.__objc_stubs: 0x21ec0
+  __DATA_CONST.__got: 0x11d0
+  __DATA_CONST.__const: 0x48e8
+  __DATA_CONST.__objc_classlist: 0x588
   __DATA_CONST.__objc_catlist: 0xa0
   __DATA_CONST.__objc_protolist: 0x4b0
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_const: 0x15c80
-  __DATA_CONST.__objc_selrefs: 0xa210
+  __DATA_CONST.__objc_const: 0x15db0
+  __DATA_CONST.__objc_selrefs: 0xa2b8
   __DATA_CONST.__objc_arraydata: 0x88
-  __AUTH_CONST.__cfstring: 0x1ece0
-  __AUTH_CONST.__objc_const: 0x42f0
-  __AUTH_CONST.__const: 0x4138
+  __AUTH_CONST.__cfstring: 0x1f340
+  __AUTH_CONST.__objc_const: 0x4338
+  __AUTH_CONST.__const: 0x41d0
   __AUTH_CONST.__objc_intobj: 0x678
   __AUTH_CONST.__objc_arrayobj: 0xc0
   __AUTH_CONST.__auth_ptr: 0xa0
   __AUTH_CONST.__objc_floatobj: 0x10
-  __AUTH_CONST.__auth_got: 0x1a58
-  __AUTH.__objc_data: 0x1a08
+  __AUTH_CONST.__auth_got: 0x1a78
+  __AUTH.__objc_data: 0x1a58
   __AUTH.__data: 0x378
   __DATA.__objc_protorefs: 0x168
-  __DATA.__objc_classrefs: 0xcf0
+  __DATA.__objc_classrefs: 0xd00
   __DATA.__objc_superrefs: 0x3c8
-  __DATA.__objc_ivar: 0xab0
+  __DATA.__objc_ivar: 0xab4
   __DATA.__objc_data: 0x20
-  __DATA.__data: 0x3408
-  __DATA.__bss: 0x1670
+  __DATA.__data: 0x3448
+  __DATA.__bss: 0x16f0
   __DATA.__common: 0x90
-  __DATA_DIRTY.__objc_data: 0x2348
+  __DATA_DIRTY.__objc_data: 0x2358
   __DATA_DIRTY.__data: 0x540
   __DATA_DIRTY.__bss: 0x6e0
   __DATA_DIRTY.__common: 0x60

   - /usr/lib/swift/libswift_Concurrency.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  Functions: 7414
-  Symbols:   1997
-  CStrings:  15758
+  Functions: 7452
+  Symbols:   2029
+  CStrings:  15871
 
Symbols:
+ _IMCloudKitDefinesSyncAfterAccountUpdateKey
+ _IMCloudKitDefinesSyncAfterAccountUpdatePhaseKey
+ _IMCloudKitDefinesSyncAfterIdentityUpdateKey
+ _IMCloudKitDefinesSyncAfterIdentityUpdatePhaseKey
+ _IMCloudKitFullSyncCompletedDate
+ _IMCloudKitInitialSyncFirstCompletedDate
+ _IMCloudKitMiCDeviceIdentifierKey
+ _IMDCKLocalDBStatsKey
+ _IMDMessageRecordCopyMessagesPendingUpdateT3ToCloudKitWithLimit
+ _IMSharedHelperDeviceIsSharediPad
+ _MessageDictionaryArchivedNicknameUpdatesRecordIDsKey
+ _MessageDictionaryCurrentNicknameUpdatesRecordIDsKey
+ _MessageDictionaryNicknameActiveListKey
+ _MessageDictionaryNicknameActiveListVersionKey
+ _MessageDictionaryNicknameCloudKitDecryptionRecordKey
+ _MessageDictionaryNicknameCloudKitRecordKey
+ _MessageDictionaryNicknameIgnoredListKey
+ _MessageDictionaryNicknameIgnoredListVersionKey
+ _MessageDictionaryNicknameTransitionedListKey
+ _MessageDictionaryNicknameTransitionedListVersionKey
+ _MessageDictionaryNicknameUpdateInfoIncluded
+ _MessageDictionaryPendingNicknameUpdatesRecordIDsKey
+ _MessageDictionaryWallpaperUpdateKey
+ _OBJC_CLASS_$_IMDUpdateV3RecordStore
+ _OBJC_CLASS_$_IMSharedUtilitiesProtoCloudKitEncryptedMessageUpdateT3
+ _OBJC_METACLASS_$_IMDUpdateV3RecordStore
+ _kIMUpdateType3InfoChatIDKey
+ _kIMUpdateType3InfoMessageIDKey
+ _kIMUpdateType3InfoROWIDKey
+ _kIMUpdateTypeForType3
+ _objc_getAssociatedObject
+ _objc_setAssociatedObject
CStrings:
+ "\x13\x15"
+ " Hint message for last message was newer than the current last message: %@, current: %@"
+ "**** T3 Update item [%@] could not be converted to CKRecord, marking it as clean and moving on."
+ "**** T3 Update item [%@] could not find a chat as a source of truth, marking it as clean and moving on."
+ "**** failed to create CKRecord from IMTransfer guid %@, marking as failed to upload ***"
+ "**** failed to create IMFileTransfer from IMDAttachmentRecordRef rowid: %lld, marking as failed to upload ***"
+ "-UpT3"
+ "/\x0f"
+ "/*-------calling into _requestGroupPhotoResendForChatGUID from legacy service session, please file a radar-------*/"
+ "Account does not support device to device encryption, aborting sync"
+ "Account status check got error, %@, using cached value from Sync State %{bool}d"
+ "Account status update, and we stopped syncing due to bad account status."
+ "Archived Server Record has incorrect parent Chat ID, marking record as needing T3 update"
+ "Backfill"
+ "CHATID"
+ "Cannot generate CKRecord for message %@"
+ "Could not fetch IMMessageItem from IMDMessageRecord with item (%@) and type %lld"
+ "Couldn't find a chat for groupID: (%@)"
+ "Entered exit state on %s. Aborting sync, downloading all attachments!"
+ "FailCreateCKRecordForMessage"
+ "Failed to create CKRecord for message"
+ "Failed to find rowID for guid %@ to mark transfer as failed"
+ "Failed to generate CKRecord for Chat"
+ "Failed to generate CKRecord for IMFileTransfer"
+ "Failed to generate CKRecord for chat %@, error %@, marking ck_sync_state as %d"
+ "Failed to schedule attachment asset download with error %@"
+ "Failed to schedule initial sync with error %@"
+ "Fetched item from database for guid (%@): %p"
+ "Found %lu records to download {%@} afterRow %@"
+ "Found current nickname with photo or poster update, moving to archive for handle %@"
+ "Gathering stats for sysdiagnose"
+ "IMDUpdateV3RecordStore"
+ "Identity/TLK update, and we stopped sync due to missing TLKs."
+ "Ignoring update T1 message: message not found for id %@ (it may have been deleted)"
+ "Ignoring update T3 message: message not found for guid %@ (it may have been deleted)"
+ "MM/dd/YYYY hh:mm:ss a"
+ "Message %@ is orphaned (parentChatID is nil)"
+ "MiC State"
+ "No current nickname with a different photo or poster found, nothing to archive for handle %@. isPhotoOrWallpaperUpdate: %{BOOL}d Current nickname dict: %@."
+ "NullCKRecordForIMDChat"
+ "NullCKRecordForIMFileTransfer"
+ "Parent chat not found for parentChatID %@, service %@"
+ "Periodic"
+ "Received nil recordIDsByGUIDs from IMDPersistence returning nil for batchOfRecordIDsToDelete for DeletedChatStore."
+ "Resetting fetch state (afterRow to nil)"
+ "Resuming %@ sync, succeeded %@"
+ "Sending ignored list to peer devices, with current version: %lu"
+ "Server.TotalRecords.attachmentManateeZone"
+ "Server.TotalRecords.chatManateeZone"
+ "Server.TotalRecords.messageManateeZone"
+ "Server.TotalRecords.messageUpdateZone"
+ "Server.TotalRecords.recoverableMessageDeleteZone"
+ "T@\"NSNumber\",&,N"
+ "UT3"
+ "_blastDoorProcessingWithIMMessageItem:chat:account:fromToken:fromIDSID:fromIdentifier:toIdentifier:participants:groupName:groupID:isFromMe:isLastFromStorage:isFromStorage:hideLockScreenNotification:wantsCheckpointing:needsDeliveryReceipt:messageBalloonPayloadAttachmentDictionary:inlineAttachments:attributionInfoArray:nicknameDictionary:availabilityVerificationRecipientChannelIDPrefix:availabilityVerificationRecipientEncryptionValidationToken:idsService:messageContext:isFromTrustedSender:completionBlock:"
+ "_checkIfRecord:hasBadChatIDForMessageGUID:"
+ "_markPendingNicknameAsCurrent:incrementPendingNicknameVersion:updateType:broadcastUpdates:"
+ "_messagesPendingUpdateT3ToCloudKitWithLimit:attemptCount:"
+ "_requestGroupPhotoResendForChatGUID:fromIdentifier:toIdentifier:"
+ "_showAccountMismatchPrompt"
+ "_stringForDate:withFormatter:"
+ "_stringForObject:"
+ "_updateNicknameInHandledMap:updateType:broadcastUpdates:"
+ "account:chat:style:chatProperties:notifySentMessage:sendTime:isReplicating:"
+ "accountsMatch"
+ "afterRowForAssets"
+ "aliasesSummary"
+ "appendError:"
+ "att"
+ "chatid"
+ "ckRecordWithT3Info:"
+ "com.apple.messages.sync"
+ "compressedProtobufDataForUpdateT3:"
+ "createCKRecordForUpdateT3:zoneID:salt:"
+ "dbSummary"
+ "deviceID"
+ "different handles: (%@)"
+ "enabled"
+ "error formatting %@"
+ "errorIndicatesDeviceDoesNotHaveKeysToSync:"
+ "errorIndicatesDuplicateRecordWasFound:"
+ "errors"
+ "fetchCloudKitAccountStatusAndUpdateEligibilityAndNeedsRepairStatus()"
+ "fullEnd"
+ "fullFirstEnd"
+ "fullStart"
+ "initEnd"
+ "initStart"
+ "isAccountKeyCDPSyncingOrWaitingForUser"
+ "isExpectedChatIDForItem:chatID:"
+ "last"
+ "load messages needing CK update T3 with limit %ld, attemptCount %lu"
+ "loaded %lu messages needing CK sync with limit"
+ "loaded %lu messages needing T1 update with limit"
+ "loaded %lu messages needing T2 update with limit"
+ "loaded %lu messages needing T3 update with limit"
+ "logString"
+ "markProfileRecordsAsIgnored:broadcastUpdates:"
+ "messagesPendingUpdateT3ToCloudKitWithLimit:"
+ "micDeviceIdentifier"
+ "msg"
+ "nil"
+ "no errors"
+ "non-nil"
+ "outOfBackup"
+ "protobufForUpdateT3:"
+ "rdel"
+ "recordIDsByGUIDs is empty from IMDPersistence returning nil for batchOfRecordIDsToDelete for DeletedChatStore."
+ "resetFetchState"
+ "resumeSyncUsingKey:"
+ "scheduleAttachmentAssetDownload"
+ "scheduleAttachmentAssetDownloadWithDelegate:"
+ "serverCounts"
+ "setAfterRowForAssets:"
+ "setChatid:"
+ "setMiCDeviceIdentifier:"
+ "syncDates"
+ "syncDbSummary"
+ "total"
+ "upd"
+ "v200@0:8@\"IMMessageItem\"16@\"IMDChat\"24@\"IMDAccount\"32@\"NSData\"40@\"NSString\"48@\"NSString\"56@\"NSString\"64@\"NSArray\"72@\"NSString\"80@\"NSString\"88B96B100B104B108B112@\"NSNumber\"116@\"NSDictionary\"124@\"NSDictionary\"132@\"NSArray\"140@\"NSDictionary\"148@\"NSString\"156@\"NSString\"164@\"IDSService\"172@180B188@?<v@?>192"
+ "v200@0:8@16@24@32@40@48@56@64@72@80@88B96B100B104B108B112@116@124@132@140@148@156@164@172@180B188@?192"
+ "v20@?0B8@\"NSDictionary\"12"
+ "v24@0:8@\"NSError\"16"
+ "v28@0:8B16@?<v@?@\"NSError\">20"
+ "v36@0:8@16Q24B32"
+ "v40@0:8@16B24Q28B36"
+ "v64@0:8@\"NSString\"16@\"NSString\"24C32@\"NSDictionary\"36@\"IMMessageItem\"44@\"NSNumber\"52B60"
+ "v64@0:8@16@24C32@36@44@52B60"
+ "verifyAllPreReqsWithRequireEnablement:completionHandler:"
+ "wasDuplicateRecordFound:"
+ "wasMissingKeys:"
- "\x13\x14"
- " Hint message for last message was older than the current last message: %@, current: %@"
- "-[IMDChat copyCKRecordRepresentationWithZoneID:salt:] (guid=%@) returned nil during -[IMDChatStore(RecordStore) batchOfRecordsToWriteWithLimit:], error %@, marking ck_sync_state as %d"
- "-[IMDChat copyCKRecordRepresentationWithZoneID:salt:] returned nil during -[IMDChatStore(RecordStore) batchOfRecordsToWriteWithLimit:]"
- "/\x0f\x01"
- "Account status update, and we stopped sync due to missing TLKs. Launching one-off periodic sync."
- "Cannot find chatID when syncing up message %@"
- "Could not cast filtered array to CKRecord IDs array"
- "Failed to create sync coordinator with error %@"
- "Fetched item from database for guid (%@): %@"
- "Fetched token {key: %@, token: %@}"
- "For %ld to sync, filtered to %ld unique recordIDs"
- "Found %lu records to download {%@}"
- "Found current nickname, moving to archive for handle %@"
- "Identity/TLK update, and we stopped sync due to missing TLKs. Launching one-off periodic sync."
- "Ignoring update T1 message: could not find message for id %@ (maybe it hasn't synced or has been deleted?)"
- "MSGID"
- "No ChatID while syncing up message"
- "No current nickname found, nothing to archive for handle %@"
- "No pending chats to delete from CloudKit"
- "No pending recoverable messages to delete from CloudKit"
- "NoChatIDWhileSyncingUpMessage"
- "NullIMDChatCKRecord"
- "Persisting token {key: %@, token: %@}"
- "Received nil recordIDsByGUIDs from IMDPersistence returning nil for batchOfRecordsToWrite for DeletedChatStore."
- "SyncAfterAccountUpdate"
- "SyncAfterIdentityUpdate"
- "T@\"NSString\",C,N,V_encryptionType"
- "TID"
- "TPart"
- "_blastDoorProcessingWithIMMessageItem:chat:account:fromToken:fromIDSID:fromIdentifier:toIdentifier:participants:groupName:groupID:isEncrypted:isFromMe:isLastFromStorage:isFromStorage:hideLockScreenNotification:wantsCheckpointing:needsDeliveryReceipt:messageBalloonPayloadAttachmentDictionary:inlineAttachments:attributionInfoArray:nicknameDictionary:availabilityVerificationRecipientChannelIDPrefix:availabilityVerificationRecipientEncryptionValidationToken:idsService:messageContext:isFromTrustedSender:completionBlock:"
- "_encryptionType"
- "_markPendingNicknameAsCurrent:incrementPendingNicknameVersion:updateType:"
- "_updateNicknameInHandledMap:updateType:"
- "account:chat:style:chatProperties:notifySentMessage:sendTime:"
- "createUpdateT1Info:"
- "encryptionType"
- "encryptionTypeWithMessage:"
- "errorIndicateDeviceDoesNotHaveKeysToSync:"
- "errorIndicatesRecordWasAlreadySaved:"
- "loaded %lu messages needing CK sync with limit, messages %@"
- "micGroupPhotoEnabled"
- "none"
- "pair"
- "pair-ec"
- "recordIDsByGUIDs is empty from IMDPersistence returning nil for batchOfRecordsTowrite for DeletedChatStore."
- "setEncryptionType:"
- "setSyncStatusForGUIDs:toStatus:"
- "unknown"
- "v204@0:8@\"IMMessageItem\"16@\"IMDChat\"24@\"IMDAccount\"32@\"NSData\"40@\"NSString\"48@\"NSString\"56@\"NSString\"64@\"NSArray\"72@\"NSString\"80@\"NSString\"88B96B100B104B108B112B116@\"NSNumber\"120@\"NSDictionary\"128@\"NSDictionary\"136@\"NSArray\"144@\"NSDictionary\"152@\"NSString\"160@\"NSString\"168@\"IDSService\"176@184B192@?<v@?>196"
- "v204@0:8@16@24@32@40@48@56@64@72@80@88B96B100B104B108B112B116@120@128@136@144@152@160@168@176@184B192@?196"
- "v24@0:8@?<v@?@\"NSError\">16"
- "v36@0:8@16B24Q28"
- "v60@0:8@\"NSString\"16@\"NSString\"24C32@\"NSDictionary\"36@\"IMMessageItem\"44@\"NSNumber\"52"
- "v60@0:8@16@24C32@36@44@52"
- "verifyAllPreReqsWithCompletionHandler:"
- "wasRecordAlreadySaved:"

```
