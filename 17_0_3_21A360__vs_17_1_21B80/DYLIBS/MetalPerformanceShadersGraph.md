## MetalPerformanceShadersGraph

> `/System/Library/Frameworks/MetalPerformanceShadersGraph.framework/MetalPerformanceShadersGraph`

```diff

-4.0.23.0.0
-  __TEXT.__text: 0xe9508c
+4.1.1.0.0
+  __TEXT.__text: 0xe92d58
   __TEXT.__auth_stubs: 0x2420
   __TEXT.__objc_methlist: 0x5524
-  __TEXT.__const: 0x3ae89
+  __TEXT.__const: 0x3aec9
   __TEXT.__gcc_except_tab: 0x33244
-  __TEXT.__cstring: 0x103171
+  __TEXT.__cstring: 0xd71fb
   __TEXT.__mpsgraph_init_: 0x64
-  __TEXT.__unwind_info: 0x29bfc
-  __TEXT.__eh_frame: 0x1e60
+  __TEXT.__unwind_info: 0x29c68
+  __TEXT.__eh_frame: 0x1eb0
   __TEXT.__objc_classname: 0x18c9
   __TEXT.__objc_methname: 0x10aa9
   __TEXT.__objc_methtype: 0x41ea

   __DATA_CONST.__objc_selrefs: 0x2b30
   __DATA_CONST.__objc_arraydata: 0x800
   __AUTH_CONST.__objc_const: 0x4020
-  __AUTH_CONST.__const: 0x467f0
+  __AUTH_CONST.__const: 0x469a8
   __AUTH_CONST.__cfstring: 0x9f00
   __AUTH_CONST.__objc_intobj: 0x4c8
   __AUTH_CONST.__objc_arrayobj: 0xe40

   - /usr/lib/libc++.1.dylib
   - /usr/lib/libncurses.5.4.dylib
   - /usr/lib/libobjc.A.dylib
-  UUID: DA823363-FE62-35DA-AF0C-C24C4E961F8E
-  Functions: 57146
+  UUID: C661D8E6-D2C3-3D31-9DD9-05C6EFF6FC6A
+  Functions: 57157
   Symbols:   843
-  CStrings:  31063
+  CStrings:  31020
 
CStrings:
+ "4.1.1"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::AddSubConsts]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::CanonicalizeBatchNormInference]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::CanonicalizeBatchNorm]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::CanonicalizeInstanceNorm]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::CanonicalizePower]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::CanonicalizeReshapeChain<mlir::mps::ExpandDimsOp>]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::CanonicalizeReshapeChain<mlir::mps::ReshapeOp>]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::CanonicalizeReshapeChain<mlir::mps::SqueezeOp>]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::CanonicalizeSwish]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::DivByConstant]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::FuseBinaryWithConstants<mlir::mps::AddOp>]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::FuseBinaryWithConstants<mlir::mps::MultiplyOp>]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::ReorderDequantPermute]"
+ "StringRef llvm::getTypeName() [DesiredTypeName = mlir::mps::(anonymous namespace)::ReorderDequantTranspose]"
+ "failed: channelsMultiplier must be 1"
- "4.0.23"
- "CanTransposeAxisAttr"
- "ConstantWithF32Attr"
- "GetConstantWithOne"
- "GetElementTypeAsAttr"
- "GetMatchingConstantOne"
- "HasNoAxis"
- "InferCastReturnType"
- "IsBroadcastOnSameAxis"
- "IsEqualTo2"
- "IsEqualToFPMinusOne"
- "IsEqualToHalf"
- "IsEqualToMinusHalf"
- "IsF32"
- "IsGroup1"
- "IsHWIO"
- "IsNCHW"
- "IsNHWC"
- "IsOIHW"
- "IsShape1C11"
- "IsShapeC"
- "IsZeroConst"
- "PermuteAxisAttr"
- "ReshapeVectorTo_1x1x1xW"
- "ReshapeVectorTo_1xCx1x1"
- "ReshapeVectorTo_Nx1x1x1"
- "StringRef llvm::getTypeName() [DesiredTypeName = mlir::Value]"
- "TransposeAxisAttr"
- "failed: channelsMultiplier must be 1 for the gradient path"
- "pdl.pattern @AddSubConsts : benefit(0) {\n  %0 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":141:14)\n  %1 = operation \"mps.constant\"  -> (%0 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":141:14)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":142:14)\n  %3 = operation \"mps.constant\"  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":142:14)\n  %4 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":143:43)\n  %5 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":143:53)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":143:26)\n  %7 = operation \"mps.subtract\"(%4, %5 : !pdl.value, !pdl.value)  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":143:26)\n  %8 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":143:26)\n  %9 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":143:60)\n  %10 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":143:14)\n  %11 = operation \"mps.add\"(%8, %9 : !pdl.value, !pdl.value)  -> (%10 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":143:14)\n  rewrite %11 {\n    %12 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":145:53)\n    %13 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":145:59)\n    %14 = operation \"mps.subtract\"(%12, %13 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":145:36)\n    %15 = result 0 of %14 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":145:36)\n    %16 = operation \"mps.add\"(%4, %15 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":145:21)\n    replace %11 with %16 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":145:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":145:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":140:1)\n    "
- "pdl.pattern @BatchNormBiasInferenceNCHW_HWIO : benefit(0) {\n  %0 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":513:40)\n  %1 = operation \"mps.constant\"  -> (%0 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":513:17)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":514:14)\n  %3 = operation \"mps.constant\"  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":514:14)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":515:36)\n  %5 = operation \"mps.constant\"  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":515:13)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":516:15)\n  %7 = operation \"mps.constant\"  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":516:15)\n  %8 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":517:14)\n  %9 = operation \"mps.constant\"  -> (%8 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":517:14)\n  %10 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":518:30)\n  %11 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":518:40)\n  %12 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":518:59)\n  %13 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":519:60)\n  %14 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":520:67)\n  %15 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":521:69)\n  %16 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":522:66)\n  %17 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":523:64)\n  %18 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":524:67)\n  %19 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":524:92)\n  %20 = operation \"mps.conv_2d\"(%10, %11 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":518:14)\n  %21 = result 0 of %20 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":525:34)\n  %22 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":525:40)\n  %23 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":525:17)\n  %24 = operation \"mps.bias_add\"(%21, %22 : !pdl.value, !pdl.value)  -> (%23 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":525:17)\n  %25 = result 0 of %24 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":526:36)\n  %26 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":526:45)\n  %27 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":526:51)\n  %28 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":526:56)\n  %29 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":526:63)\n  %30 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":526:80)\n  %31 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":526:14)\n  %32 = operation \"mps.normalization\"(%25, %26, %27, %28, %29 : !pdl.value, !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"epsilon\" = %30} -> (%31 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":526:14)\n  apply_native_constraint \"IsNCHW\"(%17 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":528:3)\n  apply_native_constraint \"IsHWIO\"(%18 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":529:3)\n  apply_native_constraint \"IsGroup1\"(%12 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":530:3)\n  %33 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":531:15)\n  apply_native_constraint \"IsShape1C11\"(%33 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":531:3)\n  %34 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":532:15)\n  apply_native_constraint \"IsShape1C11\"(%34 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":532:3)\n  %35 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":533:15)\n  apply_native_constraint \"IsShape1C11\"(%35 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":533:3)\n  rewrite %32 {\n    %36 = apply_native_rewrite \"ConstantWithF32Attr\"(%30 : !pdl.attribute) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":536:20)\n    %37 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":537:81)\n    %38 = apply_native_rewrite \"GetElementTypeAsAttr\"(%37 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":537:60)\n    %39 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":537:121)\n    %40 = apply_native_rewrite \"InferCastReturnType\"(%36, %39 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":537:91)\n    %41 = operation \"mps.cast\"(%36 : !pdl.value)  {\"resultElementType\" = %38} -> (%40 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":537:16)\n    %42 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":538:51)\n    %43 = apply_native_rewrite \"ReshapeVectorTo_1x1x1xW\"(%42 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":538:27)\n    %44 = result 0 of %41 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":538:57)\n    %45 = operation \"mps.add\"(%43, %44 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":538:15)\n    %46 = results of %45  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":539:45)\n    %47 = operation \"mps.reverse_square_root\"(%46 : !pdl.range<value>)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":539:17)\n    %48 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":540:57)\n    %49 = apply_native_rewrite \"ReshapeVectorTo_1x1x1xW\"(%48 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":540:33)\n    %50 = result 0 of %47 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":540:65)\n    %51 = operation \"mps.multiply\"(%49, %50 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":540:16)\n    %52 = results of %51  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":541:30)\n    %53 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":541:78)\n    %54 = apply_native_rewrite \"GetElementTypeAsAttr\"(%53 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":541:57)\n    %55 = result 0 of %51 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":541:112)\n    %56 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":541:118)\n    %57 = apply_native_rewrite \"InferCastReturnType\"(%55, %56 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":541:92)\n    %58 = operation \"mps.cast\"(%52 : !pdl.range<value>)  {\"resultElementType\" = %54} -> (%57 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":541:17)\n    %59 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":542:34)\n    %60 = result 0 of %58 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":542:43)\n    %61 = operation \"mps.multiply\"(%59, %60 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":542:17)\n    %62 = result 0 of %61 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":543:38)\n    %63 = operation \"mps.conv_2d\"(%10, %62 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":543:19)\n    %64 = result 0 of %63 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:32)\n    %65 = result 0 of %51 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:82)\n    %66 = apply_native_rewrite \"ReshapeVectorTo_1xCx1x1\"(%65 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:58)\n    %67 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:106)\n    %68 = apply_native_rewrite \"ReshapeVectorTo_1xCx1x1\"(%22 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:112)\n    %69 = operation \"mps.subtract\"(%67, %68 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:89)\n    %70 = result 0 of %69 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:89)\n    %71 = operation \"mps.multiply\"(%66, %70 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:41)\n    %72 = result 0 of %71 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:41)\n    %73 = operation \"mps.subtract\"(%64, %72 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":550:15)\n    %74 = result 0 of %73 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":551:29)\n    %75 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":551:34)\n    %76 = operation \"mps.add\"(%74, %75 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":551:17)\n    replace %32 with %76 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":552:5)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":535:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":512:1)\n    "
- "pdl.pattern @BatchNormBiasInferenceNCHW_OIHW : benefit(0) {\n  %0 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":559:40)\n  %1 = operation \"mps.constant\"  -> (%0 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":559:17)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":560:14)\n  %3 = operation \"mps.constant\"  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":560:14)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":561:36)\n  %5 = operation \"mps.constant\"  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":561:13)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":562:15)\n  %7 = operation \"mps.constant\"  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":562:15)\n  %8 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":563:14)\n  %9 = operation \"mps.constant\"  -> (%8 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":563:14)\n  %10 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":564:30)\n  %11 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":564:40)\n  %12 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":564:59)\n  %13 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":565:60)\n  %14 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":566:67)\n  %15 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":567:69)\n  %16 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":568:66)\n  %17 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":569:64)\n  %18 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":570:67)\n  %19 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":570:92)\n  %20 = operation \"mps.conv_2d\"(%10, %11 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":564:14)\n  %21 = result 0 of %20 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":571:34)\n  %22 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":571:40)\n  %23 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":571:17)\n  %24 = operation \"mps.bias_add\"(%21, %22 : !pdl.value, !pdl.value)  -> (%23 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":571:17)\n  %25 = result 0 of %24 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":572:36)\n  %26 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":572:45)\n  %27 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":572:51)\n  %28 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":572:56)\n  %29 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":572:63)\n  %30 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":572:80)\n  %31 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":572:14)\n  %32 = operation \"mps.normalization\"(%25, %26, %27, %28, %29 : !pdl.value, !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"epsilon\" = %30} -> (%31 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":572:14)\n  apply_native_constraint \"IsNCHW\"(%17 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":574:3)\n  apply_native_constraint \"IsOIHW\"(%18 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":575:3)\n  apply_native_constraint \"IsGroup1\"(%12 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":576:3)\n  %33 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":577:15)\n  apply_native_constraint \"IsShape1C11\"(%33 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":577:3)\n  %34 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":578:15)\n  apply_native_constraint \"IsShape1C11\"(%34 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":578:3)\n  %35 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":579:15)\n  apply_native_constraint \"IsShape1C11\"(%35 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":579:3)\n  rewrite %32 {\n    %36 = apply_native_rewrite \"ConstantWithF32Attr\"(%30 : !pdl.attribute) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":582:20)\n    %37 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":583:81)\n    %38 = apply_native_rewrite \"GetElementTypeAsAttr\"(%37 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":583:60)\n    %39 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":583:121)\n    %40 = apply_native_rewrite \"InferCastReturnType\"(%36, %39 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":583:91)\n    %41 = operation \"mps.cast\"(%36 : !pdl.value)  {\"resultElementType\" = %38} -> (%40 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":583:16)\n    %42 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":584:51)\n    %43 = apply_native_rewrite \"ReshapeVectorTo_Nx1x1x1\"(%42 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":584:27)\n    %44 = result 0 of %41 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":584:57)\n    %45 = operation \"mps.add\"(%43, %44 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":584:15)\n    %46 = results of %45  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":585:45)\n    %47 = operation \"mps.reverse_square_root\"(%46 : !pdl.range<value>)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":585:17)\n    %48 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":586:57)\n    %49 = apply_native_rewrite \"ReshapeVectorTo_Nx1x1x1\"(%48 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":586:33)\n    %50 = result 0 of %47 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":586:65)\n    %51 = operation \"mps.multiply\"(%49, %50 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":586:16)\n    %52 = results of %51  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":587:30)\n    %53 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":587:78)\n    %54 = apply_native_rewrite \"GetElementTypeAsAttr\"(%53 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":587:57)\n    %55 = result 0 of %51 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":587:112)\n    %56 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":587:118)\n    %57 = apply_native_rewrite \"InferCastReturnType\"(%55, %56 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":587:92)\n    %58 = operation \"mps.cast\"(%52 : !pdl.range<value>)  {\"resultElementType\" = %54} -> (%57 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":587:17)\n    %59 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":588:34)\n    %60 = result 0 of %58 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":588:43)\n    %61 = operation \"mps.multiply\"(%59, %60 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":588:17)\n    %62 = result 0 of %61 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":589:38)\n    %63 = operation \"mps.conv_2d\"(%10, %62 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":589:19)\n    %64 = result 0 of %63 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:32)\n    %65 = result 0 of %51 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:82)\n    %66 = apply_native_rewrite \"ReshapeVectorTo_1xCx1x1\"(%65 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:58)\n    %67 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:106)\n    %68 = apply_native_rewrite \"ReshapeVectorTo_1xCx1x1\"(%22 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:112)\n    %69 = operation \"mps.subtract\"(%67, %68 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:89)\n    %70 = result 0 of %69 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:89)\n    %71 = operation \"mps.multiply\"(%66, %70 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:41)\n    %72 = result 0 of %71 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:41)\n    %73 = operation \"mps.subtract\"(%64, %72 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":596:15)\n    %74 = result 0 of %73 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":597:29)\n    %75 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":597:34)\n    %76 = operation \"mps.add\"(%74, %75 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":597:17)\n    replace %32 with %76 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":598:5)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":581:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":558:1)\n    "
- "pdl.pattern @BatchNormBiasInferenceNHWC_HWIO : benefit(0) {\n  %0 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":467:40)\n  %1 = operation \"mps.constant\"  -> (%0 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":467:17)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":468:14)\n  %3 = operation \"mps.constant\"  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":468:14)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":469:36)\n  %5 = operation \"mps.constant\"  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":469:13)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":470:15)\n  %7 = operation \"mps.constant\"  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":470:15)\n  %8 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":471:14)\n  %9 = operation \"mps.constant\"  -> (%8 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":471:14)\n  %10 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":472:30)\n  %11 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":472:40)\n  %12 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":472:59)\n  %13 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":473:60)\n  %14 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":474:67)\n  %15 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":475:69)\n  %16 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":476:66)\n  %17 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":477:64)\n  %18 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":478:67)\n  %19 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":478:92)\n  %20 = operation \"mps.conv_2d\"(%10, %11 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":472:14)\n  %21 = result 0 of %20 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":479:34)\n  %22 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":479:40)\n  %23 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":479:17)\n  %24 = operation \"mps.bias_add\"(%21, %22 : !pdl.value, !pdl.value)  -> (%23 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":479:17)\n  %25 = result 0 of %24 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":480:36)\n  %26 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":480:45)\n  %27 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":480:51)\n  %28 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":480:56)\n  %29 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":480:63)\n  %30 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":480:80)\n  %31 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":480:14)\n  %32 = operation \"mps.normalization\"(%25, %26, %27, %28, %29 : !pdl.value, !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"epsilon\" = %30} -> (%31 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":480:14)\n  apply_native_constraint \"IsNHWC\"(%17 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":482:3)\n  apply_native_constraint \"IsHWIO\"(%18 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":483:3)\n  apply_native_constraint \"IsGroup1\"(%12 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":484:3)\n  %33 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":485:12)\n  apply_native_constraint \"IsShapeC\"(%33 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":485:3)\n  %34 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":486:12)\n  apply_native_constraint \"IsShapeC\"(%34 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":486:3)\n  %35 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":487:12)\n  apply_native_constraint \"IsShapeC\"(%35 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":487:3)\n  rewrite %32 {\n    %36 = apply_native_rewrite \"ConstantWithF32Attr\"(%30 : !pdl.attribute) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":490:20)\n    %37 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":491:81)\n    %38 = apply_native_rewrite \"GetElementTypeAsAttr\"(%37 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":491:60)\n    %39 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":491:121)\n    %40 = apply_native_rewrite \"InferCastReturnType\"(%36, %39 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":491:91)\n    %41 = operation \"mps.cast\"(%36 : !pdl.value)  {\"resultElementType\" = %38} -> (%40 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":491:16)\n    %42 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":492:27)\n    %43 = result 0 of %41 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":492:32)\n    %44 = operation \"mps.add\"(%42, %43 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":492:15)\n    %45 = results of %44  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":493:45)\n    %46 = operation \"mps.reverse_square_root\"(%45 : !pdl.range<value>)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":493:17)\n    %47 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":494:33)\n    %48 = result 0 of %46 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":494:40)\n    %49 = operation \"mps.multiply\"(%47, %48 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":494:16)\n    %50 = results of %49  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":495:30)\n    %51 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":495:78)\n    %52 = apply_native_rewrite \"GetElementTypeAsAttr\"(%51 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":495:57)\n    %53 = result 0 of %49 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":495:112)\n    %54 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":495:118)\n    %55 = apply_native_rewrite \"InferCastReturnType\"(%53, %54 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":495:92)\n    %56 = operation \"mps.cast\"(%50 : !pdl.range<value>)  {\"resultElementType\" = %52} -> (%55 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":495:17)\n    %57 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":496:34)\n    %58 = result 0 of %56 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":496:43)\n    %59 = operation \"mps.multiply\"(%57, %58 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":496:17)\n    %60 = result 0 of %59 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":497:38)\n    %61 = operation \"mps.conv_2d\"(%10, %60 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":497:19)\n    %62 = result 0 of %61 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":504:32)\n    %63 = result 0 of %49 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":504:58)\n    %64 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":504:81)\n    %65 = operation \"mps.subtract\"(%64, %22 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":504:64)\n    %66 = result 0 of %65 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":504:64)\n    %67 = operation \"mps.multiply\"(%63, %66 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":504:41)\n    %68 = result 0 of %67 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":504:41)\n    %69 = operation \"mps.subtract\"(%62, %68 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":504:15)\n    %70 = result 0 of %69 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":505:29)\n    %71 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":505:34)\n    %72 = operation \"mps.add\"(%70, %71 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":505:17)\n    replace %32 with %72 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":506:5)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":489:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":466:1)\n    "
- "pdl.pattern @BatchNormInferenceNCHW_HWIO : benefit(0) {\n  %0 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":369:40)\n  %1 = operation \"mps.constant\"  -> (%0 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":369:17)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":370:14)\n  %3 = operation \"mps.constant\"  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":370:14)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":371:36)\n  %5 = operation \"mps.constant\"  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":371:13)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":372:15)\n  %7 = operation \"mps.constant\"  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":372:15)\n  %8 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":373:14)\n  %9 = operation \"mps.constant\"  -> (%8 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":373:14)\n  %10 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":374:30)\n  %11 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":374:40)\n  %12 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":374:59)\n  %13 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":375:60)\n  %14 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":376:67)\n  %15 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":377:69)\n  %16 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":378:66)\n  %17 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":379:64)\n  %18 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":380:67)\n  %19 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":380:92)\n  %20 = operation \"mps.conv_2d\"(%10, %11 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":374:14)\n  %21 = result 0 of %20 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":381:36)\n  %22 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":381:42)\n  %23 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":381:48)\n  %24 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":381:53)\n  %25 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":381:60)\n  %26 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":381:77)\n  %27 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":381:14)\n  %28 = operation \"mps.normalization\"(%21, %22, %23, %24, %25 : !pdl.value, !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"epsilon\" = %26} -> (%27 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":381:14)\n  apply_native_constraint \"IsNCHW\"(%17 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":383:3)\n  apply_native_constraint \"IsHWIO\"(%18 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":384:3)\n  apply_native_constraint \"IsGroup1\"(%12 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":385:3)\n  %29 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":386:15)\n  apply_native_constraint \"IsShape1C11\"(%29 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":386:3)\n  %30 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":387:15)\n  apply_native_constraint \"IsShape1C11\"(%30 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":387:3)\n  %31 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":388:15)\n  apply_native_constraint \"IsShape1C11\"(%31 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":388:3)\n  rewrite %28 {\n    %32 = apply_native_rewrite \"ConstantWithF32Attr\"(%26 : !pdl.attribute) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":391:20)\n    %33 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":392:81)\n    %34 = apply_native_rewrite \"GetElementTypeAsAttr\"(%33 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":392:60)\n    %35 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":392:121)\n    %36 = apply_native_rewrite \"InferCastReturnType\"(%32, %35 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":392:91)\n    %37 = operation \"mps.cast\"(%32 : !pdl.value)  {\"resultElementType\" = %34} -> (%36 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":392:16)\n    %38 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":393:51)\n    %39 = apply_native_rewrite \"ReshapeVectorTo_1x1x1xW\"(%38 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":393:27)\n    %40 = result 0 of %37 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":393:57)\n    %41 = operation \"mps.add\"(%39, %40 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":393:15)\n    %42 = results of %41  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":394:45)\n    %43 = operation \"mps.reverse_square_root\"(%42 : !pdl.range<value>)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":394:17)\n    %44 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":395:57)\n    %45 = apply_native_rewrite \"ReshapeVectorTo_1x1x1xW\"(%44 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":395:33)\n    %46 = result 0 of %43 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":395:65)\n    %47 = operation \"mps.multiply\"(%45, %46 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":395:16)\n    %48 = results of %47  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":396:30)\n    %49 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":396:78)\n    %50 = apply_native_rewrite \"GetElementTypeAsAttr\"(%49 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":396:57)\n    %51 = result 0 of %47 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":396:112)\n    %52 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":396:118)\n    %53 = apply_native_rewrite \"InferCastReturnType\"(%51, %52 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":396:92)\n    %54 = operation \"mps.cast\"(%48 : !pdl.range<value>)  {\"resultElementType\" = %50} -> (%53 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":396:17)\n    %55 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":397:34)\n    %56 = result 0 of %54 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":397:43)\n    %57 = operation \"mps.multiply\"(%55, %56 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":397:17)\n    %58 = result 0 of %57 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":398:38)\n    %59 = operation \"mps.conv_2d\"(%10, %58 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":398:19)\n    %60 = result 0 of %59 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":405:32)\n    %61 = result 0 of %47 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":405:82)\n    %62 = apply_native_rewrite \"ReshapeVectorTo_1xCx1x1\"(%61 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":405:58)\n    %63 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":405:89)\n    %64 = operation \"mps.multiply\"(%62, %63 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":405:41)\n    %65 = result 0 of %64 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":405:41)\n    %66 = operation \"mps.subtract\"(%60, %65 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":405:15)\n    %67 = result 0 of %66 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":406:29)\n    %68 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":406:34)\n    %69 = operation \"mps.add\"(%67, %68 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":406:17)\n    replace %28 with %69 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":407:5)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":390:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":368:1)\n    "
- "pdl.pattern @BatchNormInferenceNCHW_OIHW : benefit(0) {\n  %0 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":422:40)\n  %1 = operation \"mps.constant\"  -> (%0 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":422:17)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":423:14)\n  %3 = operation \"mps.constant\"  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":423:14)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":424:36)\n  %5 = operation \"mps.constant\"  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":424:13)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":425:15)\n  %7 = operation \"mps.constant\"  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":425:15)\n  %8 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":426:14)\n  %9 = operation \"mps.constant\"  -> (%8 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":426:14)\n  %10 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":427:30)\n  %11 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":427:40)\n  %12 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":427:59)\n  %13 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":428:60)\n  %14 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":429:67)\n  %15 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":430:69)\n  %16 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":431:66)\n  %17 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":432:64)\n  %18 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":433:67)\n  %19 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":433:92)\n  %20 = operation \"mps.conv_2d\"(%10, %11 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":427:14)\n  %21 = result 0 of %20 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":434:36)\n  %22 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":434:42)\n  %23 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":434:48)\n  %24 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":434:53)\n  %25 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":434:60)\n  %26 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":434:77)\n  %27 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":434:14)\n  %28 = operation \"mps.normalization\"(%21, %22, %23, %24, %25 : !pdl.value, !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"epsilon\" = %26} -> (%27 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":434:14)\n  apply_native_constraint \"IsNCHW\"(%17 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":436:3)\n  apply_native_constraint \"IsOIHW\"(%18 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":437:3)\n  apply_native_constraint \"IsGroup1\"(%12 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":438:3)\n  %29 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":439:15)\n  apply_native_constraint \"IsShape1C11\"(%29 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":439:3)\n  %30 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":440:15)\n  apply_native_constraint \"IsShape1C11\"(%30 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":440:3)\n  %31 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":441:15)\n  apply_native_constraint \"IsShape1C11\"(%31 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":441:3)\n  rewrite %28 {\n    %32 = apply_native_rewrite \"ConstantWithF32Attr\"(%26 : !pdl.attribute) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":444:20)\n    %33 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":445:81)\n    %34 = apply_native_rewrite \"GetElementTypeAsAttr\"(%33 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":445:60)\n    %35 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":445:121)\n    %36 = apply_native_rewrite \"InferCastReturnType\"(%32, %35 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":445:91)\n    %37 = operation \"mps.cast\"(%32 : !pdl.value)  {\"resultElementType\" = %34} -> (%36 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":445:16)\n    %38 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":446:51)\n    %39 = apply_native_rewrite \"ReshapeVectorTo_Nx1x1x1\"(%38 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":446:27)\n    %40 = result 0 of %37 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":446:57)\n    %41 = operation \"mps.add\"(%39, %40 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":446:15)\n    %42 = results of %41  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":447:45)\n    %43 = operation \"mps.reverse_square_root\"(%42 : !pdl.range<value>)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":447:17)\n    %44 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":448:57)\n    %45 = apply_native_rewrite \"ReshapeVectorTo_Nx1x1x1\"(%44 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":448:33)\n    %46 = result 0 of %43 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":448:65)\n    %47 = operation \"mps.multiply\"(%45, %46 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":448:16)\n    %48 = results of %47  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":449:30)\n    %49 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":449:78)\n    %50 = apply_native_rewrite \"GetElementTypeAsAttr\"(%49 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":449:57)\n    %51 = result 0 of %47 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":449:112)\n    %52 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":449:118)\n    %53 = apply_native_rewrite \"InferCastReturnType\"(%51, %52 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":449:92)\n    %54 = operation \"mps.cast\"(%48 : !pdl.range<value>)  {\"resultElementType\" = %50} -> (%53 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":449:17)\n    %55 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":450:34)\n    %56 = result 0 of %54 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":450:43)\n    %57 = operation \"mps.multiply\"(%55, %56 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":450:17)\n    %58 = result 0 of %57 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":451:38)\n    %59 = operation \"mps.conv_2d\"(%10, %58 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":451:19)\n    %60 = result 0 of %59 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":458:32)\n    %61 = result 0 of %47 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":458:82)\n    %62 = apply_native_rewrite \"ReshapeVectorTo_1xCx1x1\"(%61 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":458:58)\n    %63 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":458:89)\n    %64 = operation \"mps.multiply\"(%62, %63 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":458:41)\n    %65 = result 0 of %64 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":458:41)\n    %66 = operation \"mps.subtract\"(%60, %65 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":458:15)\n    %67 = result 0 of %66 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":459:29)\n    %68 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":459:34)\n    %69 = operation \"mps.add\"(%67, %68 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":459:17)\n    replace %28 with %69 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":460:5)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":443:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":421:1)\n    "
- "pdl.pattern @BatchNormInferenceNHWC_HWIO : benefit(0) {\n  %0 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":308:40)\n  %1 = operation \"mps.constant\"  -> (%0 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":308:17)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":309:14)\n  %3 = operation \"mps.constant\"  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":309:14)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":310:36)\n  %5 = operation \"mps.constant\"  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":310:13)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":311:15)\n  %7 = operation \"mps.constant\"  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":311:15)\n  %8 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":312:14)\n  %9 = operation \"mps.constant\"  -> (%8 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":312:14)\n  %10 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":313:30)\n  %11 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":313:40)\n  %12 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":313:59)\n  %13 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":314:60)\n  %14 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":315:67)\n  %15 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":316:69)\n  %16 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":317:66)\n  %17 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":318:64)\n  %18 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":319:67)\n  %19 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":319:92)\n  %20 = operation \"mps.conv_2d\"(%10, %11 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":313:14)\n  %21 = result 0 of %20 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":320:36)\n  %22 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":320:42)\n  %23 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":320:48)\n  %24 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":320:53)\n  %25 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":320:60)\n  %26 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":320:77)\n  %27 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":320:14)\n  %28 = operation \"mps.normalization\"(%21, %22, %23, %24, %25 : !pdl.value, !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"epsilon\" = %26} -> (%27 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":320:14)\n  apply_native_constraint \"IsNHWC\"(%17 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":322:3)\n  apply_native_constraint \"IsHWIO\"(%18 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":323:3)\n  apply_native_constraint \"IsGroup1\"(%12 : !pdl.attribute) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":324:3)\n  %29 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":325:12)\n  apply_native_constraint \"IsShapeC\"(%29 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":325:3)\n  %30 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":326:12)\n  apply_native_constraint \"IsShapeC\"(%30 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":326:3)\n  %31 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":327:12)\n  apply_native_constraint \"IsShapeC\"(%31 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":327:3)\n  rewrite %28 {\n    %32 = apply_native_rewrite \"ConstantWithF32Attr\"(%26 : !pdl.attribute) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":330:20)\n    %33 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":331:81)\n    %34 = apply_native_rewrite \"GetElementTypeAsAttr\"(%33 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":331:60)\n    %35 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":331:121)\n    %36 = apply_native_rewrite \"InferCastReturnType\"(%32, %35 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":331:91)\n    %37 = operation \"mps.cast\"(%32 : !pdl.value)  {\"resultElementType\" = %34} -> (%36 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":331:16)\n    %38 = result 0 of %5 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":332:27)\n    %39 = result 0 of %37 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":332:32)\n    %40 = operation \"mps.add\"(%38, %39 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":332:15)\n    %41 = results of %40  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":333:45)\n    %42 = operation \"mps.reverse_square_root\"(%41 : !pdl.range<value>)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":333:17)\n    %43 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":334:33)\n    %44 = result 0 of %42 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":334:40)\n    %45 = operation \"mps.multiply\"(%43, %44 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":334:16)\n    %46 = results of %45  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":335:30)\n    %47 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":335:78)\n    %48 = apply_native_rewrite \"GetElementTypeAsAttr\"(%47 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":335:57)\n    %49 = result 0 of %45 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":335:112)\n    %50 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":335:118)\n    %51 = apply_native_rewrite \"InferCastReturnType\"(%49, %50 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":335:92)\n    %52 = operation \"mps.cast\"(%46 : !pdl.range<value>)  {\"resultElementType\" = %48} -> (%51 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":335:17)\n    %53 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":336:34)\n    %54 = result 0 of %52 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":336:43)\n    %55 = operation \"mps.multiply\"(%53, %54 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":336:17)\n    %56 = result 0 of %55 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":337:38)\n    %57 = operation \"mps.conv_2d\"(%10, %56 : !pdl.value, !pdl.value)  {\"groups\" = %12, \"strides\" = %13, \"dilation_rates\" = %14, \"explicit_padding\" = %15, \"padding_style\" = %16, \"data_layout\" = %17, \"weights_layout\" = %18} -> (%19 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":337:19)\n    %58 = result 0 of %57 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":344:32)\n    %59 = result 0 of %45 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":344:58)\n    %60 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":344:64)\n    %61 = operation \"mps.multiply\"(%59, %60 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":344:41)\n    %62 = result 0 of %61 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":344:41)\n    %63 = operation \"mps.subtract\"(%58, %62 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":344:15)\n    %64 = result 0 of %63 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":345:29)\n    %65 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":345:34)\n    %66 = operation \"mps.add\"(%64, %65 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":345:17)\n    replace %28 with %66 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":346:5)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":329:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":307:1)\n    "
- "pdl.pattern @CanonicalizeInstanceNorm : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":150:7)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":151:7)\n  %2 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":152:7)\n  %3 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":153:19)\n  %4 = operation \"mps.reduction_mean\"(%0, %1 : !pdl.value, !pdl.value)  {\"keep_dims\" = %2} -> (%3 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":153:19)\n  %5 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":154:18)\n  %6 = operation \"mps.reduction_variance\"(%0, %1 : !pdl.value, !pdl.value)  {\"keep_dims\" = %2} -> (%5 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":154:18)\n  %7 = result 0 of %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":155:43)\n  %8 = result 0 of %6 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":155:54)\n  %9 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":155:64)\n  %10 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":155:78)\n  %11 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":155:102)\n  %12 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":155:117)\n  %13 = operation \"mps.normalization\"(%0, %7, %8, %9, %10 : !pdl.value, !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"epsilon\" = %11} -> (%12 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":155:14)\n  rewrite %13 {\n    %14 = operation \"mps.instance_norm\"(%0, %1 : !pdl.value, !pdl.value)  {\"epsilon\" = %11} -> (%12 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":158:24)\n    %15 = result 0 of %14 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":159:33)\n    %16 = operation \"mps.multiply\"(%15, %9 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":159:16)\n    %17 = result 0 of %16 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":160:27)\n    %18 = operation \"mps.add\"(%17, %10 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":160:15)\n    replace %13 with %18 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":161:5)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":157:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":149:1)\n    "
- "pdl.pattern @CanonicalizeSwish : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:56)\n  %1 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:70)\n  %2 = operation \"mps.sigmoid\"(%0 : !pdl.value)  -> (%1 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:70)\n  %3 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:70)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:39)\n  %5 = operation \"mps.multiply\"(%0, %3 : !pdl.value, !pdl.value)  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:39)\n  rewrite %5 {\n    %6 = operation \"mps.swish\"(%0 : !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:99)\n    replace %5 with %6 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:31)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:31)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":276:1)\n    "
- "pdl.pattern @CanonicalizeSwish2 : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:72)\n  %1 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:56)\n  %2 = operation \"mps.sigmoid\"(%0 : !pdl.value)  -> (%1 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:56)\n  %3 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:56)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:39)\n  %5 = operation \"mps.multiply\"(%3, %0 : !pdl.value, !pdl.value)  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:39)\n  rewrite %5 {\n    %6 = operation \"mps.swish\"(%0 : !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:99)\n    replace %5 with %6 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:31)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:31)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":277:1)\n    "
- "pdl.pattern @DivByConstant : benefit(0) {\n  %0 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":128:13)\n  %1 = operation \"mps.constant\"  -> (%0 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":128:13)\n  %2 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":129:29)\n  %3 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":129:43)\n  %4 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":129:52)\n  %5 = operation \"mps.divide\"(%2, %3 : !pdl.value, !pdl.value)  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":129:14)\n  apply_native_constraint \"IsF32\"(%2 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":131:3)\n  %6 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":132:9)\n  apply_native_constraint \"IsF32\"(%6 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":132:3)\n  rewrite %5 {\n    %7 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":134:83)\n    %8 = apply_native_rewrite \"GetMatchingConstantOne\"(%7 : !pdl.value) : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":134:60)\n    %9 = result 0 of %1 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":134:89)\n    %10 = operation \"mps.divide\"(%8, %9 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":134:45)\n    %11 = result 0 of %10 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":134:45)\n    %12 = operation \"mps.multiply\"(%2, %11 : !pdl.value, !pdl.value)  -> (%4 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":134:21)\n    replace %5 with %12 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":134:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":134:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":127:1)\n    "
- "pdl.pattern @ExpandDimsToReshape : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":179:33)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":179:47)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":179:13)\n  %3 = operation \"mps.expand_dims\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":179:13)\n  %4 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":180:30)\n  %5 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":180:35)\n  %6 = attribute = unit loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":180:50)\n  %7 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":180:14)\n  %8 = operation \"mps.reshape\"(%4, %5 : !pdl.value, !pdl.value)  {\"zeroIsCopy\" = %6} -> (%7 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":180:14)\n  rewrite %8 {\n    %9 = attribute = unit loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":182:52)\n    %10 = operation \"mps.reshape\"(%0, %5 : !pdl.value, !pdl.value)  {\"zeroIsCopy\" = %9} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":182:21)\n    replace %8 with %10 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":182:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":182:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":178:1)\n    "
- "pdl.pattern @ExpandDimsToReshapeNoAttr : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":185:33)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":185:47)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":185:13)\n  %3 = operation \"mps.expand_dims\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":185:13)\n  %4 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":186:30)\n  %5 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":186:35)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":186:14)\n  %7 = operation \"mps.reshape\"(%4, %5 : !pdl.value, !pdl.value)  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":186:14)\n  rewrite %7 {\n    %8 = operation \"mps.reshape\"(%0, %5 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":188:21)\n    replace %7 with %8 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":188:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":188:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":184:1)\n    "
- "pdl.pattern @FuseAddConstants : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":35:7)\n  %1 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":36:14)\n  %2 = operation \"mps.constant\"  -> (%1 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":36:14)\n  %3 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":37:14)\n  %4 = operation \"mps.constant\"  -> (%3 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":37:14)\n  %5 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":38:44)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":38:26)\n  %7 = operation \"mps.add\"(%0, %5 : !pdl.value, !pdl.value)  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":38:26)\n  %8 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":38:26)\n  %9 = result 0 of %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":38:51)\n  %10 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":38:14)\n  %11 = operation \"mps.add\"(%8, %9 : !pdl.value, !pdl.value)  -> (%10 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":38:14)\n  %12 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":40:25)\n  %13 = result 0 of %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":40:31)\n  apply_native_constraint \"IsBroadcastOnSameAxis\"(%12, %13 : !pdl.value, !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":40:3)\n  rewrite %11 {\n    %14 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":42:51)\n    %15 = result 0 of %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":42:57)\n    %16 = operation \"mps.add\"(%14, %15 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":42:39)\n    %17 = result 0 of %16 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":42:39)\n    %18 = operation \"mps.add\"(%0, %17 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":42:21)\n    replace %11 with %18 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":42:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":42:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":34:1)\n    "
- "pdl.pattern @FuseMulConstants : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":24:7)\n  %1 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":25:14)\n  %2 = operation \"mps.constant\"  -> (%1 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":25:14)\n  %3 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":26:14)\n  %4 = operation \"mps.constant\"  -> (%3 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":26:14)\n  %5 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":27:54)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":27:31)\n  %7 = operation \"mps.multiply\"(%0, %5 : !pdl.value, !pdl.value)  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":27:31)\n  %8 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":27:31)\n  %9 = result 0 of %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":27:61)\n  %10 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":27:14)\n  %11 = operation \"mps.multiply\"(%8, %9 : !pdl.value, !pdl.value)  -> (%10 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":27:14)\n  %12 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":29:25)\n  %13 = result 0 of %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":29:31)\n  apply_native_constraint \"IsBroadcastOnSameAxis\"(%12, %13 : !pdl.value, !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":29:3)\n  rewrite %11 {\n    %14 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":31:61)\n    %15 = result 0 of %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":31:67)\n    %16 = operation \"mps.multiply\"(%14, %15 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":31:44)\n    %17 = result 0 of %16 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":31:44)\n    %18 = operation \"mps.multiply\"(%0, %17 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":31:21)\n    replace %11 with %18 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":31:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":31:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":23:1)\n    "
- "pdl.pattern @PowerToRSqrt : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":238:28)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":238:42)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":238:14)\n  %3 = operation \"mps.power\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":238:14)\n  apply_native_constraint \"IsEqualToMinusHalf\"(%1 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":239:3)\n  rewrite %3 {\n    %4 = operation \"mps.reverse_square_root\"(%0 : !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":240:21)\n    replace %3 with %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":240:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":240:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":237:1)\n    "
- "pdl.pattern @PowerToReciprocalFP : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":247:28)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":247:42)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":247:14)\n  %3 = operation \"mps.power\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":247:14)\n  apply_native_constraint \"IsEqualToFPMinusOne\"(%1 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":248:3)\n  rewrite %3 {\n    %4 = operation \"mps.reciprocal\"(%0 : !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":249:21)\n    replace %3 with %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":249:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":249:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":246:1)\n    "
- "pdl.pattern @PowerToSqrt : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":229:28)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":229:42)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":229:14)\n  %3 = operation \"mps.power\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":229:14)\n  apply_native_constraint \"IsEqualToHalf\"(%1 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":230:3)\n  rewrite %3 {\n    %4 = operation \"mps.square_root\"(%0 : !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":231:21)\n    replace %3 with %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":231:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":231:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":228:1)\n    "
- "pdl.pattern @PowerToSquare : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":220:28)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":220:42)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":220:14)\n  %3 = operation \"mps.power\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":220:14)\n  apply_native_constraint \"IsEqualTo2\"(%1 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":221:3)\n  rewrite %3 {\n    %4 = operation \"mps.square\"(%0 : !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":222:21)\n    replace %3 with %4 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":222:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":222:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":219:1)\n    "
- "pdl.pattern @PowerToZero : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":265:28)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":265:42)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":265:63)\n  %3 = operation \"mps.power\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":265:14)\n  apply_native_constraint \"IsZeroConst\"(%1 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":266:3)\n  rewrite %3 {\n    %4 = apply_native_rewrite \"GetConstantWithOne\" : !pdl.value loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":269:15)\n    %5 = apply_native_rewrite \"GetElementTypeAsAttr\"(%0 : !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":270:55)\n    %6 = apply_native_rewrite \"InferCastReturnType\"(%4, %0 : !pdl.value, !pdl.value) : !pdl.type loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":270:88)\n    %7 = operation \"mps.cast\"(%4 : !pdl.value)  {\"resultElementType\" = %5} -> (%6 : !pdl.type) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":270:16)\n    %8 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":271:42)\n    %9 = operation \"mps.shape\"(%0 : !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":271:48)\n    %10 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":271:48)\n    %11 = operation \"mps.broadcast_to\"(%8, %10 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":271:21)\n    replace %3 with %11 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":272:5)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":268:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":264:1)\n    "
- "pdl.pattern @ReorderDequantPermute : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":63:31)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":63:41)\n  %2 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":63:51)\n  %3 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":63:61)\n  %4 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":63:82)\n  %5 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":63:98)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":63:12)\n  %7 = operation \"mps.dequantize\"(%0, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"dtype\" = %4, \"axis\" = %5} -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":63:12)\n  %8 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":64:13)\n  %9 = operation \"mps.constant\"  -> (%8 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":64:13)\n  %10 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":65:30)\n  %11 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":65:34)\n  %12 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":65:43)\n  %13 = operation \"mps.permute\"(%10, %11 : !pdl.value, !pdl.value)  -> (%12 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":65:14)\n  rewrite %13 {\n    %14 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":67:59)\n    %15 = operation \"mps.permute\"(%0, %14 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":67:40)\n    %16 = result 0 of %15 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":67:40)\n    %17 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":67:118)\n    %18 = apply_native_rewrite \"PermuteAxisAttr\"(%5, %17 : !pdl.attribute, !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":67:95)\n    %19 = operation \"mps.dequantize\"(%16, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"dtype\" = %4, \"axis\" = %18} -> (%12 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":67:21)\n    replace %13 with %19 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":67:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":67:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":62:1)\n    "
- "pdl.pattern @ReorderDequantPermuteNoAxis : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":71:31)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":71:41)\n  %2 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":71:51)\n  %3 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":71:61)\n  %4 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":71:82)\n  %5 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":71:12)\n  %6 = operation \"mps.dequantize\"(%0, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"dtype\" = %4} -> (%5 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":71:12)\n  %7 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":72:13)\n  %8 = operation \"mps.constant\"  -> (%7 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":72:13)\n  %9 = result 0 of %6 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":73:30)\n  %10 = result 0 of %8 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":73:34)\n  %11 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":73:43)\n  %12 = operation \"mps.permute\"(%9, %10 : !pdl.value, !pdl.value)  -> (%11 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":73:14)\n  %13 = result 0 of %6 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":75:13)\n  apply_native_constraint \"HasNoAxis\"(%13 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":75:3)\n  rewrite %12 {\n    %14 = result 0 of %8 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":77:59)\n    %15 = operation \"mps.permute\"(%0, %14 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":77:40)\n    %16 = result 0 of %15 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":77:40)\n    %17 = operation \"mps.dequantize\"(%16, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"dtype\" = %4} -> (%11 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":77:21)\n    replace %12 with %17 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":77:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":77:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":70:1)\n    "
- "pdl.pattern @ReorderDequantTranspose : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":94:31)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":94:41)\n  %2 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":94:51)\n  %3 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":94:61)\n  %4 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":94:82)\n  %5 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":94:98)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":94:12)\n  %7 = operation \"mps.dequantize\"(%0, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"dtype\" = %4, \"axis\" = %5} -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":94:12)\n  %8 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":95:14)\n  %9 = operation \"mps.constant\"  -> (%8 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":95:14)\n  %10 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":96:14)\n  %11 = operation \"mps.constant\"  -> (%10 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":96:14)\n  %12 = result 0 of %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":97:32)\n  %13 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":97:36)\n  %14 = result 0 of %11 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":97:42)\n  %15 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":97:52)\n  %16 = operation \"mps.transpose\"(%12, %13, %14 : !pdl.value, !pdl.value, !pdl.value)  -> (%15 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":97:14)\n  %17 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":99:34)\n  %18 = result 0 of %11 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":99:40)\n  apply_native_constraint \"CanTransposeAxisAttr\"(%0, %5, %17, %18 : !pdl.value, !pdl.attribute, !pdl.value, !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":99:3)\n  rewrite %16 {\n    %19 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:61)\n    %20 = result 0 of %11 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:67)\n    %21 = operation \"mps.transpose\"(%0, %19, %20 : !pdl.value, !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:40)\n    %22 = result 0 of %21 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:40)\n    %23 = result 0 of %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:132)\n    %24 = result 0 of %11 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:138)\n    %25 = apply_native_rewrite \"TransposeAxisAttr\"(%0, %5, %23, %24 : !pdl.value, !pdl.attribute, !pdl.value, !pdl.value) : !pdl.attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:104)\n    %26 = operation \"mps.dequantize\"(%22, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"dtype\" = %4, \"axis\" = %25} -> (%15 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:21)\n    replace %16 with %26 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":101:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":93:1)\n    "
- "pdl.pattern @ReorderDequantTransposeNoAxis : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":105:31)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":105:41)\n  %2 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":105:51)\n  %3 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":105:61)\n  %4 = attribute loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":105:82)\n  %5 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":105:12)\n  %6 = operation \"mps.dequantize\"(%0, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"dtype\" = %4} -> (%5 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":105:12)\n  %7 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":106:14)\n  %8 = operation \"mps.constant\"  -> (%7 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":106:14)\n  %9 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":107:14)\n  %10 = operation \"mps.constant\"  -> (%9 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":107:14)\n  %11 = result 0 of %6 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":108:32)\n  %12 = result 0 of %8 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":108:36)\n  %13 = result 0 of %10 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":108:42)\n  %14 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":108:52)\n  %15 = operation \"mps.transpose\"(%11, %12, %13 : !pdl.value, !pdl.value, !pdl.value)  -> (%14 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":108:14)\n  %16 = result 0 of %6 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":110:13)\n  apply_native_constraint \"HasNoAxis\"(%16 : !pdl.value) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":110:3)\n  rewrite %15 {\n    %17 = result 0 of %8 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":112:61)\n    %18 = result 0 of %10 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":112:67)\n    %19 = operation \"mps.transpose\"(%0, %17, %18 : !pdl.value, !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":112:40)\n    %20 = result 0 of %19 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":112:40)\n    %21 = operation \"mps.dequantize\"(%20, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.value)  {\"dtype\" = %4} -> (%14 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":112:21)\n    replace %15 with %21 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":112:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":112:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":104:1)\n    "
- "pdl.pattern @ReshapeToReshape : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":166:33)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":166:47)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":166:17)\n  %3 = operation \"mps.reshape\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":166:17)\n  %4 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":167:30)\n  %5 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":167:39)\n  %6 = attribute = unit loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":167:54)\n  %7 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":167:14)\n  %8 = operation \"mps.reshape\"(%4, %5 : !pdl.value, !pdl.value)  {\"zeroIsCopy\" = %6} -> (%7 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":167:14)\n  rewrite %8 {\n    %9 = attribute = unit loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":169:52)\n    %10 = operation \"mps.reshape\"(%0, %5 : !pdl.value, !pdl.value)  {\"zeroIsCopy\" = %9} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":169:21)\n    replace %8 with %10 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":169:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":169:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":165:1)\n    "
- "pdl.pattern @ReshapeToReshapeNoAttr : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":172:33)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":172:47)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":172:17)\n  %3 = operation \"mps.reshape\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":172:17)\n  %4 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":173:30)\n  %5 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":173:39)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":173:14)\n  %7 = operation \"mps.reshape\"(%4, %5 : !pdl.value, !pdl.value)  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":173:14)\n  rewrite %7 {\n    %8 = operation \"mps.reshape\"(%0, %5 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":175:21)\n    replace %7 with %8 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":175:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":175:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":171:1)\n    "
- "pdl.pattern @SqueezeToReshape : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":192:29)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":192:43)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":192:13)\n  %3 = operation \"mps.squeeze\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":192:13)\n  %4 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":193:30)\n  %5 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":193:35)\n  %6 = attribute = unit loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":193:50)\n  %7 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":193:14)\n  %8 = operation \"mps.reshape\"(%4, %5 : !pdl.value, !pdl.value)  {\"zeroIsCopy\" = %6} -> (%7 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":193:14)\n  rewrite %8 {\n    %9 = attribute = unit loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":195:52)\n    %10 = operation \"mps.reshape\"(%0, %5 : !pdl.value, !pdl.value)  {\"zeroIsCopy\" = %9} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":195:21)\n    replace %8 with %10 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":195:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":195:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":191:1)\n    "
- "pdl.pattern @SqueezeToReshapeNoAttr : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":198:29)\n  %1 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":198:43)\n  %2 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":198:13)\n  %3 = operation \"mps.squeeze\"(%0, %1 : !pdl.value, !pdl.value)  -> (%2 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":198:13)\n  %4 = result 0 of %3 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":199:30)\n  %5 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":199:35)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":199:14)\n  %7 = operation \"mps.reshape\"(%4, %5 : !pdl.value, !pdl.value)  -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":199:14)\n  rewrite %7 {\n    %8 = operation \"mps.reshape\"(%0, %5 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":201:21)\n    replace %7 with %8 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":201:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":201:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":197:1)\n    "
- "pdl.pattern @SqueezeToReshapeNoAxes : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":204:29)\n  %1 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":204:13)\n  %2 = operation \"mps.squeeze\"(%0 : !pdl.value)  -> (%1 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":204:13)\n  %3 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":205:30)\n  %4 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":205:35)\n  %5 = attribute = unit loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":205:50)\n  %6 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":205:14)\n  %7 = operation \"mps.reshape\"(%3, %4 : !pdl.value, !pdl.value)  {\"zeroIsCopy\" = %5} -> (%6 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":205:14)\n  rewrite %7 {\n    %8 = attribute = unit loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":207:52)\n    %9 = operation \"mps.reshape\"(%0, %4 : !pdl.value, !pdl.value)  {\"zeroIsCopy\" = %8} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":207:21)\n    replace %7 with %9 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":207:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":207:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":203:1)\n    "
- "pdl.pattern @SqueezeToReshapeNoAxesNoAttr : benefit(0) {\n  %0 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":210:29)\n  %1 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":210:13)\n  %2 = operation \"mps.squeeze\"(%0 : !pdl.value)  -> (%1 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":210:13)\n  %3 = result 0 of %2 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":211:30)\n  %4 = operand loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":211:35)\n  %5 = types loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":211:14)\n  %6 = operation \"mps.reshape\"(%3, %4 : !pdl.value, !pdl.value)  -> (%5 : !pdl.range<type>) loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":211:14)\n  rewrite %6 {\n    %7 = operation \"mps.reshape\"(%0, %4 : !pdl.value, !pdl.value)  loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":213:21)\n    replace %6 with %7 loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":213:3)\n  } loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":213:3)\n} loc(\"/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mlir-mps/src/Dialect/MPS/Transforms/CommonRuntimeCanonicalizationPDLLPatterns.pdll\":209:1)\n    "

```
