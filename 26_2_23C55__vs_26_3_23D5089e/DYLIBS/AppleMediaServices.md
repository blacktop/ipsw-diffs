## AppleMediaServices

> `/System/Library/PrivateFrameworks/AppleMediaServices.framework/AppleMediaServices`

```diff

-9.2.23.2.2
-  __TEXT.__text: 0x772d58
-  __TEXT.__auth_stubs: 0x4b30
-  __TEXT.__objc_methlist: 0x23094
-  __TEXT.__const: 0x5d6f0
+9.3.1.0.0
+  __TEXT.__text: 0x776dfc
+  __TEXT.__auth_stubs: 0x4b40
+  __TEXT.__objc_methlist: 0x230cc
+  __TEXT.__const: 0x5da80
   __TEXT.__dlopen_cstrs: 0x98b
-  __TEXT.__cstring: 0x2e2d9
-  __TEXT.__swift5_typeref: 0x6a37
-  __TEXT.__swift5_reflstr: 0x3ac4
+  __TEXT.__cstring: 0x2e552
+  __TEXT.__swift5_typeref: 0x6bb7
+  __TEXT.__swift5_reflstr: 0x3af4
   __TEXT.__swift5_assocty: 0xf00
-  __TEXT.__constg_swiftt: 0x53bc
+  __TEXT.__constg_swiftt: 0x562c
   __TEXT.__swift5_builtin: 0x320
-  __TEXT.__swift5_fieldmd: 0x4e0c
-  __TEXT.__swift5_proto: 0x1144
-  __TEXT.__swift5_types: 0x62c
+  __TEXT.__swift5_fieldmd: 0x4f24
+  __TEXT.__swift5_proto: 0x116c
+  __TEXT.__swift5_types: 0x64c
   __TEXT.__swift_as_entry: 0x748
-  __TEXT.__swift_as_ret: 0x8c8
-  __TEXT.__swift5_capture: 0x332c
+  __TEXT.__swift_as_ret: 0x8c4
+  __TEXT.__swift5_capture: 0x349c
   __TEXT.__swift5_mpenum: 0x7c
-  __TEXT.__swift5_protos: 0xf0
-  __TEXT.__oslogstring: 0x3187c
-  __TEXT.__gcc_except_tab: 0x5fa8
+  __TEXT.__swift5_protos: 0x104
+  __TEXT.__oslogstring: 0x31759
+  __TEXT.__gcc_except_tab: 0x5ec0
   __TEXT.__ustring: 0x1b2
-  __TEXT.__unwind_info: 0x11a10
-  __TEXT.__eh_frame: 0x161b4
+  __TEXT.__unwind_info: 0x11b38
+  __TEXT.__eh_frame: 0x162d4
   __TEXT.__objc_classname: 0x40f2
-  __TEXT.__objc_methname: 0x45a6b
-  __TEXT.__objc_methtype: 0x7a6e
-  __TEXT.__objc_stubs: 0x2f040
-  __DATA_CONST.__got: 0x1a88
-  __DATA_CONST.__const: 0xc710
-  __DATA_CONST.__objc_classlist: 0x14f8
+  __TEXT.__objc_methname: 0x45a12
+  __TEXT.__objc_methtype: 0x7a4f
+  __TEXT.__objc_stubs: 0x2ef80
+  __DATA_CONST.__got: 0x1a98
+  __DATA_CONST.__const: 0xc640
+  __DATA_CONST.__objc_classlist: 0x1510
   __DATA_CONST.__objc_catlist: 0xf8
   __DATA_CONST.__objc_protolist: 0x450
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0xf478
+  __DATA_CONST.__objc_selrefs: 0xf468
   __DATA_CONST.__objc_protorefs: 0x220
   __DATA_CONST.__objc_superrefs: 0xce8
   __DATA_CONST.__objc_arraydata: 0x580
-  __AUTH_CONST.__auth_got: 0x25b0
-  __AUTH_CONST.__const: 0x2e088
-  __AUTH_CONST.__cfstring: 0x22dc0
-  __AUTH_CONST.__objc_const: 0x3d7d8
+  __AUTH_CONST.__auth_got: 0x25b8
+  __AUTH_CONST.__const: 0x2e5b8
+  __AUTH_CONST.__cfstring: 0x22e40
+  __AUTH_CONST.__objc_const: 0x3d930
   __AUTH_CONST.__objc_intobj: 0xc60
   __AUTH_CONST.__objc_arrayobj: 0x138
   __AUTH_CONST.__objc_dictobj: 0x118
-  __AUTH.__objc_data: 0x9980
-  __AUTH.__data: 0x27f8
+  __AUTH.__objc_data: 0x9a60
+  __AUTH.__data: 0x2908
   __DATA.__objc_ivar: 0x18f8
-  __DATA.__data: 0x7988
-  __DATA.__bss: 0x1cc89
+  __DATA.__data: 0x7998
+  __DATA.__bss: 0x1cf09
   __DATA.__common: 0xb68
   __DATA_DIRTY.__objc_ivar: 0x718
   __DATA_DIRTY.__objc_data: 0x5ac0

   - /usr/lib/swift/libswift_StringProcessing.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  UUID: 4C6338D4-6131-38C3-8F31-7A16E0C41AA2
-  Functions: 26884
-  Symbols:   53275
-  CStrings:  26002
+  UUID: 5EEE52B5-8257-30BF-B905-D373CE495E51
+  Functions: 27062
+  Symbols:   53338
+  CStrings:  26014
 
Symbols:
+ -[AMSDefaults mediaRestrictionsAccountData]
+ -[AMSDefaults setMediaRestrictionsAccountData:]
+ GCC_except_table131
+ GCC_except_table159
+ _OBJC_CLASS_$_AMSAccountFinderObjcBridge
+ _OBJC_CLASS_$_AMSAccountsFinder
+ _OBJC_METACLASS_$_AMSAccountFinderObjcBridge
+ _OBJC_METACLASS_$_AMSAccountsFinder
+ __CLASS_METHODS_AMSAccountFinderObjcBridge
+ __CLASS_METHODS_AMSAccountsFinder
+ __DATA_AMSAccountFinderObjcBridge
+ __DATA_AMSAccountsFinder
+ __DATA__TtC18AppleMediaServices28MediaRestrictionsDataStorage
+ __INSTANCE_METHODS_AMSAccountFinderObjcBridge
+ __INSTANCE_METHODS_AMSAccountsFinder
+ __IVARS__TtC18AppleMediaServices28MediaRestrictionsDataStorage
+ __METACLASS_DATA_AMSAccountFinderObjcBridge
+ __METACLASS_DATA_AMSAccountsFinder
+ __METACLASS_DATA__TtC18AppleMediaServices28MediaRestrictionsDataStorage
+ ___69+[AMSServerDataCacheMigrator _syncCachedServerDataCacheUsingAccount:]_block_invoke
+ ___90+[AMSDefaults shouldSampleWithPercentageValue:sessionDurationValue:identifier:completion:]_block_invoke.354
+ ___block_descriptor_40_e29_v24?0"NSArray"8"NSError"16l
+ ___block_literal_global.344
+ ___block_literal_global.346
+ ___block_literal_global.348
+ ___block_literal_global.357
+ ___block_literal_global.364
+ ___swift_memcpy144_8
+ ___swift_memcpy176_8
+ _associated conformance So17AMSAccountsFinderC18AppleMediaServicesE6ErrorsO10Foundation13CustomNSErrorACs5Error
+ _associated conformance So17AMSAccountsFinderC18AppleMediaServicesE6ErrorsO10Foundation14LocalizedErrorACs0I0
+ _block_copy_helper.93
+ _block_copy_helper.97
+ _block_descriptor.95
+ _block_descriptor.99
+ _block_destroy_helper.94
+ _block_destroy_helper.98
+ _objc_msgSend$accountCachedDataForAccount:
+ _objc_msgSend$iTunesAccountsInUseIncludeLocal:includeSandbox:
+ _objc_msgSend$stableIdentifier:isSandbox:
+ _symbolic $s18AppleMediaServices0B20RestrictionsDefaultsP
+ _symbolic $s18AppleMediaServices13AccountFinderP
+ _symbolic $s18AppleMediaServices18AccountStoreFinderP
+ _symbolic $s18AppleMediaServices19AccountFinderiTunesP
+ _symbolic $s18AppleMediaServices19AccountRepresentingP
+ _symbolic SS7altDSID_Si9errorCodet
+ _symbolic So17AMSAccountsFinderC
+ _symbolic _____ 18AppleMediaServices0B12RestrictionsV10CachedDataO
+ _symbolic _____ 18AppleMediaServices0B12RestrictionsV6Logger33_DF65CEE45A27989D454821BA2DD8A103LLV
+ _symbolic _____ 18AppleMediaServices0B16RestrictionsCoreO
+ _symbolic _____ 18AppleMediaServices0B23RestrictionsDataStorageC
+ _symbolic _____ 18AppleMediaServices10AMPAccountV
+ _symbolic _____ 18AppleMediaServices12AccountUtilsO
+ _symbolic _____ 18AppleMediaServices23AccountsFrameworkFinderO
+ _symbolic _____ So17AMSAccountsFinderC18AppleMediaServicesE6ErrorsO
+ _symbolic ______p 18AppleMediaServices0B20RestrictionsDefaultsP
+ _symbolic ______p 18AppleMediaServices19AccountRepresentingP
+ _symbolic _____y_____G s23_ContiguousArrayStorageC 18AppleMediaServices10AMPAccountV
+ _symbolic _____y______pG s23_ContiguousArrayStorageC 18AppleMediaServices19AccountRepresentingP
+ _type_layout_string 18AppleMediaServices0B12RestrictionsV6Logger33_DF65CEE45A27989D454821BA2DD8A103LLV
+ _type_layout_string 18AppleMediaServices10AMPAccountV
+ _type_layout_string So17AMSAccountsFinderC18AppleMediaServicesE6ErrorsO
- -[ACAccount(AppleMediaServices) _ams_fetchMediaRestrictionBoolKey:timeout:returningStaleData:]
- -[ACAccount(AppleMediaServices) _ams_fetchMediaRestrictionIntKey:timeout:returningStaleData:]
- -[ACAccount(AppleMediaServices) _cacheNumber:status:]
- -[ACAccount(AppleMediaServices) _returnNumber:status:]
- -[ACAccount(AppleMediaServices) _shouldCacheNumberWithStatus:]
- -[ACAccount(AppleMediaServices) _shouldReturnNumberWithStatus:]
- -[ACAccount(AppleMediaServices) _stateForCachedNumber:stale:]
- GCC_except_table124
- GCC_except_table127
- GCC_except_table130
- GCC_except_table146
- GCC_except_table174
- ___90+[AMSDefaults shouldSampleWithPercentageValue:sessionDurationValue:identifier:completion:]_block_invoke.351
- ___90-[ACAccount(AppleMediaServices) ams_fetchMediaRestrictionsWithTimeout:returningStaleData:]_block_invoke
- ___90-[ACAccount(AppleMediaServices) ams_fetchProfileLockStatusWithTimeout:returningStaleData:]_block_invoke
- ___90-[ACAccount(AppleMediaServices) ams_fetchProfileLockStatusWithTimeout:returningStaleData:]_block_invoke.308
- ___90-[ACAccount(AppleMediaServices) ams_fetchProfileLockStatusWithTimeout:returningStaleData:]_block_invoke.310
- ___93-[ACAccount(AppleMediaServices) _ams_fetchMediaRestrictionIntKey:timeout:returningStaleData:]_block_invoke
- ___93-[ACAccount(AppleMediaServices) _ams_fetchMediaRestrictionIntKey:timeout:returningStaleData:]_block_invoke.305
- ___94-[ACAccount(AppleMediaServices) _ams_fetchMediaRestrictionBoolKey:timeout:returningStaleData:]_block_invoke
- ___94-[ACAccount(AppleMediaServices) _ams_fetchMediaRestrictionBoolKey:timeout:returningStaleData:]_block_invoke.307
- ___block_descriptor_40_e8_32s_e18_v16?0"NSNumber"8ls32l8
- ___block_descriptor_49_e8_32s40r_e29_"AMSPromise"16?0"NSError"8ls32l8r40l8
- ___block_descriptor_50_e8_32s40r_e29_"AMSPromise"16?0"NSError"8ls32l8r40l8
- ___block_descriptor_65_e8_32s40s48s56r_e49_v24?0"<AMSAccountCachedServerInt>"8"NSError"16ls32l8r56l8s40l8s48l8
- ___block_descriptor_65_e8_32s40s48s56r_e50_v24?0"<AMSAccountCachedServerBool>"8"NSError"16ls32l8r56l8s40l8s48l8
- ___block_descriptor_65_e8_32s40s48s56r_e52_v24?0"<AMSAccountCachedServerString>"8"NSError"16ls32l8r56l8s40l8s48l8
- ___block_literal_global.331
- ___block_literal_global.343
- ___block_literal_global.345
- ___block_literal_global.354
- ___block_literal_global.360
- ___swift_memcpy168_8
- _block_copy_helper.54
- _block_descriptor.56
- _block_destroy_helper.55
- _objc_msgSend$_ams_fetchMediaRestrictionBoolKey:timeout:returningStaleData:
- _objc_msgSend$_ams_fetchMediaRestrictionIntKey:timeout:returningStaleData:
- _objc_msgSend$_cacheNumber:status:
- _objc_msgSend$_returnNumber:status:
- _objc_msgSend$_shouldCacheNumberWithStatus:
- _objc_msgSend$_shouldReturnNumberWithStatus:
- _objc_msgSend$_stateForCachedNumber:stale:
- _objc_msgSend$clearCachedDataUpdateDate
- _objc_msgSend$getLastCachedDataUpdateDate
CStrings:
+ "%{public}@: [%{public}@] Unable to find all iTunes accounts in use due to error: %{public}@"
+ "%{public}@Fetching Media Restrictions timeout = %{public}@ returningStaleData = %{public}@"
+ "%{public}@Requested profile lock state but it was not found in Account Data. data = %{public}@"
+ "AMSAccountFinderObjcBridge"
+ "AMSAccountsFinder"
+ "AMSError.AccountsFinder"
+ "AMSMediaRestrictionsAccountData"
+ "Creating updated data for account"
+ "Missing accountID for account:"
+ "Performing Request to endpoint = "
+ "Updating data cache"
+ "Wrote media restrictions account data:"
+ "_TtC18AppleMediaServices28MediaRestrictionsDataStorage"
+ "accountCachedDataForAccount:"
+ "dataStorage"
+ "iTunesAccountsInUseIncludeLocal:includeSandbox:"
+ "lastAuthenticated"
+ "mediaRestrictionsAccountData"
+ "profileLockExists"
+ "seed"
+ "setMediaRestrictionsAccountData:"
+ "stableIdentifier:isSandbox:"
+ "using existing media restrictions account data:"
+ "writing new media restrictions account data:"
- "%{public}@Data catching with error cached data = %{public}@ | error = %{public}@"
- "%{public}@Data encountered error in promise handler: %{public}@ | error = %{public}@"
- "%{public}@Data is calling promise handler updater: %{public}@"
- "%{public}@Fetch profile lock promise handler updater: %{public}@"
- "%{public}@Fetching value key = %{public}@ timeout = %{public}@ returningStaleData = %{public}@"
- "%{public}@Profile lock encountered error in promise handler: %{public}@ | error = %{public}@"
- "%{public}@Profile lock is stale: %{public}@"
- "%{public}@Profile lock is valid: %{public}@"
- "<private>"
- "@36@0:8Q16d24B32"
- "Performing Reequest to endpoint = "
- "Q28@0:8@16B24"
- "_ams_fetchMediaRestrictionBoolKey:timeout:returningStaleData:"
- "_ams_fetchMediaRestrictionIntKey:timeout:returningStaleData:"
- "_cacheNumber:status:"
- "_returnNumber:status:"
- "_shouldCacheNumberWithStatus:"
- "_shouldReturnNumberWithStatus:"
- "_stateForCachedNumber:stale:"
- "v24@?0@\"<AMSAccountCachedServerInt>\"8@\"NSError\"16"

```
