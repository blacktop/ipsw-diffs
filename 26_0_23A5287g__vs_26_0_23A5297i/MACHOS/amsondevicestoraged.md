## amsondevicestoraged

> `/System/Library/PrivateFrameworks/OnDeviceStorage.framework/Support/amsondevicestoraged`

```diff

-2.0.13.0.0
-  __TEXT.__text: 0xf8ef8
-  __TEXT.__auth_stubs: 0x33f0
+2.0.15.0.0
+  __TEXT.__text: 0x116af4
+  __TEXT.__auth_stubs: 0x3530
   __TEXT.__objc_methlist: 0x4c
-  __TEXT.__const: 0x13d64
-  __TEXT.__gcc_except_tab: 0x3268
-  __TEXT.__cstring: 0x5d95
+  __TEXT.__const: 0x144b4
+  __TEXT.__gcc_except_tab: 0x3408
+  __TEXT.__cstring: 0x7205
   __TEXT.__objc_classname: 0xd
   __TEXT.__objc_methname: 0x2d6
   __TEXT.__objc_methtype: 0x8
-  __TEXT.__swift5_typeref: 0x185a
+  __TEXT.__swift5_typeref: 0x19ce
   __TEXT.__swift5_entry: 0x8
-  __TEXT.__constg_swiftt: 0x1a18
-  __TEXT.__swift5_fieldmd: 0xf2c
-  __TEXT.__swift5_builtin: 0x12c
-  __TEXT.__swift5_reflstr: 0x95b
-  __TEXT.__swift5_assocty: 0x470
-  __TEXT.__swift5_proto: 0x2b4
-  __TEXT.__swift5_types: 0x134
-  __TEXT.__swift5_protos: 0xa0
-  __TEXT.__swift5_capture: 0xc44
-  __TEXT.__swift_as_entry: 0x1bc
-  __TEXT.__swift_as_ret: 0x4bc
-  __TEXT.__swift5_mpenum: 0x1c
-  __TEXT.__oslogstring: 0x46
-  __TEXT.__unwind_info: 0x51e0
-  __TEXT.__eh_frame: 0x100d0
-  __DATA_CONST.__auth_got: 0x1a08
-  __DATA_CONST.__got: 0xa10
-  __DATA_CONST.__auth_ptr: 0xac0
-  __DATA_CONST.__const: 0x4030
-  __DATA_CONST.__objc_classlist: 0x108
+  __TEXT.__constg_swiftt: 0x1cbc
+  __TEXT.__swift5_fieldmd: 0x11cc
+  __TEXT.__swift5_builtin: 0x154
+  __TEXT.__swift5_reflstr: 0xb2c
+  __TEXT.__swift5_assocty: 0x4a0
+  __TEXT.__swift5_proto: 0x2f8
+  __TEXT.__swift5_types: 0x160
+  __TEXT.__swift_as_entry: 0x204
+  __TEXT.__swift_as_ret: 0x53c
+  __TEXT.__swift5_capture: 0xe00
+  __TEXT.__oslogstring: 0x56
+  __TEXT.__swift5_protos: 0xa4
+  __TEXT.__swift5_mpenum: 0x24
+  __TEXT.__unwind_info: 0x5b38
+  __TEXT.__eh_frame: 0x12970
+  __DATA_CONST.__auth_got: 0x1aa8
+  __DATA_CONST.__got: 0xa48
+  __DATA_CONST.__auth_ptr: 0xaf8
+  __DATA_CONST.__const: 0x4a30
+  __DATA_CONST.__objc_classlist: 0x120
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__linkguard: 0x2e
-  __DATA.__objc_const: 0x1c08
+  __DATA.__objc_const: 0x1ee8
   __DATA.__objc_selrefs: 0x128
-  __DATA.__objc_data: 0x260
-  __DATA.__data: 0x2e10
+  __DATA.__objc_data: 0x2b0
+  __DATA.__data: 0x3698
   __DATA.__thread_vars: 0x30
   __DATA.__thread_bss: 0x120
-  __DATA.__bss: 0x4e40
-  __DATA.__common: 0x5a8
+  __DATA.__bss: 0x56d0
+  __DATA.__common: 0x5b8
   - /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
   - /System/Library/Frameworks/CoreServices.framework/CoreServices
   - /System/Library/Frameworks/CryptoKit.framework/CryptoKit

   - /usr/lib/swift/libswift_DarwinFoundation1.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  UUID: DFB9C351-1CCD-3429-A911-892756D2EEE5
-  Functions: 3191
-  Symbols:   1396
-  CStrings:  932
+  UUID: 74FC201E-0504-342A-B182-B6F868C57001
+  Functions: 3626
+  Symbols:   1426
+  CStrings:  1036
 
Symbols:
+ _$s10Foundation4DateVACycfC
+ _$s19OnDeviceStorageCore10ConnectionC02isA18ClientContextQueueSbvg
+ _$s19OnDeviceStorageCore10ConnectionC11busyTimeoutSdvg
+ _$s19OnDeviceStorageCore10ConnectionC14createFunction_13deterministic_AA10ExpressionVyxSgGycSS_SbAHyctKAA5ValueRzlF
+ _$s19OnDeviceStorageCore10ConnectionC14createFunction_13deterministic_AA10ExpressionVyxSgGycSS_SbAHyctKAA5ValueRzlFfA0_
+ _$s19OnDeviceStorageCore10ConnectionC14setBusyTimeoutyySdF
+ _$s19OnDeviceStorageCore10ConnectionC16setClientContextyys8Sendable_pF
+ _$s19OnDeviceStorageCore10ConnectionC18clearClientContextyyF
+ _$s19OnDeviceStorageCore10ConnectionC18clientContextQueueSo17OS_dispatch_queueCvg
+ _$s19OnDeviceStorageCore10ConnectionC20currentClientContexts8Sendable_pSgvg
+ _$s19OnDeviceStorageCore10ConnectionC6scalaryAA7Binding_pSgSS_AFdtKF
+ _$s19OnDeviceStorageCore10ExpressionVAA10Foundation4DateVRszlE9timestampACySdGvg
+ _$s19OnDeviceStorageCore10SchemaTypePAAE6selectyxSayAA11Expressible_pGF
+ _$s19OnDeviceStorageCore11DaemonErrorO18interruptedContextyA2CmFWC
+ _$s19OnDeviceStorageCore11DaemonErrorO24unexpectedContextReentryyA2CmFWC
+ _$s19OnDeviceStorageCore11ExpressiblePAAE10columnNameSSvpMV
+ _$s19OnDeviceStorageCore16AccessCredentialV4fromACSS_tKcfC
+ _$s19OnDeviceStorageCore17DataSpecificationV9NamespaceV5TableV10timeToLiveSdSgvg
+ _$s19OnDeviceStorageCore3JWTV15verifySignature6secretyAC6SecretO_tKF
+ _$s2os12OSSignposterVMn
+ _$s2os23OSSignpostIntervalStateCMn
+ _$s7JetCore10LogMessageV19StringInterpolationV06appendF09sensitiveyypSg_tF
+ _$sSS18_uncheckedFromUTF8ySSSRys5UInt8VGFZ
+ _$sSS5index5afterSS5IndexVAD_tF
+ _$sSSySJSS5IndexVcig
+ _$sSds7CVarArgsWP
+ _$sSo17OS_dispatch_queueC8DispatchE4sync7executexxyKXE_tKlF
+ _$sSs5index5afterSS5IndexVAD_tF
+ _$sSs8UTF8ViewV8distance4from2toSiSS5IndexV_AGtF
+ _$sSsySJSS5IndexVcig
+ _$sSy10FoundationE8containsySbqd__SyRd__lF
+ _$ss11_MergeErrorON
+ _$ss11_MergeErrorOs0B0sWP
+ _$ss12StaticStringVMn
+ _$ss12StaticStringVN
+ _CFAbsoluteTimeGetCurrent
+ _mach_task_self_
+ _swift_cvw_initEnumMetadataMultiPayloadWithLayoutString
+ _swift_cvw_multiPayloadEnumGeneric_destructiveInjectEnumTag
+ _swift_cvw_multiPayloadEnumGeneric_getEnumTag
+ _swift_getAtKeyPath
+ _swift_getExistentialTypeMetadata
+ _swift_getKeyPath
+ _swift_unexpectedError
+ _task_info
- _$s19OnDeviceStorageCore10ConnectionC14createFunction_13deterministic_AA10ExpressionVyxGycSS_SbxyctKAA5ValueRzlF
- _$s19OnDeviceStorageCore10ConnectionC14createFunction_13deterministic_AA10ExpressionVyxGycSS_SbxyctKAA5ValueRzlFfA0_
- _$s19OnDeviceStorageCore10ConnectionC_8readonly14protectionType10attributesACSS_SbSo016NSFileProtectionH0aAC10AttributesVtKcfcfA0_
- _$s19OnDeviceStorageCore10ConnectionC_8readonly14protectionType10attributesACSS_SbSo016NSFileProtectionH0aAC10AttributesVtKcfcfA2_
- _$s19OnDeviceStorageCore3JWTV15verifySignature6secretyAC6SecretO_tAC5ErrorOYKF
- _$sSR11baseAddressSPyxGSgvg
- _$sScf25isIsolatingCurrentContextSbyFTq
- _$sScfsE25isIsolatingCurrentContextSbyF
- _$sSr11baseAddressSpyxGSgvg
- _$ss11MutableSpanVMa
- _$ss4SpanVMa
- _NSFileProtectionCompleteUntilFirstUserAuthentication
- _swift_unknownObjectWeakDestroy
- _swift_unknownObjectWeakInit
- _swift_unknownObjectWeakLoadStrong
CStrings:
+ "\n        AND NOT "
+ "\n    );\n\n    -- Delete LRU row if table is not empty (for LRU policy)\n    DELETE FROM "
+ "\n    );\n\n    -- Handle LRU policy with optimized logic\n    -- First check if table is empty (for LRU policy)\n    SELECT RAISE(IGNORE)\n    WHERE (\n        "
+ "    PRAGMA page_size = "
+ " ASC\n    LIMIT 1\n)"
+ " data ownership entries to check for cleanup"
+ " expired rows from table: "
+ " for requestId: "
+ " still contains rows for requestId: "
+ " unique tables across "
+ " users for potential TTL cleanup"
+ "% - consider tuning cache size"
+ "', (SELECT COUNT(*) FROM "
+ "(SELECT name FROM sqlite_master WHERE type='table' AND name='"
+ ")\nBEGIN\n    -- Handle ignore policy\n    SELECT RAISE(IGNORE)\n    WHERE (\n        "
+ ", MonitoringEnabled: "
+ ", SynchronousMode: "
+ ", WalAutoCheckpoint: "
+ ", keeping ownership entry"
+ ";\n    PRAGMA cache_size = "
+ ";\n    PRAGMA journal_mode = "
+ ";\n    PRAGMA synchronous = "
+ ";\n    PRAGMA wal_autocheckpoint = "
+ "Approximate number of bytes of heap and lookaside memory used by prepared statements."
+ "Approximate number of bytes of heap memory used to store the schema for all databases."
+ "B, CacheHitRate: "
+ "CREATE INDEX IF NOT EXISTS "
+ "Cached credential for requestId: "
+ "Checking ownership for requestId: "
+ "Closing connection for key: "
+ "Closing main database connection."
+ "Creating database triggers and performance indexes"
+ "Creating session: "
+ "Current connection context is nil"
+ "DataOwnershipIndexCleanupTask.run"
+ "Deregistering data ownership for "
+ "Deregistering ownership entry for requestId: "
+ "Duplicate values for key: '"
+ "Failed to configure SQLite database instance, reason: "
+ "Failed to create ["
+ "Failed to perform ownership cleanup for table: "
+ "Failed to process TTL cleanup for table: "
+ "Finished data ownership index cleanup task, deregistered "
+ "Finished scheduled TTL cleanup task, total rows deleted: "
+ "Largest scratch allocation size in bytes."
+ "LookasideMissFull"
+ "LookasideMissSize"
+ "NOT EXISTS (SELECT 1 FROM "
+ "No TTL set for table: "
+ "No cached credential found for requestId: "
+ "Number of cache hits that have occurred."
+ "Number of cache misses that have occurred."
+ "Number of deferred foreign key constraint checks."
+ "Number of dirty cache entries that have been written to disk."
+ "Number of dirty cache pages that have been spilled to disk."
+ "Number of lookaside memory allocations that failed due to all lookaside memory already being in use."
+ "Number of lookaside memory allocations that failed due to the amount of memory requested being larger than the lookaside slot size."
+ "Number of lookaside memory slots currently checked out."
+ "Number of page cache overflows that have occurred."
+ "Number of pager cache pages currently in use."
+ "Number of pager cache pages that have been shared between multiple database connections."
+ "Number of scratch allocation overflows."
+ "Number of scratch allocations used by all database connections."
+ "Number of successful lookaside memory allocations."
+ "PageCacheOverflow"
+ "Processing TTL cleanup for user: "
+ "Rate limit window start time is too large: "
+ "Registering data ownership for "
+ "RequestHandler.handleCancellation"
+ "RequestHandler.handleIncomingRequest"
+ "Running TTL cleanup task for table: "
+ "Running data ownership index cleanup task"
+ "Running scheduled TTL cleanup task"
+ "SQLITE_PERF: ACTIVE_CONNECTIONS: "
+ "SQLITE_PERF: CACHE_PERFORMANCE["
+ "SQLITE_PERF: CONFIG_SNAPSHOT - SoftHeapLimit: "
+ "SQLITE_PERF: Failed to collect process memory info: "
+ "SQLITE_PERF: High physical memory usage detected: "
+ "SQLITE_PERF: Low cache hit rate detected: "
+ "SQLITE_PERF: MEMORY_STATS - Used: "
+ "SQLITE_PERF: MEMORY_UTILIZATION - "
+ "SQLITE_PERF: OPERATION_TIME: "
+ "SQLITE_PERF: PROCESS_FOOTPRINT - Physical: "
+ "SQLITE_PERF: SQLite memory usage approaching limit: "
+ "SQLITE_PERF: SUMMARY - Memory Used: "
+ "ScheduledTTLCleanupTask.run"
+ "Scheduling forward deletion rules for "
+ "Scheduling notifications for "
+ "Skip creating performance indexes for service connection"
+ "Successfully deregistered ownership for requestId: "
+ "Swift/Dictionary.swift"
+ "Swift/NativeDictionary.swift"
+ "TTL cleanup removed "
+ "TTLCleanupTask.run"
+ "The number of unused pages (free pages) in the database file"
+ "The schema version number used for detecting schema changes"
+ "The table row limit: "
+ "The total number of pages currently in the database file"
+ "The user-defined version number for tracking custom database migrations"
+ "Unable to collect and log memory stats, reason: "
+ "Unable to find cached credential for cleanup task: "
+ "Unable to perform TTL cleanup on access, reason: "
+ "Unscheduling forward deletion rules for "
+ "] index for table: "
+ "_TtC19amsondevicestoraged14TTLCleanupTask"
+ "_TtC19amsondevicestoraged23ScheduledTTLCleanupTask"
+ "_TtC19amsondevicestoraged29DataOwnershipIndexCleanupTask"
+ "_bundle_ids_and_mtime"
+ "activeMainDbOperations"
+ "amsondevicestoraged/ScheduledTTLCleanupTask.swift"
+ "bundleAgnosticDataOwnershipIndex"
+ "cachedCredential"
+ "connection(for:)"
+ "connectionOwnership"
+ "credentialSource"
+ "dbManager"
+ "fullDataOwnershipIndex"
+ "key=%s"
+ "no rows for request ID or bundle ID"
+ "sql.MemoryUsed.current"
+ "sql.MemoryUsed.highwater"
+ "sqliteEnableMonitoring"
+ "sqliteJournalMode"
+ "sqliteSynchronousMode"
+ "sqliteWalAutoCheckpoint"
+ "statusProvider"
+ "taskFactory"
- "\n        AND (NOT ("
- "\n    );\n\n    DELETE FROM "
- "\n    );\n\n    SELECT RAISE(IGNORE)\n    WHERE (\n        "
- "\n  - busy_timeout: "
- "\n  - cache_size: "
- "\nBEGIN\n    SELECT RAISE(IGNORE)\n    WHERE (\n        "
- "\nFOR EACH ROW\nWHEN "
- " = (\n        SELECT MIN("
- "(SELECT COUNT(*) FROM "
- "))\n        AND ("
- "Creating database triggers"
- "Failed to configure SQLite cache. ("
- "PRAGMA busy_timeout = "
- "PRAGMA cache_size = "
- "PRAGMA page_size = "
- "Setting SQLite configuration\n  - page_size: "
- "The table row limit for table: "
- "amsondevicestoraged/DataRegistryImplementation.swift"
- "databaseConnection(for:)"
- "dbConnectionManager"
- "mainConnection"
- "mainConnectionTask"
- "mainDatabaseConnection"

```
