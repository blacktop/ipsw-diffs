## mediaanalysisd-service

> `/System/Library/PrivateFrameworks/MediaAnalysis.framework/mediaanalysisd-service`

```diff

-345.67.3.0.0
-  __TEXT.__text: 0x1f1b10
-  __TEXT.__auth_stubs: 0x1f30
-  __TEXT.__objc_stubs: 0x14aa0
-  __TEXT.__objc_methlist: 0x9c80
-  __TEXT.__cstring: 0x123f5
-  __TEXT.__objc_classname: 0x1e54
-  __TEXT.__objc_methname: 0x1c0a6
-  __TEXT.__objc_methtype: 0x3a82
+345.71.2.11.1
+  __TEXT.__text: 0x1ecca8
+  __TEXT.__auth_stubs: 0x1f40
+  __TEXT.__objc_stubs: 0x14c00
+  __TEXT.__objc_methlist: 0x9d20
+  __TEXT.__cstring: 0x12275
+  __TEXT.__objc_classname: 0x1e57
+  __TEXT.__objc_methname: 0x1c1bb
+  __TEXT.__objc_methtype: 0x3aa5
   __TEXT.__const: 0x6c2
-  __TEXT.__gcc_except_tab: 0x344a0
-  __TEXT.__oslogstring: 0x29a0c
+  __TEXT.__gcc_except_tab: 0x34500
+  __TEXT.__oslogstring: 0x2941c
   __TEXT.__dlopen_cstrs: 0x2de
   __TEXT.__swift5_typeref: 0x2bb
   __TEXT.__swift5_reflstr: 0x93

   __TEXT.__swift5_capture: 0x48
   __TEXT.__swift_as_entry: 0x1c
   __TEXT.__swift_as_ret: 0x24
-  __TEXT.__unwind_info: 0x6d30
+  __TEXT.__unwind_info: 0x6dd8
   __TEXT.__eh_frame: 0x498
-  __DATA_CONST.__auth_got: 0xfb0
-  __DATA_CONST.__got: 0x1608
+  __DATA_CONST.__auth_got: 0xfb8
+  __DATA_CONST.__got: 0x16a8
   __DATA_CONST.__auth_ptr: 0x1b8
-  __DATA_CONST.__const: 0x6660
-  __DATA_CONST.__cfstring: 0xacc0
+  __DATA_CONST.__const: 0x67f0
+  __DATA_CONST.__cfstring: 0xac20
   __DATA_CONST.__objc_classlist: 0x6e0
   __DATA_CONST.__objc_catlist: 0x50
   __DATA_CONST.__objc_protolist: 0xf0
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__objc_protorefs: 0x90
   __DATA_CONST.__objc_superrefs: 0x560
-  __DATA_CONST.__objc_intobj: 0x1518
-  __DATA_CONST.__objc_arraydata: 0xa00
+  __DATA_CONST.__objc_intobj: 0x1530
+  __DATA_CONST.__objc_arraydata: 0xa28
   __DATA_CONST.__objc_arrayobj: 0x768
   __DATA_CONST.__objc_doubleobj: 0x20
   __DATA_CONST.__objc_dictobj: 0xa0
-  __DATA.__objc_const: 0x13fc8
-  __DATA.__objc_selrefs: 0x5958
-  __DATA.__objc_ivar: 0x11ac
+  __DATA.__objc_const: 0x14028
+  __DATA.__objc_selrefs: 0x59b0
+  __DATA.__objc_ivar: 0x11b4
   __DATA.__objc_data: 0x45e0
   __DATA.__data: 0xf40
   __DATA.__bss: 0xac0

   - /usr/lib/swift/libswift_Concurrency.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  UUID: CA6311D1-5820-38CF-B341-6DE5C4D0D022
-  Functions: 5470
-  Symbols:   1280
-  CStrings:  10942
+  UUID: 32F0663C-A36E-3552-8F7B-576D977B93C5
+  Functions: 5387
+  Symbols:   1301
+  CStrings:  10919
 
Symbols:
+ _VCPAnalysisCountFullAnalysisLongVideoCountKey
+ _VCPAnalysisCountFullAnalysisLongVideoFailedKey
+ _VCPAnalysisCountFullAnalysisLongVideoGatedKey
+ _VCPAnalysisCountFullAnalysisLongVideoProcessedKey
+ _VCPAnalysisCountFullAnalysisSlowmoVideoCountKey
+ _VCPAnalysisCountFullAnalysisSlowmoVideoFailedKey
+ _VCPAnalysisCountFullAnalysisSlowmoVideoGatedKey
+ _VCPAnalysisCountFullAnalysisSlowmoVideoProcessedKey
+ _VCPAnalysisCountFullAnalysisVideoFailedKey
+ _VCPAnalysisCountFullAnalysisVideoGatedKey
+ _VCPAnalysisFullAnalysisFailedLongVideoDurationKey
+ _VCPAnalysisFullAnalysisFailedSlowmoVideoDurationKey
+ _VCPAnalysisFullAnalysisFailedVideoDurationKey
+ _VCPAnalysisFullAnalysisGatedLongVideoDurationKey
+ _VCPAnalysisFullAnalysisGatedSlowmoVideoDurationKey
+ _VCPAnalysisFullAnalysisGatedVideoDurationKey
+ _VCPAnalysisFullAnalysisLongVideoDurationKey
+ _VCPAnalysisFullAnalysisProcessedLongVideoDurationKey
+ _VCPAnalysisFullAnalysisProcessedSlowmoVideoDurationKey
+ _VCPAnalysisFullAnalysisProcessedVideoDurationKey
+ _VCPAnalysisFullAnalysisSlowmoVideoDurationKey
+ _VCPAnalysisFullAnalysisVideoDurationKey
+ ___exp10
- _OBJC_CLASS_$_NSBatchInsertRequest
- _VCPKeyValuePrioritizedFaceAnalysisProgressPercentageWithFailure
CStrings:
+ "!#"
+ "%@ Failed to delete assets that do not have cloud identifier: %@"
+ "%@ Failed to remove all background analysis progress history: %@"
+ "%@ Failed to remove all change tokens: %@"
+ "%@ Failed to remove all key value pairs: %@"
+ "%@ Failed to remove all moments scheduled assets: %@"
+ "%@ Failed to remove all processing status: %@"
+ "%@ Managed asset without cloudIdentifier or localIdentifier %@; skipping"
+ "%@ Managed asset without localIdentifier %@; skipping"
+ "%@[%@][%@] Skip processing Live Photos/Movies during full image-only processing on non-GM device"
+ "%@[%@][MACD] Failed to remove processing status for taskID %d: %@"
+ "%@[MACD] Failed to change processing status of %lu assets: %@"
+ "%@[MACD] Failed to persist deep sync date: %@"
+ "%@[MACD] Failed to remove processing status for taskID %@: %@"
+ "%@[MACD] Failed to remove processing status for taskID %d, localIdentifiers %@: %@"
+ "@48@0:8@16@24Q32@40"
+ "@52@0:8Q16Q24B32@36@44"
+ "B16@?0^@8"
+ "B40@0:8@16Q24@32"
+ "B40@0:8Q16@24@32"
+ "B48@0:8@16Q24Q32@40"
+ "B48@0:8Q16Q24@32@40"
+ "B56@0:8Q16@24Q32@40@48"
+ "Date50Processed"
+ "Date50ProcessedOrFailed"
+ "Date90Processed"
+ "Date90ProcessedOrFailed"
+ "Date99Processed"
+ "Date99ProcessedOrFailed"
+ "DurationOfLivePhotosAnalyzedFullResource"
+ "DurationOfLivePhotosAnalyzedPartialResource"
+ "DurationOfMoviesAnalyzedFullResource"
+ "DurationOfMoviesAnalyzedPartialResource"
+ "Failed to cache processed asset count after promoter: %lu (promoter date: %@): %@"
+ "Failed to reset person process timestamps: %@"
+ "Ti,V_imageEmbeddingStatus"
+ "Ti,V_sceneStatus"
+ "[%@][%@] Unable to access photoIrisProperties for live photo length"
+ "[%@][%@][MACD] Failed to remove processing status for taskID %d: %@"
+ "[%@][HFC][MACD] Failed to change processing status of %lu assets to Hard Failure: %@"
+ "[%@][MACD] Failed to prepare %d assets: %@"
+ "[%@][MACD] Failed to remove processing status for taskID %d, localIdentifiers %@: %@"
+ "[%@][MACD] Failed to set processing status to running: %@"
+ "[%@][MACD] Failed to update processing status for taskID %d: %@"
+ "[FaceLibraryProcessing][%@][MACD] Failed to remove processing status for taskID %d: %@"
+ "[FaceLibraryProcessing][MACD] Failed to change processing status of %lu assets to Hard Failure: %@"
+ "[FaceLibraryProcessing][MACD] Failed to remove processing status for taskID %d, localIdentifiers %@: %@"
+ "[FaceModelBump][%@][MACD] Failed to remove all change tokens for taskID %d: %@"
+ "[MACDMigration] Failed to update processing metrics"
+ "[MACD] Failed to save changes: %@"
+ "[MAClientHandler][MACD] Failed to remove all processing status/change tokens for taskID %d: %@"
+ "[MADProgessManager] Unable to report completion checkpoint for unknown task %u"
+ "[MADProgressManager] Error %d in storing additional progress for task:subtask %u:%u"
+ "[MADProgressManager] Error %d in storing progress for task:subtask %u:%u"
+ "[MADProgressManager] Failed to query progress in default photo library for task %u"
+ "[MADProgressManager] Failed to query video durations for full analysis"
+ "[MADProgressManager] Failed to report BGST Checkpoint %d for feature code %@ - %@ - %@"
+ "[MADProgressManager] Failed to report BGST Custom Checkpoint %d for taskIdentifier %@ - %@"
+ "[MADProgressManager] MADBGCheckpoint %d is not within range [%d, %d]"
+ "[MADProgressManager] No previous date for key %@, setting as now (%@, timestamp: %lld)"
+ "[MADProgressManager] Reported BGST Checkpoint %d for feature code %@ - %@"
+ "[MADProgressManager] Reported BGST Custom Checkpoint %d for task taskIdentifier %@"
+ "[MADProgressManager] Skip reporting BGST Checkpoint for %@: no feature code"
+ "[MADProgressManager] Skipping progress report for non-system-photo-library"
+ "[MADProgressManager] Unable to report BGST checkpoint for photo library"
+ "[MADProgressManager] Unsupported analysis type %d"
+ "[MADProgressManager] checkpoint reported on %@ (timestamp: %lld)"
+ "[MADProgressManager] found date %@ (timestamp: %lld)"
+ "[MADProgressManager] taskIdentifier not found for task %u"
+ "[MADProgressManager][MACD] found date %@ (timestamp: %@)"
+ "[OCR][MACD] Failed to prepare %d assets: %@"
+ "[PECSingleRequest][%@][MACD] Failed to prepare asset: %@"
+ "[PECSingleRequest][%@][MACD] Failed to remove processing status for taskID %d: %@"
+ "[PEC][MACD] Failed to prepare %d assets: %@"
+ "[ProcessingStatusPruning][MACD] Failed to remove processing status for taskID %d, mediaType %d, mediaSubtypes %d: %@"
+ "[QuickFaceID][MACD] Failed to prepare %d assets: %@"
+ "[VisualSearch][MACD] Failed to prepare %d assets: %@"
+ "_computeCompletionDatesWithProgress:photoLibrary:taskID:currentDate:"
+ "_copyManagedPhotosAssetBatch:fromIterator:toManagedObjectContext:successCount:"
+ "_correctAnachronisticTimestampsForTask:completionDates:photoLibrary:"
+ "_getOrSetCompletionDateForTask:completeThreshold:includeFailures:photoLibrary:currentDate:"
+ "_getOrSetDateWithKey:photoLibrary:currentDate:"
+ "_getOrSetStartDateForTask:photoLibrary:currentDate:"
+ "_imageEmbeddingStatus"
+ "_maintainAssetLocalIdentifiers:missingStatsFlagsSet:deletePendingSet:"
+ "_publishEmbeddingResultsWithPhotoLibrary:"
+ "_publishPhotosResultsWithPhotoLibrary:"
+ "_queryProgressForTask:photoLibrary:cancelOrExtendTimeoutBlock:"
+ "_reportBGSTCompletionCheckpoint:ForTask:photoLibrary:currentDate:"
+ "_reportBGSTCustomCheckpoint:timestampKey:taskID:photoLibrary:currentDate:"
+ "_reportBGSTFeatureCheckpointForTask:"
+ "_reportCompletionDates:progressDetail:photoLibrary:taskID:currentDate:"
+ "_reportFaceP1ProgressDetail:photoLibrary:currentDate:"
+ "_reportMediaAnalysisSubcategoryWorkloadProgress:totalAssetCount:subCategory:"
+ "_reportProgressDetail:taskID:photoLibrary:"
+ "_sceneStatus"
+ "_storeProgress:forTask:photoLibrary:"
+ "_storeProgress:forTask:subtype:photoLibrary:"
+ "clearCheckpointTimestampForTask:changeRequest:"
+ "clearProgressUpdateRequestForTask:"
+ "i48@0:8@16@24@32^Q40"
+ "imageEmbeddingStatus"
+ "mad_countOfUnprocessedAssetsForTaskID:cancelBlock:extendTimeoutBlock:error:"
+ "mad_hasChanges"
+ "mad_insertBatch:entityName:insertedCount:"
+ "mad_performAnalysisDataStoreChanges:error:"
+ "mad_updateAnalysisMetricsOnVersionUpdateWithError:"
+ "photoIrisProperties"
+ "photoIrisVideoDuration"
+ "progressOrFailedPercentageQueryKey"
+ "queryVideoCountAndDurationBreakdown:photoLibrary:taskID:cancelOrExtendTimeoutBlock:"
+ "releaseSharedDataStoreForPhotoLibrary:"
+ "sceneStatus"
+ "setImageEmbeddingStatus:"
+ "setSceneStatus:"
+ "v16@?0@\"MADChangeRequest\"8"
+ "v20@?0@\"NSString\"8B16"
+ "v40@0:8@16Q24@32"
+ "v56@0:8@16@24@32Q40@48"
- "%@ Failed to delete %d assets with invalid cloud identifier"
- "%@ Failed to delete assets that do not have cloud identifier (error:%d)"
- "%@ Failed to recover processing status"
- "%@ Failed to remove all background analysis progress history"
- "%@ Failed to remove all change tokens"
- "%@ Failed to remove all key value pairs"
- "%@ Failed to remove all moments scheduled assets"
- "%@ Failed to remove all processing status"
- "%@ Failed to remove processing status"
- "%@ Failed to update processing status"
- "%@[%@][%@] Live Photos/Movies should not be fetched for full image-only processing on non-GM device, please file a radar to MediaAnalysis | All"
- "%@[%@][MACD] Failed to remove processing status for taskID %d"
- "%@[MACD] Failed to change processing status of %lu assets"
- "%@[MACD] Failed to persist deep sync date"
- "%@[MACD] Failed to remove processing status for taskID %@"
- "%@[MACD] Failed to remove processing status for taskID %d, localIdentifiers %@"
- "/Library/Caches/com.apple.xbs/Sources/MediaAnalysis/Daemon/Photos/MediaAnalysisClientHandler.mm"
- "@48@0:8@16@24@32@40"
- "@56@0:8@16Q24Q32@40@?48"
- "@96@0:8@16Q24Q32Q40B48@52Q60B68@72@80@88"
- "Failed to cache processed asset count after promoter: %lu (promoter date: %@)"
- "Failed to reset person process timestamps"
- "FailedVideoDuration"
- "ProcessedVideoDuration"
- "Q32@0:8q16Q24"
- "TotalVideoDuration"
- "VCPMADCollectAndReportAnalysisProgress_PrioritizedFace"
- "[%@] Failed to query progress in default photo library"
- "[%@] Failed to report BGST Checkpoint %d for feature code %@ - %@ - %@"
- "[%@] Failed to report BGST Custom Checkpoint %d for taskIdentifier %@ - %@"
- "[%@] Failed to report BGST Custom Checkpoint %d for taskIdentifier %@. Error: %@"
- "[%@] MADBGCheckpoint %d is not within range [%d, %d]"
- "[%@] No previous completion date, setting %@ as now (%@, timestamp: %lld)"
- "[%@] No previous start date, setting as now (%@, timestamp: %lld)"
- "[%@] Reported BGST Checkpoint %d for feature code %@ - %@"
- "[%@] Reported BGST Custom Checkpoint %d for task taskIdentifier %@"
- "[%@] Skip reporting BGST Checkpoint for %@: no feature code"
- "[%@] Unsupported analysis type %d"
- "[%@] Unsupported mediaType %lu."
- "[%@] checkpoint reported on %@ (timestamp: %lld)"
- "[%@] completed on %@ (timestamp: %lld)"
- "[%@] started on %@ (timestamp: %lld)"
- "[%@] task identifier not found"
- "[%@] taskIdentifier not found"
- "[%@][%@][MACD] Failed to remove processing status for taskID %d"
- "[%@][HFC][MACD] Failed to change processing status of %lu assets to Hard Failure"
- "[%@][MACD] Failed to prepare %d assets"
- "[%@][MACD] Failed to remove processing status for taskID %d, localIdentifiers %@"
- "[%@][MACD] Failed to set processing status to running"
- "[%@][MACD] Failed to update processing status for taskID %d"
- "[%@][MACD] started on %@ (timestamp: %@)"
- "[FaceLibraryProcessing][%@][MACD] Failed to remove processing status for taskID %d"
- "[FaceLibraryProcessing][MACD] Failed to change processing status of %lu assets to Hard Failure"
- "[FaceLibraryProcessing][MACD] Failed to remove processing status for taskID %d, localIdentifiers %@"
- "[FaceModelBump][%@][MACD] Failed to remove %@"
- "[FaceModelBump][%@][MACD] Failed to remove all change tokens for taskID %d"
- "[MACDMigration] Failed to remove checkpoint timestamp for %@"
- "[MACDMigration] Failed to remove checkpoint_with_failure timestamp for %@"
- "[MACDMigration] Failed to remove checkpoint_with_sticky_failure timestamp for %@"
- "[MACDMigration] Failed to remove complete timestamp for %@"
- "[MACDMigration] Failed to remove complete_with_failure timestamp for %@"
- "[MACDMigration] Failed to remove complete_with_sticky_failure timestamp for %@"
- "[MACDMigration] Failed to remove enablement timestamp for %@"
- "[MACDMigration] Failed to remove personalization checkpoint timestamp for %@"
- "[MACDMigration] Failed to set %@ as now"
- "[MACDMigration] Failed to set %@ to 0"
- "[MACDMigration] Failed to set analysis version %d for %@"
- "[MACDMigration] Failed to set major os version for %@"
- "[MACDMigration] Failed to set major os version of analysis version update %lld for %@"
- "[MACDMigration] Failed to set minor os version for %@"
- "[MACDMigration] Failed to set minor os version of analysis version update %lld for %@"
- "[MACDMigration] Failed to set os version timestamp for %@"
- "[MACDMigration] Failed to set timestamp %lld for %@"
- "[MACDMigration] Unable to drop processing status for %@"
- "[MACD] Failed to remove MADPersonProcessingStatusKey"
- "[MACD] Failed to remove MADPersonProcessingUpdateAttemptCountKey"
- "[MACD] Failed to remove PHPersistentChangeTokenPerson"
- "[MACD] Failed to remove VCPKeyValueContactIngestionTimestamp"
- "[MACD] Failed to remove VCPKeyValueFaceAnalysisLastFullModeClusterTimestamp"
- "[MACD] Failed to remove VCPKeyValueHomePersonIngestionTimestamp"
- "[MACD] Failed to remove VCPKeyValueVUDeepSyncTimestamp"
- "[MACD] Failed to remove VUWGalleryChangeBookmark"
- "[MACD] Failed to save changes"
- "[MACD] Failed to set value for VCPKeyValueLastPerAssetBiomeReportBucket"
- "[MACD] Failed to set value for VCPKeyValueLastPerAssetBiomeReportStartTimestamp"
- "[MACD] Failed to set value for VCPKeyValueLastPerLibraryBiomeReportEndTimestamp"
- "[MACD] Failed to set value for VCPKeyValueLastPerLibraryBiomeReportStartTimestamp"
- "[MAClientHandler] Failed to schedule asset %@ using CoreData for Moments deferred processing (type %@)"
- "[MAClientHandler][MACD] Failed to remove all processing status/change tokens for taskID %d"
- "[OCR][MACD] Failed to prepare %d assets"
- "[PECSingleRequest][%@][MACD] Failed to prepare asset"
- "[PECSingleRequest][%@][MACD] Failed to remove processing status for taskID %d"
- "[PEC][MACD] Failed to prepare %d assets"
- "[ProcessingStatusPruning][MACD] Failed to remove processing status for taskID %d, mediaType %d, mediaSubtypes %d"
- "[QuickFaceID][MACD] Failed to prepare %d assets"
- "_calculateCompleteDateWithEvent:progress:taskID:checkpoint:featureAvailableCheck:photoLibrary:completeThreshold:withStickyFailure:checkpointTimestampKey:currentDate:startDate:"
- "_computeProgressPercentageWithProcessedCount:andTotalCount:"
- "_copyManagedPhotosAssetBatch:toManagedObjectContext:successCount:"
- "_getStartDateForPhotoLibrary:withStartTimestampKey:coreAnalyticsEventKey:andCurrentDate:"
- "_maintainAssetBatch:missingStatsFlagsSet:deletePendingSet:"
- "_prepareBGSTCheckpointWithEvent:taskID:checkpoint:featureAvailableCheck:photoLibrary:checkpointTimestampKey:currentDate:"
- "_publishEmbeddingResultsWithPhotoLibrary:photosChangeBatch:"
- "_publishPhotosResultsWithPhotoLibrary:photosChangeBatch:"
- "_queryAndReportProgressForPhotoLibrary:analysisType:analysisSubtype:queryKeys:cancelOrExtendTimeoutBlock:"
- "_queryAndReportProgressForPrioritizedFaceAnalysisForPhotoLibrary:cancelOrExtendTimeoutBlock:"
- "_reportMediaAnalysisImageCheckpoint:withProgressPercentage:checkpointTimestampKey:photoLibrary:"
- "_reportMediaAnalysisSubcategoryWorkloadProgress:totalAssetCount:forSubCategory:"
- "arrayWithObjects:"
- "assetCountForMediaAnalysisTaskWithMediaType:mediaSubtypes:"
- "checkpointTimestampQueryKey"
- "checkpointWithStickyFailureTimestampQueryKey"
- "coreAnalyticsEventQueryKey"
- "countProcessedQueryKey"
- "countStickyFailedQueryKey"
- "countTotalAllowedQueryKey"
- "executeRequest:error:"
- "hasChanges"
- "i16@?0@\"MADChangeRequest\"8"
- "i40@0:8@16@24^Q32"
- "initWithEntityName:objects:"
- "kind == %d"
- "kind == %d && kindSubtype != %d"
- "kindSubtype == %d"
- "mad_performAnalysisDataStoreChanges:"
- "mad_sharedVersionProviderForBackupWithPhotoLibrary:"
- "progressPercentageWithStickyFailureQueryKey"
- "queryVideoTotalDuration:processedDuration:failedDuration:photoLibrary:taskID:cancelOrExtendTimeoutBlock:"
- "setResultType:"
- "startTimestampQueryKey"
- "unsignedLongValue"
- "v16@?0@\"NSString\"8"
- "v48@0:8Q16Q24@32@40"
- "v68@0:8@16Q24Q32B40@44@52@60"
- "vcp_assetCountWithInternalPredicate:forTaskID:"

```
