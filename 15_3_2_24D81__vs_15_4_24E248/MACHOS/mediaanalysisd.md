## mediaanalysisd

> `/System/Library/PrivateFrameworks/MediaAnalysis.framework/Versions/A/mediaanalysisd`

```diff

-300.7.1.0.0
-  __TEXT.__text: 0x196cd8
+305.15.1.0.0
+  __TEXT.__text: 0x1a8028
   __TEXT.__auth_stubs: 0xeb0
-  __TEXT.__objc_stubs: 0x12520
-  __TEXT.__objc_methlist: 0x865c
-  __TEXT.__gcc_except_tab: 0x2e9a8
-  __TEXT.__cstring: 0x1325a
-  __TEXT.__objc_classname: 0x1b6f
-  __TEXT.__objc_methname: 0x18d60
-  __TEXT.__objc_methtype: 0x32d1
-  __TEXT.__const: 0x428
-  __TEXT.__oslogstring: 0x1f8aa
+  __TEXT.__objc_stubs: 0x12be0
+  __TEXT.__objc_methlist: 0x9178
+  __TEXT.__gcc_except_tab: 0x31b2c
+  __TEXT.__cstring: 0x13a19
+  __TEXT.__objc_classname: 0x1b92
+  __TEXT.__objc_methname: 0x19aee
+  __TEXT.__objc_methtype: 0x33fe
+  __TEXT.__const: 0x430
+  __TEXT.__oslogstring: 0x21df9
   __TEXT.__dlopen_cstrs: 0x3b2
-  __TEXT.__unwind_info: 0x58c0
+  __TEXT.__unwind_info: 0x5b88
   __DATA_CONST.__auth_got: 0x770
-  __DATA_CONST.__got: 0xd60
-  __DATA_CONST.__const: 0x5fe8
-  __DATA_CONST.__cfstring: 0xd740
-  __DATA_CONST.__objc_classlist: 0x668
+  __DATA_CONST.__got: 0xd78
+  __DATA_CONST.__const: 0x63b0
+  __DATA_CONST.__cfstring: 0xdb20
+  __DATA_CONST.__objc_classlist: 0x670
   __DATA_CONST.__objc_catlist: 0x48
   __DATA_CONST.__objc_protolist: 0xa8
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__objc_protorefs: 0x60
   __DATA_CONST.__objc_classrefs: 0x18
-  __DATA_CONST.__objc_superrefs: 0x4e0
-  __DATA_CONST.__objc_intobj: 0x2370
-  __DATA_CONST.__objc_arraydata: 0x7a8
-  __DATA_CONST.__objc_arrayobj: 0x588
+  __DATA_CONST.__objc_superrefs: 0x4e8
+  __DATA_CONST.__objc_intobj: 0x23b8
+  __DATA_CONST.__objc_arraydata: 0x7c8
+  __DATA_CONST.__objc_arrayobj: 0x5a0
   __DATA_CONST.__objc_doubleobj: 0xd0
   __DATA_CONST.__objc_dictobj: 0x28
-  __DATA.__objc_const: 0x13a28
-  __DATA.__objc_selrefs: 0x4e78
-  __DATA.__objc_ivar: 0x1090
-  __DATA.__objc_data: 0x4010
-  __DATA.__data: 0x830
-  __DATA.__bss: 0x510
+  __DATA.__objc_const: 0x12ee8
+  __DATA.__objc_selrefs: 0x5100
+  __DATA.__objc_ivar: 0x10f0
+  __DATA.__objc_data: 0x4060
+  __DATA.__data: 0x838
+  __DATA.__bss: 0x520
   - /System/Library/Frameworks/AVFoundation.framework/Versions/A/AVFoundation
   - /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
   - /System/Library/Frameworks/Contacts.framework/Versions/A/Contacts

   - /System/Library/PrivateFrameworks/MediaAnalysisAccess.framework/Versions/A/MediaAnalysisAccess
   - /System/Library/PrivateFrameworks/MediaAnalysisPhotosServices.framework/Versions/A/MediaAnalysisPhotosServices
   - /System/Library/PrivateFrameworks/MediaAnalysisServices.framework/Versions/A/MediaAnalysisServices
+  - /System/Library/PrivateFrameworks/PhotoLibraryServices.framework/Versions/A/PhotoLibraryServices
   - /System/Library/PrivateFrameworks/PhotoLibraryServicesCore.framework/Versions/A/PhotoLibraryServicesCore
   - /System/Library/PrivateFrameworks/PhotosFormats.framework/Versions/A/PhotosFormats
   - /System/Library/PrivateFrameworks/PhotosIntelligence.framework/Versions/A/PhotosIntelligence

   - /usr/lib/libcompression.dylib
   - /usr/lib/libobjc.A.dylib
   - /usr/lib/libsqlite3.dylib
-  UUID: 77C90943-E1E7-3714-91E7-27003143FA61
-  Functions: 3890
-  Symbols:   676
-  CStrings:  10413
+  UUID: 1A6DD71A-0D67-30BA-B850-32132786E009
+  Functions: 3963
+  Symbols:   679
+  CStrings:  10735
 
Symbols:
+ _OBJC_CLASS_$_MADComputeSyncPayloadResults
+ _OBJC_CLASS_$_MADVSKEmbeddingResults
+ _OBJC_CLASS_$_NSCountedSet
+ _OBJC_CLASS_$_PLFeatureAvailabilitySignalledChanges
+ _VCPAnalyticsFieldMADErrorCode
+ _VCPAnalyticsFieldMADErrorLine
- _PHAssetPropertySetAesthetic
- _PHAssetPropertySetCuration
- _PHAssetPropertySetSceneprint
CStrings:
+ "  Failed to create MADVectorDatabaseChangeManager for photo library %@"
+ "  Failed to create VCPDatabaseWriter at %@ for photo library %@"
+ "  Hitting input stream EOF when reading backup entry header from %@"
+ "  Restored %zu/%zu full analysis records, %zu/%zu embedding records"
+ "  Unknown backup date key; skipping backup for task %llu"
+ "  [%@] Failed to publish vector database changes"
+ "  [%@] Failed to retrieve MADVectorDatabaseChangeManager"
+ "  [%@] Failed to retrieve VCPDatabaseWriter"
+ "  [%@] Failed to update vector database changes"
+ " [%@] Failed to initialize MADVectorDatabaseChangeManager"
+ " [%@] Failed to publish vector database changes"
+ " [%@] Failed to update vector database changes"
+ "%@ (Callback) Failed to analyze key faces from assets (err:%d)"
+ "%@ Adding %lu assets to VSKDB ..."
+ "%@ Analyze key faces from assets"
+ "%@ Budget: %d facecrop and %d assets per verified person"
+ "%@ Cancelled before PhotosLoop"
+ "%@ Cancelled before VSKDB rebuild"
+ "%@ Cancelled before VSKLoop"
+ "%@ Cancelled before image embedding deep sync"
+ "%@ Cancelled before video embedding deep sync"
+ "%@ Cancelled during PhotosLoop"
+ "%@ Cancelled during VSKLoop"
+ "%@ Cancelled during handle missing video embeddings"
+ "%@ Cancelled during handle missing video embeddings in processedAssetsInPhotos"
+ "%@ Completed removing image embedding"
+ "%@ Existing version (%d) >= Backup'd analysis version (%d); skipping entry"
+ "%@ Failed to add embeddings from VSKDB: %@"
+ "%@ Failed to analyze key faces from assets (err:%d)"
+ "%@ Failed to convert asset analysis; skipping entry"
+ "%@ Failed to fetch %lu processed assets from VSKDB: %@"
+ "%@ Failed to fetch asset count with processed imageEmbeddingVersion: %@"
+ "%@ Failed to fetch asset count with processed videoEmbeddingVersion: %@"
+ "%@ Failed to fetch image asset count in vectorDB: %@"
+ "%@ Failed to fetch image embedding results from vectorDB for processed asset"
+ "%@ Failed to fetch processed assets from Photos: %@"
+ "%@ Failed to fetch processed assets from VSKDB: %@"
+ "%@ Failed to fetch properties for %lu processed assets from MA DB"
+ "%@ Failed to fetch results for %lu processed assets from MA DB"
+ "%@ Failed to fetch video asset count in vectorDB: %@"
+ "%@ Failed to find matching asset from backup; skipping entry"
+ "%@ Failed to generate VSKAsset: %@"
+ "%@ Failed to generate embedding results; skipping"
+ "%@ Failed to obtain MADVectorDatabase for photo library %@"
+ "%@ Failed to publish vector database changes"
+ "%@ Failed to remove embeddings from VSKDB: %@"
+ "%@ Failed to reset imageEmbeddingVersion for %lu assets: %@"
+ "%@ Failed to restore analysis to database (%d)"
+ "%@ Failed to retrieve MADVectorDatabase"
+ "%@ Failed to retrieve VCPDatabaseWriter"
+ "%@ Failed to sync VSK database (non-fatal); Skipping"
+ "%@ Failed to update vectorDB asset embeddings: %@"
+ "%@ Fetched %lu assets with up-to-date imageEmbeddingVersion from Photos"
+ "%@ Fetched %lu assets with up-to-date videoEmbeddingVersion from Photos"
+ "%@ Fetched %lu corresponding asset records from MA DB out of %lu processed assets from Photos"
+ "%@ Fetched %lu corresponding assets from Photos out of %lu assets from VSKDB"
+ "%@ Fetched %lu corresponding assets from Photos out of %lu processed assets from VSKDB"
+ "%@ Fetched %lu corresponding assets from VSKDB out of %lu processed assets from Photos"
+ "%@ Fetched %lu corresponding result records from MA DB out of %lu processed assets from Photos"
+ "%@ Fetched %lu corresponding video embedding assets from VSKDB out of %lu processed assets from Photos"
+ "%@ Fetched %lu image embedding assets from VSKDB"
+ "%@ Fetched %lu video embedding assets from VSKDB"
+ "%@ Hitting input stream EOF when reading backup entry header from backup file: %@"
+ "%@ MAD database does not exist; skipping"
+ "%@ Merged existing embedding results with newly analyzed: %@"
+ "%@ No compatible image embeddings available from legacy backup"
+ "%@ No compatible video embeddings available from backup"
+ "%@ No compute sync payload generated for target stage %d (current stage %d)"
+ "%@ Processed finished"
+ "%@ Resetting imageEmbeddingVersion for %lu assets: %@"
+ "%@ Resetting videoEmbeddingVersion for %lu assets: %@"
+ "%@ Restored asset to Photos from backup"
+ "%@ Restoring image embeddings (v%d) from legacy backup"
+ "%@ Restoring video embeddings (v%d) from backup"
+ "%@ Reusing image embedding results (v%d) from compute sync"
+ "%@ Screened %lu verified identities, processed %lu key-face assets, %lu additional assets, and clustered %lu faces"
+ "%@ Skip MADPhotosFaceFastPassTask on this hardware"
+ "%@ Stage 1 - starting PhotosLoop"
+ "%@ Stage 1 - starting VSKLoop"
+ "%@ Stage 2 - starting PhotosLoop"
+ "%@ Stage 2 - starting VSKLoop"
+ "%@ Storing existing analysis results from compute sync into MA DB: %@"
+ "%@ Storing existing embedding results from compute sync into vectorDB: %@"
+ "%@ Unable to create image VSKAsset: %@"
+ "%@ Unable to create video VSKAsset: %@"
+ "%@ Updating asset"
+ "%@ Updating latest deep sync date to %@"
+ "%@ vdb-assets: %ld, madb-assets: %ld -> difference: %.2f%% (threshold: %.2f%%)"
+ "%@ vdb-assets: %ld, photos-assets: %ld -> difference: %.2f%% (threshold: %.2f%%)"
+ "%@[%@] Asset analysis version %d < forward compatible version (%d)"
+ "%@[%@] Asset has no analysis results in MA DB"
+ "%@[%@] Asset has no valid video embeddings in MA DB, videoEmbeddingVersion should be reset"
+ "%@[%@] Asset has valid video embeddings in MA DB but not in VSKDB, should be sync'd from MA DB to VSKDB"
+ "%@[%@] Asset imageEmbeddingVersion %d < forward compatible version (%d)"
+ "%@[%@] Asset in VSKDB but has no valid video embeddings in MA DB, should be removed from VSKDB"
+ "%@[%@] Asset not exist in VSKDB, imageEmbeddingVersion should be reset"
+ "%@[%@] Asset not exist or has incompatible imageEmbeddingVersion in Photos, should be removed from VSKDB"
+ "%@[%@] Asset not exist or has incompatible videoEmbeddingVersion in Photos, should be removed from VSKDB"
+ "%@[%@] Asset proto is expected to be MADProtoSceneAsset but is %@"
+ "%@[%@] Asset videoEmbeddingVersion %d < forward compatible version (%d)"
+ "%@[%@] Creating VSKAsset with analysis results on degraded resource"
+ "%@[%@] Failed to create VSKAsset: %@"
+ "%@[%@] Restored image embedding from asset proto"
+ "%d VSKAssets"
+ "(verifiedType = %d) OR (verifiedType = %d)"
+ "-Canceled"
+ "-DownloadThrottled"
+ "-NoResource"
+ "-SoftFailure-%d"
+ "-[VCPDatabaseWriter(BackgroundAnalysisProgressHistory) countAssetsForTaskID:totalAssets:processedAssets:]"
+ "-[VCPDatabaseWriter(Maintenance) deleteAnalysisResultsWithType:]"
+ "-[VCPDatabaseWriter(ProcessingStatus) fetchProcessingErrorCode:errorLine:taskID:localIdentifier:]"
+ "-[VCPDatabaseWriter(ProcessingStatus) queryAssetCountForTaskID:minimumAttempts:]"
+ "/AppleInternal/Library/BuildRoots/01adf19d-fba1-11ef-a947-f2a857e00a32/Library/Caches/com.apple.xbs/Sources/MediaAnalysis/Daemon/Photos/DatabaseWriter.mm"
+ "/System/AppleInternal/Library/Frameworks/HomeKit.framework/HomeKit"
+ "1("
+ "@\"MADVSKEmbeddingResults\""
+ "@\"MADVectorDatabase\""
+ "@\"MADVectorDatabaseChangeManager\""
+ "@\"NSCountedSet\""
+ "@\"VCPPhotoAnalyzerSharedContext\""
+ "@\"VSKAsset\""
+ "@120@0:8@16Q24Q32@40Q48B56@60B68@72B80@84B92@96Q104Q112"
+ "@32@0:8@16Q24"
+ "@48@0:8@16@24q32i40B44"
+ "@56@0:8@?16@24@32@?40@?48"
+ "@56@0:8@?16Q24@32@?40@?48"
+ "@64@0:8@16Q24Q32@40Q48Q56"
+ "@96@0:8@16Q24Q32Q40B48@52Q60B68@72@80@88"
+ "@[Unified] Running on photo libraries idx=%llu"
+ "A5"
+ "B16@?0@\"NSArray\"8"
+ "B40@0:8@16d24^Q32"
+ "Biome"
+ "DELETE FROM Results WHERE resultsType=(?);"
+ "DaysToComplete50SinceOSUpdate"
+ "DaysToComplete50WithFails"
+ "DaysToComplete50WithFailsSinceOSUpdate"
+ "DaysToComplete90SinceOSUpdate"
+ "DaysToComplete90WithFails"
+ "DaysToComplete90WithFailsSinceOSUpdate"
+ "DaysToComplete99SinceOSUpdate"
+ "DaysToComplete99WithFails"
+ "DaysToComplete99WithFailsSinceOSUpdate"
+ "FaceAnalysisOSMajorOfLastVersionUpdate"
+ "FaceAnalysisOSMinorOfLastVersionUpdate"
+ "Face_Analysis"
+ "Face_ImageRequest"
+ "Face_Refine"
+ "Failed to create MADVectorDatabaseChangeManager"
+ "ForceCluster"
+ "FullImageAnalysisOSMajorOfLastVersionUpdate"
+ "FullImageAnalysisOSMinorOfLastVersionUpdate"
+ "LongVideoSeconds"
+ "MADVSKDBUtil_DeepSync_VSKRebuild"
+ "MADVSKDBUtil_ImageDeepSync_PhotosAssetCount"
+ "MADVSKDBUtil_ImageDeepSync_PhotosLoop"
+ "MADVSKDBUtil_ImageDeepSync_PhotosLoop_FetchProcessedAssets"
+ "MADVSKDBUtil_ImageDeepSync_ResetVersion"
+ "MADVSKDBUtil_ImageDeepSync_VSKAssetCount"
+ "MADVSKDBUtil_ImageDeepSync_VSKLoop"
+ "MADVSKDBUtil_VideoDeepSync_MAAssetCount"
+ "MADVSKDBUtil_VideoDeepSync_PhotosAssetCount"
+ "MADVSKDBUtil_VideoDeepSync_PhotosLoop"
+ "MADVSKDBUtil_VideoDeepSync_PhotosLoop_FetchProcessedAssets"
+ "MADVSKDBUtil_VideoDeepSync_ResetVersion"
+ "MADVSKDBUtil_VideoDeepSync_VSKAssetCount"
+ "MADVSKDBUtil_VideoDeepSync_VSKLoop"
+ "MADVectorDatabaseChangeManager"
+ "MADVectorDatabaseChangeManager_Publish"
+ "MediaAnalysisOSMajorOfLastVersionUpdate"
+ "MediaAnalysisOSMinorOfLastVersionUpdate"
+ "OCRAnalysisOSMajorOfLastVersionUpdate"
+ "OCRAnalysisOSMinorOfLastVersionUpdate"
+ "OSMajorOfLastVersionUpdate"
+ "OSMinorOfLastVersionUpdate"
+ "PECAnalysisOSMajorOfLastVersionUpdate"
+ "PECAnalysisOSMinorOfLastVersionUpdate"
+ "Photo Library path %@ will be removed from known libraries due to failure to open (%@)"
+ "PhotoLibrary"
+ "PhotoLibraryClient_SignalAvailabilityWithChanges"
+ "ProcessedCount1Day"
+ "ProcessedCount1DayInteger"
+ "ProcessedCount1Month"
+ "ProcessedCount1MonthInteger"
+ "ProcessedCount1Week"
+ "ProcessedCount1WeekInteger"
+ "ProcessedPercentage1Day"
+ "ProcessedPercentage1Month"
+ "ProcessedPercentage1Week"
+ "Received requestMediaAnalysisDatabaseBackup MADRequestID %d"
+ "RunTime1Day"
+ "RunTime1Month"
+ "RunTime1Week"
+ "SELECT count(*) FROM ProcessingStatus WHERE taskID=(?) AND attempts>=(?);"
+ "SELECT totalAssetCount, processedAssetCount FROM BackgroundAnalysisProgressHistory WHERE activityID=(?) ORDER BY storeDate DESC LIMIT 1 "
+ "SceneAnalysisOSMajorOfLastVersionUpdate"
+ "SceneAnalysisOSMinorOfLastVersionUpdate"
+ "Scene_Blur"
+ "Scene_Decode"
+ "Scene_Embedding"
+ "Scene_Exposure"
+ "Scene_Rotation"
+ "Scene_Scenenet"
+ "T@\"MADVSKEmbeddingResults\",&,N,V_existingEmbeddingResults"
+ "T@\"MADVectorDatabaseChangeManager\",&,N,V_embeddingChangeManager"
+ "T@\"VSKAsset\",&,N,V_imageEmbeddingResults"
+ "TB,N,V_isEmbeddingFromComputeSync"
+ "Ts,N,V_imageEmbeddingVersion"
+ "Ts,N,V_videoEmbeddingVersion"
+ "UnifiedImageOnlySeconds"
+ "UnifiedVideoSeconds"
+ "VCPMADSceneAssetBatch_UnpackComputeSync"
+ "VUWGallery_updateForType_Scene"
+ "VerifiedType_%ld"
+ "VisualSearchAnalysisOSMajorOfLastVersionUpdate"
+ "VisualSearchAnalysisOSMinorOfLastVersionUpdate"
+ "[%@] !(__bridge CGImageRef)keyFrameResourceResults[0]; skip"
+ "[%@] !CGRectIsNormalized(change.bestPlaybackRect); skip"
+ "[%@] CGRectIsNull(change.bestPlaybackRect); skip"
+ "[%@] CMTIMERANGE_IS_INVALID(change.summaryTimeRange); skip"
+ "[%@] CMTIME_IS_INVALID(change.keyFrameTime); skip"
+ "[%@] Failed to fetch processed assets: %@\n"
+ "[%@] Failed to persist embeddings to vector database"
+ "[%@] Missing summaryResults (!attributes.count); skip"
+ "[%@] No compute sync payload generated for target stage %d (current stage %d)"
+ "[%@] No image embedding results, skip updating imageEmbeddingVersion"
+ "[%@] No video embedding results, skip updating videoEmbeddingVersion"
+ "[%@] change.activityScore %.3f, expect [0.0, 1.0]; skip"
+ "[%@] change.videoScore %.3f, expect [0.0, 1.0]; skip"
+ "[%@][%@] Existing embedding results extracted from MA DB legacy full analysis results: %@"
+ "[%@][%@] Existing embedding results extracted from compute sync: image embedding: %@ (v%d)"
+ "[%@][%@] Existing embedding results extracted from compute sync: video embedding: %@ (v%d)"
+ "[%@][%@] Existing embedding results extracted from downloaded compute sync: %@"
+ "[%@][%@] Existing embedding results fetched from vectorDB: image embedding: %@ (v%d)"
+ "[%@][%@] Existing embedding results fetched from vectorDB: video embedding: %@ (v%d)"
+ "[%@][%@] Existing image/live photo analysis %@"
+ "[%@][%@] Existing legacy analysis %@"
+ "[%@][%@] Existing movie analysis %@"
+ "[%@][%@] Failed to fetch image embedding results from vectorDB for processed asset"
+ "[%@][%@] Failed to fetch video embedding results from vectorDB for processed asset"
+ "[ComputeSync|Backfill][%@] No compute sync payload generated for target stage %d (current stage %d)"
+ "[FaceCrop] Added %lu faces to Gallery"
+ "[FaceCrop] Enrolled %lu facecrops for person (%@)"
+ "[FaceCrop] Failed to add %lu faces to Gallery - %@"
+ "[FaceCrop] Ignoring person (%@) of different verified type (%ld)"
+ "[FaceCrop] Ignoring rejection type facecrop %@"
+ "[FaceCrop] Over limit for person (%@) (%lu >= %d); ignoring additional face crops"
+ "[Face] Prepare to report CoreAnalytics for asset %@ ... "
+ "[FullCluster] Failed to obtain VUWGallery for library %@"
+ "[FullCluster] Failed to signal Photos availability state change (lastFullVUIndexClusterDate=%@, fractionOfCuratedAssetsIndexedInVUClustering=%@): %@"
+ "[FullCluster] Failed to update gallery: %@"
+ "[FullCluster] Gallery update progress: %.2f%%, isCancelled %d"
+ "[FullCluster] Signalled Photos availability state change (lastFullVUIndexClusterDate=%@, fractionOfCuratedAssetsIndexedInVUClustering=%@)"
+ "[FullCluster] Task cancelled, VU clustering incomplete"
+ "[FullCluster] Updating VU gallery under mode %d..."
+ "[FullCluster] curatedAssetCount=%lld, vuClusteredAssetCount=%lld, fractionOfCuratedAssetsIndexedInVUClustering=%f"
+ "[LegacyFailed] Failed to publish vector database changes"
+ "[LegacyFailed] Failed to retrieve MADVectorDatabaseChangeManager"
+ "[LegacyFailed] Failed to retrieve VCPPhotosAssetChangeManager"
+ "[MediaType] Failed to publish PHAssetPropertySetMediaAnalysis changes"
+ "[MediaType] Failed to publish vector database changes"
+ "[MediaType] Failed to retrieve MADVectorDatabaseChangeManager"
+ "[MediaType] Failed to retrieve VCPPhotosAssetChangeManager"
+ "[MediaType] Processing all %s assets..."
+ "[MergeAnalysis]%@ Analysis A: %@"
+ "[MergeAnalysis]%@ Analysis B: %@"
+ "[MergeAnalysis]%@ Merged analysis: %@"
+ "[NSInputStream] Expecting %d bytes but only %d bytes are available"
+ "[OCR][%@] Analysis already complete from compute sync ingestion; skip publishing"
+ "[OCR][%@] No compute sync payload generated for target stage %d (current stage %d)"
+ "[RestoreToMADB][Full] Failed to commit restores to database"
+ "[RestoreToMADB][Full][%@]"
+ "[RestoreToPhotos][Full] Failed to persist to photo library: %@"
+ "[RestoreToPhotos][Full][%@]"
+ "[RestoreToVDB][Full] Failed to persist asset embeddings to vectorDB"
+ "[RestoreToVDB][Full][%@]"
+ "[Restore][Full] Failed to fetch local identifier for cloud identifier %@ (%@); skipping entry"
+ "[Restore][Full] Failed to obtain fetch options: %@"
+ "[Restore][Full] Fetched only %d assets from Photos given %d local identifiers"
+ "[Restore][Full] No cloud identifier (%@ stored in proto); skipping entry"
+ "[Restore][Full] Restored embeddings for a batch of %zu assets from backup"
+ "[Restore][Full] Restored full results for a batch of %zu assets from backup"
+ "[ResumePaused][%@] Failed to publish results"
+ "[ResumePaused][%@] Failed to publish vector database changes"
+ "[ResumePaused][%@] Failed to retrieve MADVectorDatabaseChangeManager"
+ "[ResumePaused][%@] Failed to update vector database changes"
+ "[Scene] Failed to create MADVectorDatabaseChangeManager"
+ "[Scene] Failed to update vectorDB; skip updating Photos embedding version"
+ "[Scene] Prepare to report CoreAnalytics for asset %@ ... "
+ "[Scene] Preparing assets done"
+ "[Subsampled] Failed to create MADVectorDatabaseChangeManager"
+ "[Subsampled] Failed to create VCPPhotosAssetChangeManager"
+ "[Subsampled] Failed to publish PHAssetPropertySetMediaAnalysis changes"
+ "[Subsampled] Failed to publish vector database changes"
+ "[Unified] Initiating processing on single provided photo library"
+ "[Unified] Unsupported taskID %llu given to task init, aborting"
+ "[VCPAssetMaintenanceTask] Failed to sync VSK database (non-fatal)"
+ "[VCPDatabaseWriter] Failed to remove checkpoint_with_sticky_failure timestamp for %@"
+ "[VCPDatabaseWriter] Failed to remove complete_with_sticky_failure timestamp for %@"
+ "[VCPDatabaseWriter] Failed to set major os version of analysis version update %lld for %@"
+ "[VCPDatabaseWriter] Failed to set minor os version of analysis version update %lld for %@"
+ "[VCPDatabaseWriter] Skip storing image embedding result in MA DB"
+ "[VCPDatabaseWriter] Skip storing key frame resource result in MA DB"
+ "[VCPPhotosMaintenanceProcessingTask][RemoveImageEmbedding][%@]"
+ "[VCPSystemMonitor] Attempted disablement when not registered"
+ "[VCPSystemMonitor] Attempted enablement when already registered"
+ "[VCPSystemMonitor] Failed to register during enablement"
+ "[VSKDBChangeManager] Failed to initialize for %@"
+ "[VSKDBChangeManager] Failed to publish %@: %@"
+ "[VSKDBChangeManager] Finished publishing %@ (%d)"
+ "[VSKDBChangeManager] Publishing %@"
+ "[VSKDBChangeManager][%@]"
+ "[VSKDBMigration] Failed to signal Photos availability state change (resetLastFullVUIndexClusterDate=%d, fractionOfCuratedAssetsIndexedInVUClustering=%@): %@"
+ "[VSKDBMigration] Signalled Photos availability state change (resetLastFullVUIndexClusterDate=%d, fractionOfCuratedAssetsIndexedInVUClustering=%@)"
+ "[VSKDBUtil][DeepSyncEligibility|ImageEmbedding]"
+ "[VSKDBUtil][DeepSyncEligibility|VideoEmbedding]"
+ "[VSKDBUtil][DeepSync|ImageEmbedding]"
+ "[VSKDBUtil][DeepSync|VideoEmbedding]"
+ "[VisualSearch][%@] No compute sync payload generated for target stage %d (current stage %d)"
+ "__prepare"
+ "__publishWithPhotosChangeManager:embeddingChangeManager:"
+ "_assetsWithoutValidVideoEmbeddingVersionInPhotoLibrary:withinProcessedAssetsInVDB:"
+ "_calculateCompleteDateWithEvent:progress:taskID:checkpoint:featureAvailableCheck:database:completeThreshold:withStickyFailure:checkpointTimestampKey:currentDate:startDate:"
+ "_createVideoVSKAssetWithLocalIdentifier:analysisHeader:analysisResults:"
+ "_deepSyncImageEmbeddingsWithPhotoLibrary:imageVSKAssetCount:cancelBlock:"
+ "_deepSyncVideoEmbeddingsWithPhotoLibrary:videoVSKAssetCount:cancelBlock:"
+ "_embeddingChangeManager"
+ "_existingEmbeddingResults"
+ "_handleAssetsMissingVideoEmbedding:photoLibrary:cancelBlock:"
+ "_ignoreRejections"
+ "_imageEmbeddingResults"
+ "_isEmbeddingFromComputeSync"
+ "_limitPerPerson"
+ "_persistAnalysisProtoBatch:database:embeddingChangeManager:fullResultRestoreCount:embeddingRestoreCount:"
+ "_persistFullAnalysisResultsForAnalysisProtoBatch:database:"
+ "_prepareBGSTCheckpointWithEvent:taskID:checkpoint:featureAvailableCheck:database:checkpointTimestampKey:currentDate:"
+ "_processFetchedAssets:withProgressReport:embeddingChangeManager:andChangeManager:"
+ "_processLimitTracker"
+ "_publishEmbeddingResultsWithPhotoLibrary:photosChangeBatch:"
+ "_publishPhotosResultsWithPhotoLibrary:photosChangeBatch:"
+ "_publishProcessingStatus"
+ "_removeImageEmbeddingFromMADBForPhotoLibrary:"
+ "_reportCoreAnalyticsWithEntry:"
+ "_resetVersionForAssetsMissingImageEmbedding:photoLibrary:"
+ "_sharedContext"
+ "_shouldPerformImageEmbeddingDeepSyncWithPhotoLibrary:threshold:imageVSKAssetCount:"
+ "_shouldPerformVideoEmbeddingDeepSyncWithPhotoLibrary:threshold:videoVSKAssetCount:"
+ "_signalPhotosResetAvailabilityWithError:"
+ "_successfullyRegistered"
+ "_taskProviderTypes"
+ "_vectorDatabase"
+ "_verifiedType"
+ "addPendingEmbeddingResults:"
+ "assetCountForEmbeddingType:error:"
+ "checkpointWithStickyFailureTimestampQueryKey"
+ "com.apple.mediaanalysis.changemanagement.vector"
+ "com.apple.mediaanalysis.sharedinstance.vskchangemanager"
+ "com.apple.mediaanalysisd.AnalysisPerAssetInfo"
+ "countAssetsForTaskID:totalAssets:processedAssets:"
+ "countForObject:"
+ "countStickyFailedQueryKey"
+ "deleteAnalysisResultsWithType:"
+ "embeddingChangeManager"
+ "entryWithAsset:previousStatus:previousAttempts:andLastAttemptDate:previousErrorCode:previousErrorLine:"
+ "entryWithAsset:previousStatus:previousAttempts:lastAttemptDate:analysisTypes:imageOnlyAnalysis:existingAnalysis:isAnalysisFromComputeSync:existingEmbeddingResults:isEmbeddingFromComputeSync:downloadResource:needDownload:acceptableResources:previousErrorCode:previousErrorLine:"
+ "existingEmbeddingResults"
+ "fetchAssetsForPerson:options:"
+ "fetchAssetsWithEmbeddingType:limit:offset:error:"
+ "fetchAssetsWithLocalIdentifiers:embeddingType:error:"
+ "fetchFacesInAssets:options:"
+ "fetchOptionsForMediaProcessingTaskID:priority:algorithmVersion:sceneConfidenceThreshold:processed:exactVersionMatch:error:"
+ "fetchProcessedAssetsForPhotoLibrary:taskID:"
+ "fetchProcessingErrorCode:errorLine:taskID:localIdentifier:"
+ "fractionOfCuratedAssetsIndexedInVUClustering"
+ "full"
+ "fullAnalysisResults"
+ "i40@0:8Q16^Q24^Q32"
+ "i44@0:8@16@24B32^@36"
+ "i44@0:8@16B24d28@?36"
+ "i52@0:8@16@24B32@36@?44"
+ "i56@0:8@16@24@32^Q40^Q48"
+ "imageEmbeddingAsset"
+ "imageEmbeddingResults"
+ "imageEmbeddingVSKAsset"
+ "imageEmbeddingVSKAssetWithLocalIdentifier:"
+ "initWithAsset:previousStatus:previousAttempts:andLastAttemptDate:previousErrorCode:previousErrorLine:"
+ "initWithAsset:previousStatus:previousAttempts:lastAttemptDate:analysisTypes:imageOnlyAnalysis:existingAnalysis:isAnalysisFromComputeSync:existingEmbeddingResults:isEmbeddingFromComputeSync:downloadResource:needDownload:acceptableResources:previousErrorCode:previousErrorLine:"
+ "initWithCancelBlock:taskProviderTypes:options:progressHandler:andCompletionHandler:"
+ "initWithPhotoLibrary:gallery:verifiedType:limitPerPerson:ignoreRejections:"
+ "initWithSourceIdentifier:"
+ "isEmbeddingFromComputeSync"
+ "lastFullVUIndexClusterDate"
+ "mad_fetchImageEmbeddingForPhotosAsset:"
+ "mad_fetchVideoEmbeddingForPhotosAsset:"
+ "mad_imageAssetWithLocalIdentifier:mediaAnalysisResults:error:"
+ "mad_needsImageEmbeddingProcessing"
+ "mad_needsVideoEmbeddingProcessing"
+ "mad_performChangesAndWait:activity:cancelBlock:extendTimeoutBlock:error:"
+ "mad_sharedImageEmbeddingVersionProviderWithPhotoLibrary:"
+ "mad_sharedVersionProviderForBackupWithPhotoLibrary:"
+ "mad_sharedVideoEmbeddingVersionProviderWithPhotoLibrary:"
+ "mad_videoAssetWithLocalIdentifier:mediaAnalysisResults:error:"
+ "payloadDataForAsset:targetStage:embeddingResults:fullAnalysisResults:"
+ "progressPercentageWithStickyFailureQueryKey"
+ "publishAnalysis:forAsset:database:embeddingChangeManager:"
+ "publishPendingChangesWithCancelBlock:"
+ "queryAssetCountForTaskID:minimumAttempts:"
+ "removeEmbeddingsWithLocalIdentifiers:embeddingType:error:"
+ "removeObjectsInArray:"
+ "requestMediaAnalysisDatabaseBackup:photoLibraryURL:options:reply:"
+ "resetLastFullVUIndexClusterDate"
+ "resultsFromAnalysis:imageEmbeddingVersion:videoEmbeddingVersion:asset:imageOnly:"
+ "resultsWithImageEmbedding:imageEmbeddingVersion:videoEmbeddingAsset:videoEmbeddingVersion:"
+ "setEmbeddingChangeManager:"
+ "setExistingEmbeddingResults:"
+ "setFractionOfCuratedAssetsIndexedInVUClustering:"
+ "setImageEmbedding:version:"
+ "setImageEmbeddingResults:"
+ "setImageEmbeddingResultsFromVSKAsset:imageEmbeddingVersion:"
+ "setIsEmbeddingFromComputeSync:"
+ "setLastFullVUIndexClusterDate:"
+ "setResetLastFullVUIndexClusterDate:"
+ "setVideoEmbedding:version:"
+ "signalAvailabilityWithChanges:error:"
+ "signalPhotosFeatureAvailabilityChangesWithVUWGallery:"
+ "sticky-failed"
+ "syncWithPhotoLibrary:ignoreExpiration:threshold:cancelBlock:"
+ "taskWithCancelBlock:taskID:options:progressHandler:andCompletionHandler:"
+ "taskWithPhotoLibrary:gallery:verifiedType:limitPerPerson:ignoreRejections:"
+ "unsignedLongValue"
+ "updateAsset:analysis:imageOnly:vskResults:"
+ "updateAsset:analysis:imageOnly:vskResults:cancelBlock:"
+ "updateAssetWithLocalIdentifier:analysis:"
+ "updateForType:withVectorStore:mode:progressHandler:error:"
+ "updateImageAsset:analysis:imageOnly:vskResults:"
+ "updateMovieAsset:analysis:imageOnly:vskResults:"
+ "v32@?0@\"PHCloudIdentifier\"8@\"VCPProtoAssetAnalysis\"16^B24"
+ "v40@?0@\"NSDate\"8q16^q24^q32"
+ "v68@0:8@16Q24Q32B40@44@52@60"
+ "vcp_analysisDescriptionWithResultDetails:"
+ "videoEmbeddingAsset"
+ "videoEmbeddingVSKAsset"
+ "videoEmbeddingVSKAssetWithLocalIdentifier:mediaAnalysisResults:"
- "   [%@] Analysis already complete from compute sync ingestion; skip publishing"
- "  Asset analysis is missing cloud identifier; skipping entry"
- "  Failed to commit restores to database"
- "  Failed to convert cloud identifier %@ to local identifier (%@); skipping entry"
- "  Restored %zu/%zu full analysis records"
- "  [%@] Existing version (%d) >= Backup'd analysis version (%d); skipping entry"
- "  [%@] Failed to convert asset analysis; skipping entry"
- "  [%@] Failed to restore analysis to database"
- "%@ Cancelled during looping MADB"
- "%@ Cancelled during looping VSKDB"
- "%@ Database content is different significantly %.2f%% (>%.2f%%)"
- "%@ Failed to analyze key faces from assets  - %@"
- "%@ Failed to create VSKAsset"
- "%@ Failed to query VSK asset count: %@"
- "%@ Failed to query next asset"
- "%@ Failed to sync VSK database (non-fatal); Skipping - %@"
- "%@ Failed to update vector database with %lu localIdentifiers: %@"
- "%@ Finished ..."
- "%@ Inserting %lu assets from MADB ... %@"
- "%@ Missing embedding data; skipping"
- "%@ Preparing VSKAsset ..."
- "%@ Stage 1 - VSKLoop finished"
- "%@ Stage 2 - MALoop finished"
- "%@ Stage 3 - Rebuild finished"
- "%@ Storing existing analysis results from compute sync into MA DB"
- "%@ vdb-embeddings: %ld, vdb-assets: %ld, madb-assetsWithImageEmbeddings: %ld, madb-assetsWithVideoEmbeddings: %ld -> (difference: %.2f%%)"
- "%ld"
- "%lu assets"
- "%lu localIdentifiers"
- "(verifiedType = %ld) OR (verifiedType = %ld)"
- "-[VCPDatabaseWriter(ProcessingStatus) fetchProcessingErrorCode:errorLine:taskID:localIndentifier:]"
- "/AppleInternal/Library/BuildRoots/74a3b953-bbbb-11ef-9ee5-7675e0905095/Library/Caches/com.apple.xbs/Sources/MediaAnalysis/Daemon/Photos/DatabaseWriter.mm"
- "@\"VCPClientHandler\""
- "@100@0:8@16Q24Q32Q40B48@52@60Q68@76@84@92"
- "@108@0:8@16Q24Q32@40Q48B56@60B68@72B80@84Q92Q100"
- "A("
- "BlacklistedAssetsCount"
- "CurrentAnalysisVersion"
- "DaysSinceCurrentAnalysisVersionEstablished"
- "DaysSinceDatabaseEstablished"
- "Failed to update vectorDB; skip updating Photos embedding version - %@"
- "LibraryType"
- "MADMaintenanceBackfill_Image_PackComputeSyncPayload"
- "MADMaintenanceBackfill_Movie_PackComputeSyncPayload"
- "MADVectorDatabaseUtilities_DeepSync_BuildDB"
- "MADVectorDatabaseUtilities_DeepSync_MALoop"
- "MADVectorDatabaseUtilities_DeepSync_VSKLoop"
- "MADVectorDatabaseUtilities_Update_FetchEmbeddings"
- "MADVectorDatabaseUtilities_Update_FetchProperties"
- "MADVectorDatabaseUtilities_updateWithAssetsEmbeddings"
- "NumLivePhotosFullResource"
- "NumMoviesFullResource"
- "NumPhotosFullResource"
- "NumScheduleSinceCurrentAnalysisVersionEstablished"
- "NumScheduleSinceDatabaseEstablished"
- "PercentageLivePhotoFullResource"
- "PercentageLivePhotoPartialResource"
- "PercentageMovieFullResource"
- "PercentageMoviePartialResource"
- "PercentagePhotoFullResource"
- "PercentagePhotoPartialResource"
- "PhotoLibraryClient_SignalAvailabilityStateChange"
- "PhotosLibraryDatabaseSize"
- "Processing all %s assets..."
- "Q5"
- "RunTime1DayInteger"
- "RunTime1MonthInteger"
- "RunTime1WeekInteger"
- "SPL"
- "T@\"NSDictionary\",&,N,V_embeddingResults"
- "Ti,N,V_imageEmbeddingVersion"
- "Ti,N,V_videoEmbeddingVersion"
- "TotalAnalyzingTimeInMinutes"
- "TotalAnalyzingTimeInSeconds"
- "VCPPhotosAssetChangeManager_LegacyImage_PackComputeSyncPayload"
- "VCPPhotosAssetChangeManager_LegacyMovie_PackComputeSyncPayload"
- "VSKDBUtil_ResetAnalysisVersion"
- "[%@] Failed to serialize analysis results as compute sync payload"
- "[%@] Failed to serialize image analysis results as compute sync payload"
- "[%@] Failed to serialize movie analysis results as compute sync payload"
- "[ComputeSync|Backfill][%@] Failed to query full analysis results, unable to generate payload"
- "[ComputeSync|Backfill][%@] Failed to serialize full analysis results as payload"
- "[ComputeSync|Backfill][%@] No full analysis results available, unable to generate payload"
- "[ComputeSync|Backfill][%@] Unprocessed for full analysis, unable to generate payload"
- "[FullCluster] VUWGalleryUpdateTypeScene not supported on this platform"
- "[Full] Evaluating %d recently captured assets"
- "[Scene][Embedding] Persisting VSKAssets ..."
- "[VCPAssetMaintenanceTask] Failed to sync VSK database (non-fatal) - %@"
- "[VSKDBMigration] Failed to signal Photos availability state change: %@"
- "[VSKDBMigration] Signalled Photos availability state change"
- "[VSKDBUtil] Cancelled during _updateWithLocalIdentifiers"
- "[VSKDBUtil] Cancelled during updateWithAssetsEmbeddings"
- "[VSKDBUtil] Failed to fetch analysis properties for %@"
- "[VSKDBUtil] Failed to fetch analysis results for %@"
- "[VSKDBUtil] Failed to reset mediaAnalysisImageVersion and imageEmbeddingVersion (%lu assets) - %@"
- "[VSKDBUtil] Failed to update embeddings for %@; skipping - %@"
- "[VSKDBUtil] No assets embeddings to be inserted/updated"
- "[VSKDBUtil] Resetting mediaAnalysisImageVersion and imageEmbeddingVersion (%lu assets)"
- "[VSKDBUtil] Updated vectorDatabase with %@"
- "[VSKDBUtil] Updating with %@"
- "[VSKDBUtil][%@] Analysis missing Image Embedding"
- "[VSKDBUtil][%@] Analysis version %d < min version for forward compatible embedding (%d)"
- "[VSKDBUtil][%@] Failed analysis missing Image Embedding (tracked)"
- "[VSKDBUtil][%@] No analysis record"
- "[VSKDBUtil][%@] No full analysis results"
- "[VSKDBUtil][%@] Using analysis results on degraded resource"
- "[VSKDBUtil][DeepSync]"
- "_analysisSpecificFetchPropertySets"
- "_calculateCompleteDateWithEvent:progress:taskID:checkpoint:featureAvailableCheck:database:completeTimestampKey:completeThreshold:checkpointTimestampKey:currentDate:startDate:"
- "_clientHandler"
- "_computeSyncPayloadForAsset:fromDatabase:"
- "_deepSyncWithPhotoLibrary:cancelBlock:error:"
- "_embeddingResults"
- "_prepareBGSTCheckpointWithEvent:taskID:checkpoint:featureAvailableCheck:database:databaseModified:checkpointTimestampKey:currentDate:"
- "_processFetchedAssets:withProgressReport:andChangeManager:"
- "_reportCoreAnalyticsWithEntry:analyticManager:"
- "_signalPhotosAvailabilityStateChangeWithError:"
- "_updateWithLocalIdentifiers:photoLibrary:cancelBlock:error:"
- "assetCountWithError:"
- "checkpointWithFailureTimestampQueryKey"
- "com.apple.mediaanalysisd.FullAnalysisPerAssetInfo"
- "com.apple.mediaanalysisd.fullanalysisoverallprogress"
- "countFailedQueryKey"
- "database/Photos.sqlite"
- "embeddingCountWithError:"
- "embeddingResults"
- "entryWithAsset:previousStatus:previousAttempts:lastAttemptDate:analysisTypes:imageOnlyAnalysis:existingAnalysis:isAnalysisFromComputeSync:downloadResource:needDownload:acceptableResources:previousErrorCode:previousErrorLine:"
- "fetchAllAssetsWithLimit:offset:error:"
- "fetchAssetsWithLocalIdentifiers:error:"
- "fetchProcessingErrorCode:errorLine:taskID:localIndentifier:"
- "i40@0:8@16@?24^@32"
- "i48@0:8@16@24@?32^@40"
- "i52@0:8@16B24d28@?36^@44"
- "iCPL"
- "imageAnalysisComputeSyncPayloadFromLegacyDictionary:"
- "initWithAsset:previousStatus:previousAttempts:lastAttemptDate:analysisTypes:imageOnlyAnalysis:existingAnalysis:isAnalysisFromComputeSync:downloadResource:needDownload:acceptableResources:previousErrorCode:previousErrorLine:"
- "initWithCancelBlock:options:progressHandler:andCompletionHandler:"
- "initWithStringIdentifier:vectors:attributes:payload:"
- "mad_assetsWithLocalIdentifier:mediaAnalysisResults:"
- "mad_attributesWithEmbeddingVersion:"
- "mad_localIdentifierForCloudIdentifier:error:"
- "mad_performChangesAndWait:cancelBlock:extendTimeoutBlock:error:"
- "mad_stringIdentifierFromLocalIdentifier:embeddingType:"
- "movieAnalysisComputeSyncPayloadFromLegacyDictionary:"
- "performFullProcessing:"
- "progressPercentageWithFailureQueryKey"
- "removeEmbeddingsWithLocalIdentifiers:error:"
- "setEmbeddingResults:"
- "signalAvailabilityStateDidChangeWithError:"
- "syncWithPhotoLibrary:ignoreExpiration:threshold:cancelBlock:error:"
- "updateAsset:withAnalysis:imageOnly:"
- "updateImageAsset:withAnalysis:imageOnly:"
- "updateMovieAsset:withAnalysis:imageOnly:"
- "updateWithAssetsEmbeddings:photoLibrary:cancelBlock:error:"
- "v76@0:8@16Q24Q32B40@44^B52@60@68"
- "vcp_fullAnalysisTypesForAssetType:"
- "vcp_libraryScaleShortDescription"
- "vcp_processedAssetCountForTaskID:"
- "wellKnownPhotoLibraryIdentifier"
- "wellKnown_%ld"

```
