## locationd

> `/usr/libexec/locationd`

```diff

-2890.4.12.1.4
-  __TEXT.__text: 0x1a3b4a8
+2890.8.4.0.0
+  __TEXT.__text: 0x1a45754
   __TEXT.__auth_stubs: 0x6920
-  __TEXT.__objc_stubs: 0x3b8c0
+  __TEXT.__objc_stubs: 0x3b940
   __TEXT.__init_offsets: 0x604
-  __TEXT.__objc_methlist: 0x241ac
-  __TEXT.__const: 0x14cad1
-  __TEXT.__gcc_except_tab: 0xb5fac
-  __TEXT.__objc_methname: 0x540d8
+  __TEXT.__objc_methlist: 0x241ec
+  __TEXT.__const: 0x14cc41
+  __TEXT.__gcc_except_tab: 0xb630c
+  __TEXT.__objc_methname: 0x54232
   __TEXT.__objc_classname: 0x74eb
-  __TEXT.__objc_methtype: 0x3da9b
-  __TEXT.__cstring: 0x1be871
-  __TEXT.__oslogstring: 0x23d2bd
+  __TEXT.__objc_methtype: 0x3dac5
+  __TEXT.__cstring: 0x1bf13a
+  __TEXT.__oslogstring: 0x23dd8e
   __TEXT.__constg_swiftt: 0xec
   __TEXT.__swift5_typeref: 0xad
   __TEXT.__swift5_fieldmd: 0x30
   __TEXT.__swift5_types: 0x10
   __TEXT.__dlopen_cstrs: 0xa0
   __TEXT.__ustring: 0x2ee
-  __TEXT.__unwind_info: 0x5ea84
+  __TEXT.__unwind_info: 0x5eb78
   __TEXT.__eh_frame: 0x110
   __DATA_CONST.__linkguard: 0x15
   __DATA.__auth_got: 0x34a8
   __DATA.__got: 0x1b88
   __DATA.__auth_ptr: 0x2e0
-  __DATA.__const: 0xae720
-  __DATA.__cfstring: 0x35ac0
+  __DATA.__const: 0xae7a8
+  __DATA.__cfstring: 0x35c00
   __DATA.__objc_classlist: 0x12d8
   __DATA.__objc_catlist: 0xb8
   __DATA.__objc_protolist: 0xd48
   __DATA.__objc_imageinfo: 0x8
-  __DATA.__objc_const: 0x52150
-  __DATA.__objc_selrefs: 0x12050
+  __DATA.__objc_const: 0x521a0
+  __DATA.__objc_selrefs: 0x12098
   __DATA.__objc_protorefs: 0x9f0
-  __DATA.__objc_classrefs: 0x1d88
+  __DATA.__objc_classrefs: 0x1d80
   __DATA.__objc_superrefs: 0x1148
   __DATA.__objc_ivar: 0x3080
   __DATA.__objc_data: 0xbda0
-  __DATA.__data: 0x612aa
-  __DATA.__objc_intobj: 0x2610
+  __DATA.__data: 0x612c2
+  __DATA.__objc_intobj: 0x2640
   __DATA.__objc_arraydata: 0x1220
   __DATA.__objc_dictobj: 0x988
   __DATA.__objc_floatobj: 0x70

   - /usr/lib/swift/libswiftSystem.dylib
   - /usr/lib/swift/libswiftXPC.dylib
   - /usr/lib/swift/libswiftos.dylib
-  UUID: 7421E670-4C0F-3FB4-8856-989A6F905BDB
-  Functions: 86417
-  Symbols:   3160
-  CStrings:  83614
+  UUID: 707715DA-1CB7-398E-BF77-44972B6E21E6
+  Functions: 86459
+  Symbols:   3159
+  CStrings:  83738
 
Symbols:
- _OBJC_CLASS_$_HKAnchoredObjectQuery
CStrings:
+ "#Warning Table is not valid so we can't select all LOIs"
+ "#imag,isMultiConstellationFix,%d,fixValid,%d,prevFixValid,%d,numBlockedFix,%d"
+ "#imag,multiCons early exit,tracked,%d"
+ "#imag,numGpsQzss,%d,numGlo,%d,numGal,%d,numBds,%d,numNic,%d"
+ "#imag,result,%{public}d,deviceResult,%{public}d,unkCount,%{public}d,authCount,%{public}d,spoofedCount,%{public}d,buildTimeOk,%{public}d,eeTimeOk,%{public}d,pyTimeOk,%{public}d,simMode,%{public}d,stfAuth,%{public}d,stfFake,%{public}d,multiConstFake,%{public}d"
+ "#imag,yield gated,stfAuth,%{public}d,stfFake,%{public}d,build,%{public}d,multiConstFake,%{public}d"
+ "-[CLKappaNotifierAdapter collect:isLocal:]"
+ "-[CLKappaNotifierAdapter companionHeartbeat:]"
+ "-[CLKappaNotifierAdapter dontcollect:isLocal:]"
+ "/AppleInternal/Library/BuildRoots/1ea38c4e-abb9-11ee-8cd5-6ee040a82a90/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.3.Internal.sdk/usr/local/include/boost/geometry/algorithms/detail/throw_on_empty_input.hpp"
+ "/AppleInternal/Library/BuildRoots/1ea38c4e-abb9-11ee-8cd5-6ee040a82a90/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.3.Internal.sdk/usr/local/include/boost/uuid/detail/random_provider_posix.ipp"
+ "/AppleInternal/Library/BuildRoots/1ea38c4e-abb9-11ee-8cd5-6ee040a82a90/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.3.Internal.sdk/usr/local/include/boost/uuid/string_generator.hpp"
+ "/AppleInternal/Library/BuildRoots/1ea38c4e-abb9-11ee-8cd5-6ee040a82a90/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.3.Internal.sdk/usr/local/include/google/protobuf/repeated_field.h"
+ "/AppleInternal/Library/BuildRoots/1ea38c4e-abb9-11ee-8cd5-6ee040a82a90/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.3.Internal.sdk/usr/local/include/google/protobuf/wire_format_lite_inl.h"
+ "1.4.21"
+ "20:03:42"
+ "20:20:11"
+ "Background Escalation Manager, Appending to ActivityAction : recoveryStart : %{public}f, recoveryEnd : %{public}f"
+ "Background Escalation Manager, HRRecovery startTime set to %{public}f"
+ "Background Stairs Escalation Manager, HRRecovery endTime set to %{public}f"
+ "Background Stairs Escalation Manager, HRRecovery startTime set to %{public}f"
+ "Background Stairs Escalation Manager, escalation end time : %{public}f, escalation duration : %{public}f, total number of floors ascended : %{public}u, recoveryStart : %{public}f, recoveryEnd : %{public}f"
+ "Background escalation manager stopped tracking escalation,fRecoveryStartTime,%{public}f,fRecoveryEndTime,%{public}f"
+ "CELL_LOC: ignoring cell since local and network locations disagree."
+ "CLSensorMonitor - PhysicalActivityEvent values,startTime,%{public}.8f,eventType,%{private}ld,action,%{private}ld,reason,%{public}ld,workoutType,%{public}ld,recoveryStart,%{private}.8f,recoveryEnd,%{private}.8f"
+ "Invalid Marty AOP config %{public}u: %{public}.2f"
+ "Invalid Marty AOP configuration"
+ "Invalid Marty configuration: AOP count = %lu"
+ "Jan  5 2024"
+ "Jan  5 2024 20:23:12"
+ "MartyAOP"
+ "MicroLocationsAnalyticsNumberOfDaysForLoiValidity"
+ "Missing Marty AOP OTA configuration: using in-system defaults"
+ "MotionPacket"
+ "PlatformNotSupported"
+ "Resting hr sample %f"
+ "SafetyCompanionHeartbeat"
+ "SignificantLocationsDisabled"
+ "VO2Max Background Escalation, HRRecovery startTime,%{public}f,endTime,%{public}f"
+ "Walking HR sample %f"
+ "all advertisements kept in file"
+ "arm client %d locally armed bitmap %d"
+ "arm remote %d remote armed bitmap %d"
+ "arming for client %d"
+ "arming for client %d %d"
+ "arming igneous"
+ "arming kappa"
+ "arming marty %d"
+ "auto CLMicroLocationDatabase::select(MemberFn, Args &&...) [Table = CLMicroLocationRecordingEventsTable, MemberFn = std::vector<std::string> (CLMicroLocationRecordingEventsTable::*)(const std::string &, unsigned int), Args = <const std::string &, unsigned int &>]"
+ "bool CLGnssSimulationAndSpoofingMonitor::isInsufficientMulticonstellationFix(const GNSS::PerEpochData &)"
+ "bool getCellLocationWhenLocalAndRemoteDiffer(const std::string &, CLDaemonLocation &, const CLDaemonLocation &)"
+ "cannot access timestamps, turning everything off"
+ "checking remotely armed clients for timeout %d"
+ "collect %d %d %d %d %d %d %d %d"
+ "collect:isLocal:"
+ "com.apple.MicroLocation.ModelLOITypes"
+ "com.apple.clx.cellloc.integrityCrosscheck"
+ "companionHeartbeat:"
+ "constructOverrideClientBitset %d %d %d %d %d %d %d"
+ "creating advertisements file %@"
+ "crosscheckNotAvailable"
+ "disarm client %d locally armed bitmap %d"
+ "disarm remote %d remote armed bitmap %d"
+ "disarming for client %d"
+ "disarming for client %d %d"
+ "disarming igneous"
+ "disarming marty %d"
+ "dontcollect %d %d %d %d %d %d %d %d"
+ "dontcollect:isLocal:"
+ "failed to get dictionary"
+ "failedCrossscheck"
+ "forceCompanionHeartbeat"
+ "foundAirPlay"
+ "foundHome"
+ "foundWork"
+ "handleMartyBicycleCollect:service:account:fromID:context:"
+ "handleMartyBicycleStop:service:account:fromID:context:"
+ "handleMartyCollect:service:account:fromID:context:"
+ "handleMartyStop:service:account:fromID:context:"
+ "handleSafetyCompanionHeartbeat:service:account:fromID:context:"
+ "heartbeat timer configured to use %d seconds"
+ "int CLKappaNotifier::getLocalHeartbeatTimerSeconds()"
+ "int CLKappaNotifier::getRemoteTimeoutSeconds()"
+ "invald mode switch"
+ "invalid settings"
+ "kCompanionCollect %d %p %d %d %d %d/%d %d %d"
+ "kCompanionStop %d %p %d %d %d %d/%d %d %d"
+ "kappa timed out"
+ "m apart"
+ "marty timed out"
+ "martyImpactThreshold"
+ "martyIsBicycle"
+ "martyRotationThreshold"
+ "multicon_fail"
+ "nonWaking"
+ "not forwarding igneous arming"
+ "not forwarding igneous disarming"
+ "nothing to send, returning"
+ "numShortAudio"
+ "passedCrosscheck"
+ "received arm client from AOP"
+ "received disarm client from AOP"
+ "received heartbeat from companion"
+ "received kAOPArmClient"
+ "received kAOPDisarmClient"
+ "received marty mode switch from AOP"
+ "receiving heartbeat %@"
+ "refusing to arm logging devices for marty/igneous"
+ "refusing to collect, igneous not allowed"
+ "refusing to collect, kappa not allowed"
+ "refusing to collect, marty not allowed"
+ "remoteTimeout"
+ "sending heartbeat for %d"
+ "setHeartRateRecoveryEndTime:"
+ "setHeartRateRecoveryStartTime:"
+ "setting dictionary %@"
+ "setting heartbeat to %d seconds"
+ "shortAudioMaxPulseThreshold"
+ "shortAudioMet"
+ "shortAudioNumThreshold"
+ "shortAudioPeakPressureThreshold"
+ "shouldEnableMarty, %{public}u, %{public}u, %{public}u, %{public}u"
+ "std::vector<std::string> CLMicroLocationRecordingEventsTable::selectAllRecordingLOITypes(const std::string &, uint32_t)"
+ "tell the companion to collect for %d msgType %d"
+ "tell the companion to stop collecting for %d msgType %d"
+ "timeout fClientArmedRemotely %d"
+ "timeout seconds %d"
+ "turning off heartbeat"
+ "uint8_t CLKappaNotifier::constructOverrideClientBitset(CMSPU::Safety::Command::OverrideClient, bool)"
+ "unexpected client mode"
+ "unexpected message"
+ "updating heartbeat timestamps %d"
+ "v28@0:8{OverrideClient=CBBBBBBB}16B24"
+ "v324@0:8i16(NotificationData={MediatedMotionActivity=d{CLMotionActivity=iiiiiidBfdBiddii{?=b1b1b1b1b1}iidQi}i{CLNatalieFeatures=fffffffiB}qqqBB[16C]}{MotionOverride=i{CLMotionActivity=iiiiiidBfdBiddii{?=b1b1b1b1b1}iidQi}q{WorkoutSettings=[16C][16C][16C]qq(WorkoutAttrib={SwimAttrib=qd}Q){FitnessPlusInfo=B[64c]q}Q}}{WorkoutEvent=ddqd{CLWorkoutSessionDetails=idqQ}{WorkoutSettings=[16C][16C][16C]qq(WorkoutAttrib={SwimAttrib=qd}Q){FitnessPlusInfo=B[64c]q}Q}}{IndoorOutdoorUpdate=dqq}{ActivityEvent=dqqqqdd})20"
+ "v32@0:8r^i16r^(NotificationData={MediatedMotionActivity=d{CLMotionActivity=iiiiiidBfdBiddii{?=b1b1b1b1b1}iidQi}i{CLNatalieFeatures=fffffffiB}qqqBB[16C]}{MotionOverride=i{CLMotionActivity=iiiiiidBfdBiddii{?=b1b1b1b1b1}iidQi}q{WorkoutSettings=[16C][16C][16C]qq(WorkoutAttrib={SwimAttrib=qd}Q){FitnessPlusInfo=B[64c]q}Q}}{WorkoutEvent=ddqd{CLWorkoutSessionDetails=idqQ}{WorkoutSettings=[16C][16C][16C]qq(WorkoutAttrib={SwimAttrib=qd}Q){FitnessPlusInfo=B[64c]q}Q}}{IndoorOutdoorUpdate=dqq}{ActivityEvent=dqqqqdd})24"
+ "void CLKappaNotifier::armSafetyClient(CMSPU::Safety::Command::OverrideClient *)"
+ "void CLKappaNotifier::companionHeartbeat(NSData *)"
+ "void CLKappaNotifier::disarmSafetyClient(CMSPU::Safety::Command::OverrideClient *)"
+ "void CLKappaNotifier::locallyArmedClientHeartbeat()"
+ "void CLKappaNotifier::onAOP(const CLMotionCoprocessorInterface::NotificationData *)"
+ "void CLKappaNotifier::onCompanionCollect(CMSPU::Safety::Command::OverrideClient &, bool)"
+ "void CLKappaNotifier::onSlowTimer()"
+ "void CLKappaNotifier::remoteArmedClientTimeout()"
+ "void CLKappaNotifier::stopCompanionCollect(CMSPU::Safety::Command::OverrideClient &, bool)"
+ "void CLKappaNotifier::tellCompanionToArm(CMMotionCoprocessorReply::SafetyArmClient *)"
+ "void CLKappaNotifier::tellCompanionToArm(CMMotionCoprocessorReply::SafetyArmClient *)_block_invoke"
+ "void CLKappaNotifier::tellCompanionToDisarm(CMMotionCoprocessorReply::SafetyDisarmClient *)"
+ "void CLKappaNotifier::tellCompanionToDisarm(CMMotionCoprocessorReply::SafetyDisarmClient *)_block_invoke"
+ "void CLKappaNotifier::tellCompanionToMartyModeSwitch(CMMotionCoprocessorReply::SafetyMartyModeSwitch *)"
+ "void CLKappaNotifier::tellCompanionToMartyModeSwitch(CMMotionCoprocessorReply::SafetyMartyModeSwitch *)_block_invoke"
+ "void CLKappaNotifier::updateAOPArmStatus(CMMotionCoprocessorCommand::Kappa::EnableClient)"
+ "{\"msg%{public}.0s\":\"#Warning onClientUserNotification fInflightPromptAuthorizationRequest failed to evaluate to a real, registered client\", \"ClientKey\":%{public, location:escape_only}s}"
+ "{\"msg%{public}.0s\":\"CLMiLoService send status to client, MiLo Unavailable: \", \"ServiceId\":%{public, location:escape_only}s, \"State\":%{public}u, \"isMiLoEnabled\":%{public}hhd, \"isLowPowerMode\":%{public}hhd, \"isLocationServicesEnabled\":%{public}hhd, \"isSignificantLocationsEnabled\":%{public}hhd, \"isPlatformSupported\":%{public}hhd}"
+ "{\"msg%{public}.0s\":\"Sending Model LOI Types event\", \"foundHome\":%{private}hhd, \"foundWork\":%{private}hhd, \"foundAirPlay\":%{private}hhd}"
+ "{\"msg%{public}.0s\":\"analyzeModelLoiTypes cancelled\", \"Activity\":%{public, location:escape_only}s}"
- "#imag,result,%{public}d,deviceResult,%{public}d,unkCount,%{public}d,authCount,%{public}d,spoofedCount,%{public}d,buildTimeOk,%{public}d,eeTimeOk,%{public}d,pyTimeOk,%{public}d,simMode,%{public}d,stfAuth,%{public}d,stfFake,%{public}d"
- "#imag,yield gated,stfAuth,%{public}d,stfFake,%{public}d,build,%{public}d"
- "-[CLKappaNotifierAdapter collect]"
- "-[CLKappaNotifierAdapter dontcollect]"
- "/AppleInternal/Library/BuildRoots/7ca2b31c-8e0a-11ee-855a-1ae9d66b0597/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.2.Internal.sdk/usr/local/include/boost/geometry/algorithms/detail/throw_on_empty_input.hpp"
- "/AppleInternal/Library/BuildRoots/7ca2b31c-8e0a-11ee-855a-1ae9d66b0597/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.2.Internal.sdk/usr/local/include/boost/uuid/detail/random_provider_posix.ipp"
- "/AppleInternal/Library/BuildRoots/7ca2b31c-8e0a-11ee-855a-1ae9d66b0597/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.2.Internal.sdk/usr/local/include/boost/uuid/string_generator.hpp"
- "/AppleInternal/Library/BuildRoots/7ca2b31c-8e0a-11ee-855a-1ae9d66b0597/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.2.Internal.sdk/usr/local/include/google/protobuf/repeated_field.h"
- "/AppleInternal/Library/BuildRoots/7ca2b31c-8e0a-11ee-855a-1ae9d66b0597/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.2.Internal.sdk/usr/local/include/google/protobuf/wire_format_lite_inl.h"
- "1.4.20"
- "20:35:18"
- "20:42:25"
- "Background Stairs Escalation Manager, escalation end time : %{public}f, escalation duration : %{public}f, total number of floors ascended : %{public}u"
- "Background escalation manager stopped tracking escalation"
- "CLSensorMonitor - PhysicalActivityEvent values,startTime,%{public}.8f,eventType,%{private}ld,action,%{private}ld,reason,%{public}ld,workoutType,%{public}ld"
- "Nov 28 2023"
- "Nov 28 2023 20:38:21"
- "all advertisements kept in file - maintenance scheduled too early?"
- "arming"
- "ckp.isValidCKP"
- "collect"
- "creating advertisements file :("
- "dontcollect"
- "initWithType:predicate:anchor:limit:resultsHandler:"
- "m apart - using local"
- "onClientUserNotification fInflightPromptAuthorizationRequest must evaluate to a real, registered client"
- "shouldEnableMarty, %{public}u, %{public}u, %{public}u, %{public}u, %{public}u"
- "tell the companion to collect"
- "tell the companion to stop collecting"
- "v324@0:8i16(NotificationData={MediatedMotionActivity=d{CLMotionActivity=iiiiiidBfdBiddii{?=b1b1b1b1b1}iidQi}i{CLNatalieFeatures=fffffffiB}qqqBB[16C]}{MotionOverride=i{CLMotionActivity=iiiiiidBfdBiddii{?=b1b1b1b1b1}iidQi}q{WorkoutSettings=[16C][16C][16C]qq(WorkoutAttrib={SwimAttrib=qd}Q){FitnessPlusInfo=B[64c]q}Q}}{WorkoutEvent=ddqd{CLWorkoutSessionDetails=idqQ}{WorkoutSettings=[16C][16C][16C]qq(WorkoutAttrib={SwimAttrib=qd}Q){FitnessPlusInfo=B[64c]q}Q}}{IndoorOutdoorUpdate=dqq}{ActivityEvent=dqqqq})20"
- "v32@0:8r^i16r^(NotificationData={MediatedMotionActivity=d{CLMotionActivity=iiiiiidBfdBiddii{?=b1b1b1b1b1}iidQi}i{CLNatalieFeatures=fffffffiB}qqqBB[16C]}{MotionOverride=i{CLMotionActivity=iiiiiidBfdBiddii{?=b1b1b1b1b1}iidQi}q{WorkoutSettings=[16C][16C][16C]qq(WorkoutAttrib={SwimAttrib=qd}Q){FitnessPlusInfo=B[64c]q}Q}}{WorkoutEvent=ddqd{CLWorkoutSessionDetails=idqQ}{WorkoutSettings=[16C][16C][16C]qq(WorkoutAttrib={SwimAttrib=qd}Q){FitnessPlusInfo=B[64c]q}Q}}{IndoorOutdoorUpdate=dqq}{ActivityEvent=dqqqq})24"
- "v48@?0@\"HKAnchoredObjectQuery\"8@\"NSArray\"16@\"NSArray\"24@\"HKQueryAnchor\"32@\"NSError\"40"
- "virtual void CLKappaNotifier::Armed::entry(uint64_t, const void *)_block_invoke"
- "virtual void CLKappaNotifier::Armed::exit(uint64_t, const void *)_block_invoke"
- "void CLKappaNotifier::onCompanionCollect()"
- "void CLKappaNotifier::stopCompanionCollect()"
- "void CLKappaNotifier::updateAOPArmStatus(CMMotionCoprocessorCommand::Kappa::On)"
- "{\"msg%{public}.0s\":\"CLMiLoService send status to client, MiLo Unavailable: \", \"ServiceId\":%{public, location:escape_only}s, \"State\":%{public}u, \"isMiLoEnabled\":%{public}hhd, \"isLowPowerMode\":%{public}hhd}"
- "{\"msg%{public}.0s\":\"onClientUserNotification fInflightPromptAuthorizationRequest must evaluate to a real, registered client\", \"ClientKey\":%{public, location:escape_only}s, \"event\":%{public, location:escape_only}s, \"condition\":%{private, location:escape_only}s}"

```
