## BKLibrary

> `/private/var/staged_system_apps/Books.app/Frameworks/BKLibrary.framework/BKLibrary`

```diff

-5983.0.0.0.0
-  __TEXT.__text: 0x72a58
-  __TEXT.__auth_stubs: 0x8f0
-  __TEXT.__objc_stubs: 0xc400
-  __TEXT.__objc_methlist: 0x4e5c
+6023.0.0.0.0
+  __TEXT.__text: 0x70e20
+  __TEXT.__auth_stubs: 0x900
+  __TEXT.__objc_stubs: 0xbd40
+  __TEXT.__objc_methlist: 0x4aac
   __TEXT.__const: 0xb0
-  __TEXT.__gcc_except_tab: 0xbf8
-  __TEXT.__oslogstring: 0x6530
-  __TEXT.__cstring: 0x6583
-  __TEXT.__objc_methname: 0x12b03
-  __TEXT.__objc_classname: 0x83e
-  __TEXT.__objc_methtype: 0x2782
+  __TEXT.__gcc_except_tab: 0xc04
+  __TEXT.__oslogstring: 0x6719
+  __TEXT.__cstring: 0x641d
+  __TEXT.__objc_methname: 0x12055
+  __TEXT.__objc_classname: 0x797
+  __TEXT.__objc_methtype: 0x243a
   __TEXT.__ustring: 0x40
   __TEXT.__dlopen_cstrs: 0x66
-  __TEXT.__unwind_info: 0x1760
-  __DATA_CONST.__auth_got: 0x488
+  __TEXT.__unwind_info: 0x16a0
+  __DATA_CONST.__auth_got: 0x490
   __DATA_CONST.__got: 0x228
-  __DATA_CONST.__const: 0x2410
-  __DATA_CONST.__cfstring: 0x5420
-  __DATA_CONST.__objc_classlist: 0x160
+  __DATA_CONST.__const: 0x2340
+  __DATA_CONST.__cfstring: 0x52c0
+  __DATA_CONST.__objc_classlist: 0x148
   __DATA_CONST.__objc_catlist: 0x0
-  __DATA_CONST.__objc_protolist: 0x138
+  __DATA_CONST.__objc_protolist: 0x128
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__objc_arraydata: 0x328
   __DATA_CONST.__objc_dictobj: 0x50
   __DATA_CONST.__objc_intobj: 0x258
   __DATA_CONST.__objc_arrayobj: 0x120
   __DATA_CONST.__objc_doubleobj: 0x10
-  __DATA.__objc_const: 0xaf30
-  __DATA.__objc_selrefs: 0x3ff8
+  __DATA.__objc_const: 0xa738
+  __DATA.__objc_selrefs: 0x3d88
   __DATA.__objc_protorefs: 0x38
-  __DATA.__objc_classrefs: 0x3f0
-  __DATA.__objc_superrefs: 0x100
-  __DATA.__objc_ivar: 0x508
-  __DATA.__objc_data: 0xdc0
-  __DATA.__data: 0xf28
-  __DATA.__bss: 0x158
+  __DATA.__objc_classrefs: 0x3c0
+  __DATA.__objc_superrefs: 0xe8
+  __DATA.__objc_ivar: 0x4b8
+  __DATA.__objc_data: 0xcd0
+  __DATA.__data: 0xe68
+  __DATA.__bss: 0x128
   __DATA.__common: 0x18
-  - /System/Library/Frameworks/CloudKit.framework/CloudKit
   - /System/Library/Frameworks/CoreData.framework/CoreData
   - /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
-  - /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
   - /System/Library/Frameworks/Foundation.framework/Foundation
-  - /System/Library/Frameworks/Security.framework/Security
   - /System/Library/Frameworks/UIKit.framework/UIKit
-  - /System/Library/PrivateFrameworks/BookCoverUtility.framework/BookCoverUtility
   - /System/Library/PrivateFrameworks/BookDataStore.framework/BookDataStore
-  - /System/Library/PrivateFrameworks/BookFoundation.framework/BookFoundation
-  - /System/Library/PrivateFrameworks/BookLibrary.framework/BookLibrary
+  - /System/Library/PrivateFrameworks/BookLibraryCore.framework/BookLibraryCore
   - /System/Library/PrivateFrameworks/BookUtility.framework/BookUtility
-  - /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
   - /System/Library/PrivateFrameworks/Preferences.framework/Preferences
   - /System/Library/PrivateFrameworks/SoftLinking.framework/SoftLinking
-  - /System/Library/PrivateFrameworks/TSUtility.framework/TSUtility
   - /usr/lib/libSystem.B.dylib
   - /usr/lib/libobjc.A.dylib
-  - @rpath/AEBookPlugins.framework/AEBookPlugins
   - @rpath/BookAnalytics.framework/BookAnalytics
   - @rpath/BookCore.framework/BookCore
-  UUID: 607F9C25-81C2-3C76-B14C-91E793B4A08D
-  Functions: 2395
-  Symbols:   513
-  CStrings:  5062
+  UUID: AA331E9D-FA73-3260-A7AE-D07D933BEED8
+  Functions: 2314
+  Symbols:   506
+  CStrings:  4908
 
Symbols:
+ _OBJC_CLASS_$_BCPPTConfig
+ __os_feature_enabled_impl
- _OBJC_CLASS_$_BKLibraryTableDataSource
- _OBJC_CLASS_$_BKLibraryTableDataSourceSnapshot
- _OBJC_CLASS_$_BKLibraryTableSectionSnapshot
- _OBJC_CLASS_$_NSFetchedResultsController
- _OBJC_CLASS_$_NSMapTable
- _OBJC_CLASS_$_UILocalizedIndexedCollation
- _OBJC_METACLASS_$_BKLibraryTableDataSource
- _OBJC_METACLASS_$_BKLibraryTableDataSourceSnapshot
- _OBJC_METACLASS_$_BKLibraryTableSectionSnapshot
CStrings:
+ "#datasource Step 0: fetchAssets from: %{public}@"
+ "%@ collectionMember %@ has no asset, skip removing this collection member from moc."
+ "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/Source/BKCollection.m"
+ "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/Source/BKJaliscoStatus.m"
+ "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/Source/BKLibraryAssetStatusController.m"
+ "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/Source/BKLibraryCollectionManager.m"
+ "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/Source/BKLibraryFileSizeManager.m"
+ "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/Source/BKLibraryManager.m"
+ "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/Source/BKUbiquityEligibilityManager.m"
+ "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/Source/BKUserSortOrderManager.m"
+ "@\"NSFetchRequest\"32@0:8@\"NSString\"16q24"
+ "@32@0:8@16q24"
+ "About to seed continue reading (existing=%lu, newLimit=%lu)"
+ "Encounted error when counting books in continue reading %@"
+ "MRP: error fetching MRP from library %@"
+ "MRP: no library purchases"
+ "Q36@0:8B16Q20@28"
+ "SUBQUERY(asset.collectionMembers, $collectionMember, $collectionMember.collection.collectionID IN %@).@count > 0"
+ "SUBQUERY(collectionMembers, $collectionMember, NOT $collectionMember.collection.collectionID IN %@).@count > 0"
+ "Saving collection members: %lu inserts/updates, %lu deletes (due to moc save: %{public}@)"
+ "Saving collections: %lu inserts/updates, %lu deletes (due to moc save: %{public}@)"
+ "Seeded %lu books"
+ "SortOrderManager - changes: %{BOOL}d, collision: %{BOOL}d"
+ "There is enough books in continue reading (existing=%lu, limit=%lu). Skip seeding"
+ "_continueReadingPredicateIncludingExplicitContent:"
+ "_predicateForBooksShownInAllBooks"
+ "_updateMostRecentPurchaseDateCacheFromDataSources"
+ "enable_store_swift_ui"
+ "isReturningUser"
+ "predicateForBooksWithCollectionID:hideUnownedItems:"
+ "predicateForCollectionMembersInCollectionID:hideUnownedItems:"
+ "predicateForCollectionMembersInCollectionID:hideUnownedItems:allowExplicit:"
+ "predicateForSearchableLibraryAssets"
+ "predicateFor_AllAudioBooks_LibraryAssets"
+ "predicateFor_AllBooks_LibraryAssets"
+ "predicateFor_All_PDFs_LibraryAssets"
+ "predicateToExcludeAssetsForSeriesAndStoreItemsNotAddedToCollections"
+ "predicateToExcludeCollectionMembersForSeriesAndStoreItemsNotAddedToCollections"
+ "searchFetchRequestWithText:entityType:"
+ "search_entities"
+ "shouldHaveContinueAndPreviousContent"
+ "storeAssetIDsOfFinishedCollectionWithLimit:inMoc:"
+ "updateMostRecentPurchaseDateCacheFromLibrary"
+ "usePPTLaunchContent"
+ "v40@0:8@\"BCBookReadingTimeTracker\"16@\"NSString\"24@?<v@?@\"<BKLibraryAssetObject>\"BBB@\"NSError\">32"
+ "v40@0:8@16Q24@32"
+ "wq_countOfBooksInContinueReadingIncludingExplicitContent:limit:onWorkerQueue:"
+ "wq_seedRecentsListWithRecentlyOpenedBooksNoOlderThanDate:limit:onWorkerQueue:"
- "\x02\x11"
- "\x11Q"
- "#"
- "%"
- "%@ < %K"
- "(%K == %@ OR %K == %@ OR %K == %@) AND (%K != %@ AND %K != %@)"
- "(asset.state != %@ AND (asset.state != %@ || asset.contentType == %@)) OR asset.collectionMembers.@count > 2"
- "(asset.state == %@ OR asset.state == %@ OR asset.state == %@) AND (asset.state != %@ AND asset.contentType != %@)"
- "(state != %@ AND (state != %@ || contentType == %@)) OR collectionMembers.@count > 2"
- "(state == %@ OR state == %@ OR state == %@) AND (state != %@ AND contentType != %@)"
- "-"
- "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/BKCollection.m"
- "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/BKJaliscoStatus.m"
- "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/BKLibraryAssetStatusController.m"
- "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/BKLibraryCollectionManager.m"
- "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/BKLibraryFileSizeManager.m"
- "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/BKLibraryManager.m"
- "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/BKUbiquityEligibilityManager.m"
- "/Library/Caches/com.apple.xbs/Sources/Alder/frameworks/BKLibrary/BKUserSortOrderManager.m"
- "@\"<BKLibraryAssetProvider>\""
- "@\"<BKLibraryTableDataSourceDelegate><NSObject>\""
- "@\"BKLibraryTableDataSource\"32@0:8@\"BKLibraryTableDataSource\"16@\"NSString\"24"
- "@\"BKLibraryTableDataSource\"32@0:8@\"NSString\"16B24B28"
- "@\"NSFetchRequest\""
- "@\"NSFetchRequest\"36@0:8@\"NSString\"16q24B32"
- "@\"NSFetchedResultsController\""
- "@\"NSMapTable\""
- "@\"NSPredicate\"36@0:8@\"NSString\"16B24B28B32"
- "@\"NSPredicate\"40@0:8@\"NSString\"16B24B28B32B36"
- "@\"NSString\"32@0:8@\"NSFetchedResultsController\"16@\"NSString\"24"
- "@36@0:8@16q24B32"
- "@40@0:8@16@24B32B36"
- "@40@0:8@16B24B28B32B36"
- "BKLibraryTableDataSource"
- "BKLibraryTableDataSource: Exception in objectAtIndexPath %@"
- "BKLibraryTableDataSource: reloadData"
- "BKLibraryTableDataSource: reloadData: Unresolved error %@, %@"
- "BKLibraryTableDataSourceSnapshot"
- "BKLibraryTableSectionSnapshot"
- "Library_List_Missing_Title"
- "NSFetchedResultsControllerDelegate"
- "NSFetchedResultsSectionInfo"
- "Private"
- "T@\"<BKLibraryAssetProvider>\",W,N,V_mainLibrary"
- "T@\"<BKLibraryTableDataSourceDelegate><NSObject>\",W,N,V_delegate"
- "T@\"NSArray\",R,N,V_objects"
- "T@\"NSFetchRequest\",&,N,V_fetchRequest"
- "T@\"NSFetchedResultsController\",&,N,V_fetchedResultsController"
- "T@\"NSManagedObjectContext\",R,N"
- "T@\"NSString\",&,N,V_collectionID"
- "T@\"NSString\",&,N,V_mainSectionName"
- "T@\"NSString\",&,N,V_searchText"
- "T@\"NSString\",R,N,V_indexTitle"
- "TB,N,V_hideUnownedItems"
- "TB,N,V_isList"
- "TB,N,V_isSeries"
- "TB,N,V_showAllPurchases"
- "TQ,R,N,V_numberOfObjects"
- "Ti,N,V_sortType"
- "_changeTypeForFetchChangeType:"
- "_createFetchedResultsControllerIfNeeded"
- "_fetchRequest"
- "_fetchedObjects"
- "_fetchedResultsController"
- "_hideUnownedItems"
- "_indexPathToObject"
- "_indexTitle"
- "_isList"
- "_isSeries"
- "_mainLibrary"
- "_mainSectionName"
- "_numberOfObjects"
- "_objectToIndexPath"
- "_objects"
- "_predicateForBooksShownInAllBooksShowingPurchases:"
- "_searchText"
- "_sections"
- "_showAllPurchases"
- "_sortType"
- "asset.state != %@ AND asset.contentType != %@"
- "assetsOfPurchasedStoreAssets:"
- "booksExtendedLaunchTestType"
- "characterAtIndex:"
- "characterIsMember:"
- "checkedObjectAtIndexPath:"
- "collectionMembersPredicate"
- "controller:didChangeContentWithDifference:"
- "controller:didChangeContentWithSnapshot:"
- "controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:"
- "controller:didChangeSection:atIndex:forChangeType:"
- "controller:sectionIndexTitleForSectionName:"
- "controllerDidChangeContent:"
- "controllerWillChangeContent:"
- "currentCollation"
- "currentSectionNameKeyPath"
- "dataSource:didChangeObject:atIndexPath:forChangeType:newIndexPath:"
- "dataSource:didChangeSectionAtIndex:forChangeType:"
- "dataSourceDidChangeContent:"
- "dataSourceDidReload:"
- "dataSourceForTableWithCollectionID:isList:isSeries:"
- "dataSourceForTableWithDataSource:collectionID:"
- "dataSourceWillChangeContent:"
- "decimalDigitCharacterSet"
- "fetchRequest"
- "fetchedObjects"
- "fetchedResultsController"
- "hideUnownedItems"
- "i24@0:8Q16"
- "indexPathForObject:"
- "indexTitle"
- "initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:"
- "initWithFetchedResultsController:"
- "initWithLibrary:collectionID:isList:isSeries:"
- "initWithSection:"
- "initWithType:subpredicates:"
- "insertObject:atIndex:"
- "isList"
- "isSeries"
- "launchedToTest"
- "mainLibrary"
- "mainPredicate"
- "mainSectionName"
- "mainSortDescriptors"
- "makeObjectsPerformSelector:"
- "mapTableWithKeyOptions:valueOptions:"
- "moc"
- "nameForSection:"
- "newSnapshot"
- "numberOfObjects"
- "numberOfObjectsInSection:"
- "objectAtIndexPath:"
- "objectWithID:"
- "objects"
- "objectsInSection:"
- "performFetch:"
- "predicateForBooksShownInAllBooksWithPurchasesDisabled"
- "predicateForBooksWithCollectionID:hideUnownedItems:showAllPurchases:isSearching:"
- "predicateForCollectionMembersInCollectionID:hideUnownedItems:showAllPurchases:isSearching:"
- "predicateForCollectionMembersInCollectionID:hideUnownedItems:showAllPurchases:isSearching:allowExplicit:"
- "predicateForLibraryAssetsOpenedSince:"
- "predicateForLibraryAssetsThatWarnedAboutDesktopSupport"
- "predicateForLibraryAssetsWithAuthor:"
- "predicateForLibraryAssetsWithGenre:"
- "predicateForSearchableAssets:"
- "predicateForSearchableAssetsInCollectionMembers:"
- "predicateForSearchableLibraryAssets:"
- "predicateFor_AllAudioBooks_LibraryAssets:"
- "predicateFor_AllBooks_LibraryAssets:"
- "predicateFor_All_PDFs_LibraryAssets:"
- "predicateToExcludeAssetsForSeriesAndStoreItemsNotInAnyCollections"
- "predicateToExcludeCollectionMembersForSeriesAndStoreItemsNotInAnyCollections"
- "q32@0:8@16q24"
- "rangeOfComposedCharacterSequenceAtIndex:"
- "refetchData"
- "reloadAllInstances"
- "reloadData"
- "removeLastObject"
- "searchFetchRequestWithText:entityType:excludeEphemeral:"
- "searchText"
- "sectionForSectionIndexTitle:atIndex:"
- "sectionIndexTitles"
- "sectionNameKeyPath"
- "sections"
- "sectionsCount"
- "setFetchRequest:"
- "setFetchedResultsController:"
- "setHideUnownedItems:"
- "setIsList:"
- "setIsSeries:"
- "setMainLibrary:"
- "setMainSectionName:"
- "setSearchText:"
- "setShowAllPurchases:"
- "setSortType:"
- "showAllPurchases"
- "sortType"
- "state != %@ AND contentType != %@"
- "substringWithRange:"
- "updateMostRecentPurchaseDateCache"
- "uppercaseString"
- "v24@0:8@\"NSFetchedResultsController\"16"
- "v32@0:8@\"NSFetchedResultsController\"16@\"NSDiffableDataSourceSnapshot\"24"
- "v32@0:8@\"NSFetchedResultsController\"16@\"NSOrderedCollectionDifference\"24"
- "v32@?0@\"<NSFetchedResultsSectionInfo>\"8Q16^B24"
- "v40@0:8@\"BCBookReadingTimeTracker\"16@\"NSString\"24@?<v@?@\"<BKLibraryAssetObject>\"BB@\"NSError\">32"
- "v48@0:8@\"NSFetchedResultsController\"16@\"<NSFetchedResultsSectionInfo>\"24Q32Q40"
- "v48@0:8@16@24Q32Q40"
- "v56@0:8@\"NSFetchedResultsController\"16@24@\"NSIndexPath\"32Q40@\"NSIndexPath\"48"
- "v56@0:8@16@24@32Q40@48"

```
