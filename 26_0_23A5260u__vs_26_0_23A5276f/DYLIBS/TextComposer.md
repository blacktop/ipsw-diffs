## TextComposer

> `/System/Library/PrivateFrameworks/TextComposer.framework/TextComposer`

```diff

-153.0.0.0.0
-  __TEXT.__text: 0x12112c
-  __TEXT.__auth_stubs: 0x28f0
-  __TEXT.__objc_methlist: 0x4670
-  __TEXT.__const: 0x6128
-  __TEXT.__cstring: 0x11b3f
-  __TEXT.__gcc_except_tab: 0x1740
+157.0.0.0.0
+  __TEXT.__text: 0x12660c
+  __TEXT.__auth_stubs: 0x29f0
+  __TEXT.__objc_methlist: 0x46d8
+  __TEXT.__const: 0x6178
+  __TEXT.__cstring: 0x1218f
+  __TEXT.__gcc_except_tab: 0x1748
   __TEXT.__ustring: 0x1e5e
-  __TEXT.__oslogstring: 0x57a0
+  __TEXT.__oslogstring: 0x5aa0
   __TEXT.__dlopen_cstrs: 0x5c
-  __TEXT.__swift5_typeref: 0x1c2a
-  __TEXT.__swift5_reflstr: 0xd46
+  __TEXT.__swift5_typeref: 0x1c8a
+  __TEXT.__swift5_reflstr: 0xd56
   __TEXT.__swift5_assocty: 0x2e0
   __TEXT.__constg_swiftt: 0x2a64
-  __TEXT.__swift5_fieldmd: 0x1de4
+  __TEXT.__swift5_fieldmd: 0x1df0
   __TEXT.__swift5_proto: 0x4d0
   __TEXT.__swift5_types: 0x264
   __TEXT.__swift5_builtin: 0xc8
   __TEXT.__swift5_mpenum: 0x8
   __TEXT.__swift5_protos: 0x18
-  __TEXT.__swift_as_entry: 0x5c8
-  __TEXT.__swift_as_ret: 0x6b0
-  __TEXT.__swift5_capture: 0x9ac
-  __TEXT.__unwind_info: 0x4d98
-  __TEXT.__eh_frame: 0x9350
+  __TEXT.__swift_as_entry: 0x5d8
+  __TEXT.__swift_as_ret: 0x6bc
+  __TEXT.__swift5_capture: 0x9f8
+  __TEXT.__unwind_info: 0x4e40
+  __TEXT.__eh_frame: 0x9578
   __TEXT.__objc_classname: 0xa10
-  __TEXT.__objc_methname: 0xea8d
-  __TEXT.__objc_methtype: 0x1c2f
-  __TEXT.__objc_stubs: 0x8be0
-  __DATA_CONST.__got: 0x920
-  __DATA_CONST.__const: 0x2020
+  __TEXT.__objc_methname: 0xed38
+  __TEXT.__objc_methtype: 0x1cb5
+  __TEXT.__objc_stubs: 0x8ce0
+  __DATA_CONST.__got: 0x988
+  __DATA_CONST.__const: 0x2018
   __DATA_CONST.__objc_classlist: 0x640
   __DATA_CONST.__objc_protolist: 0x70
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0x2970
+  __DATA_CONST.__objc_selrefs: 0x29b0
   __DATA_CONST.__objc_protorefs: 0x28
   __DATA_CONST.__objc_superrefs: 0x1f8
-  __DATA_CONST.__objc_arraydata: 0x1d10
-  __AUTH_CONST.__auth_got: 0x1488
-  __AUTH_CONST.__const: 0x6a38
-  __AUTH_CONST.__cfstring: 0xc1a0
-  __AUTH_CONST.__objc_const: 0xdc10
+  __DATA_CONST.__objc_arraydata: 0x1d50
+  __AUTH_CONST.__auth_got: 0x1508
+  __AUTH_CONST.__const: 0x6bc0
+  __AUTH_CONST.__cfstring: 0xc380
+  __AUTH_CONST.__objc_const: 0xdc30
   __AUTH_CONST.__objc_arrayobj: 0x648
-  __AUTH_CONST.__objc_dictobj: 0x578
+  __AUTH_CONST.__objc_dictobj: 0x5a0
   __AUTH_CONST.__objc_intobj: 0x4b0
   __AUTH_CONST.__objc_doubleobj: 0x40
   __AUTH.__objc_data: 0x3068
-  __AUTH.__data: 0x4b40
+  __AUTH.__data: 0x4b48
   __DATA.__objc_ivar: 0x45c
-  __DATA.__data: 0xe48
-  __DATA.__bss: 0x7610
+  __DATA.__data: 0xe80
+  __DATA.__bss: 0x7620
   __DATA.__common: 0xd8
   __DATA_DIRTY.__objc_data: 0x798
   __DATA_DIRTY.__data: 0x69

   - /usr/lib/swift/libswiftCore.dylib
   - /usr/lib/swift/libswiftCoreFoundation.dylib
   - /usr/lib/swift/libswiftCoreImage.dylib
-  - /usr/lib/swift/libswiftDarwin.dylib
   - /usr/lib/swift/libswiftDispatch.dylib
   - /usr/lib/swift/libswiftMetal.dylib
   - /usr/lib/swift/libswiftNaturalLanguage.dylib

   - /usr/lib/swift/libswiftXPC.dylib
   - /usr/lib/swift/libswift_Builtin_float.dylib
   - /usr/lib/swift/libswift_Concurrency.dylib
-  - /usr/lib/swift/libswift_DarwinFoundation1.dylib
-  - /usr/lib/swift/libswift_DarwinFoundation2.dylib
-  - /usr/lib/swift/libswift_DarwinFoundation3.dylib
   - /usr/lib/swift/libswift_StringProcessing.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  UUID: 13937A13-D750-3253-8D6F-E26A1D9FC5DF
-  Functions: 6873
-  Symbols:   722
-  CStrings:  5590
+  UUID: 328DB5A2-6604-3E91-9D22-38F27DAB46F1
+  Functions: 6953
+  Symbols:   718
+  CStrings:  5658
 
Symbols:
- __swift_FORCE_LOAD_$_swiftDarwin
- __swift_FORCE_LOAD_$_swift_DarwinFoundation1
- __swift_FORCE_LOAD_$_swift_DarwinFoundation2
- __swift_FORCE_LOAD_$_swift_DarwinFoundation3
CStrings:
+ "%@ | [ADD] | Added cache entry (cacheKey:%{private}@), (annotation:%{sensitive}@)"
+ "%@ | [DISABLED]"
+ "%@ | [DISABLED] | Device locked: won't look into the caches"
+ "%@ | [DISABLED] | On compose state detected"
+ "%@ | [ERROR] | Failed to construct cache key"
+ "%@ | [ERROR] | Invalid response type"
+ "%@ | [ERROR] | Unable to load cache"
+ "%@ | [ERROR] | Unsupported mode for caching"
+ "%@ | [ERROR] | failed to construct cache key"
+ "%@ | [HIT] | (cacheKey:%{private}@), (annotation:%{sensitive}@)"
+ "%@ | [MISS] | %@ (cacheKey:%{private}@), (annotation:%{sensitive}@)"
+ "%@ | [MISS] | (cacheKey:%{private}@), (reason:%{sensitive}@)"
+ ": %@"
+ "@32@0:8q16q24"
+ "@68@0:8@16@24@32B40@44@52^@60"
+ "@88@0:8@16@24@32@40@48@56@64@72^@80"
+ "A space should be inserted here."
+ "A space should be omitted here."
+ "B24@0:8q16"
+ "B56@0:8@16@24q32q40B48B52"
+ "Caching or lookup failed : no entries in conversation history to cache against"
+ "Conversation history not eligible for smart action follow up due to unknown error"
+ "Detected invalid message type in lookback window. Conversation not eligible for poll generation"
+ "Failed to build prompt for smart action follow up due to unknown error"
+ "Feature not supported"
+ "Invalid model output: no candidates or segments returned by model"
+ "Invalid model output: response cannot be parsed as questionnaire entries"
+ "Invalid model output: response is nil for unknown reason"
+ "Invalid model output: segment content is not text"
+ "Invalid smart action flow"
+ "Invalid smart action flow argument used"
+ "Missing Space"
+ "MissingSpaceInsertSpace"
+ "Model detected smart action intent %{private}@, but the conversation is not eligible for it."
+ "Model provided empty smart action follow up output"
+ "Model provided invalid smart action follow up output"
+ "No action follow ups provided by the model"
+ "No smart action follow up output parsed from model"
+ "No smart action response passed in"
+ "No thread ID found, will cache or lookup by message texts"
+ "No/empty message text, failed to cache or lookup"
+ "Processed message list larger than max window size of %{private}lu. Truncating message list to max window size."
+ "Rejecting generated user poll: one of the poll option is longer than %{private}lu characters"
+ "Rejecting generated user poll: poll title is longer than %{private}lu characters"
+ "Smart Action Follow Up Cache"
+ "Smart Action Intent Cache"
+ "SpaceUnnecessarySpace"
+ "Successfully parsed model as user poll follow up"
+ "This sentence is missing a space."
+ "Thread ID not found in cache"
+ "Unable to parse action follow up output from model due to unknown error"
+ "Unsupported model runner type for Messages Action "
+ "[TCTextCompositionAssistant] : Detected invalid message type in lookback window. Conversation not eligible for poll generation"
+ "[TCTextCompositionAssistant] : Invalid model output: no candidates or segments returned by model"
+ "[TCTextCompositionAssistant] : Invalid model output: response cannot be parsed as questionnaire entries"
+ "[TCTextCompositionAssistant] : Invalid model output: response is nil for unknown reason"
+ "[TCTextCompositionAssistant] : Invalid model output: segment content is not text"
+ "[TCTextCompositionAssistant] : model invocation timed out after 1 minute"
+ "_TtC12TextComposer34TCTextCompositionExternalXPCServer"
+ "_TtCC12TextComposer34TCTextCompositionExternalXPCServer6Server"
+ "_cacheSmartActionResponse:inputContextHistory:mode:flow:onComposeState:isExternalAPICall:"
+ "_cachedSmartActionResponse:mode:flow:onComposeState:isExternalAPICall:completionHandler:"
+ "_fullPromptForSmartAction:inputContextHistory:contextBeforeCursor:onComposeState:outNormalizedNamesToNames:options:outError:"
+ "_isValidSmartActionFlow:"
+ "_loadCacheForSmartActionFlow:smartActionCompositionMode:"
+ "_smartActionFollowUpFromModelOutput:smartAction:inputContextHistory:normalizedNamesToNames:inputPreferences:options:outError:"
+ "cached annotation does not match context history"
+ "com.apple.textComposition.MessagesAction.OnlyAction"
+ "com.apple.textComposition.MessagesAction.OnlyTitle"
+ "com.apple.textComposition.MessagesAction.Poll"
+ "filterSmartActionsResponseByEligibility:eligibility:"
+ "filterSmartActionsResponseWithEligibilityData:smartActionsResponse:"
+ "generate call timed out after 1 minute"
+ "generateActionIntentWithPrompt:inputContextHistory:replyToMessageID:documentType:contextBeforeCursor:eligibility:mutableOptions:completionHandler:"
+ "initWithDictionary:"
+ "initWithInput:inputString:openEndedString:leadingString:trailingString:writingOptions:resultOptions:tagger:error:"
+ "messagesInLookbackWindow:"
+ "modelRunnerType"
+ "smartActionFollowUpFromModelOutput:smartAction:inputContextHistory:normalizedNamesToNames:inputPreferences:options:outError:"
+ "spaceDeletionCorrectionDetailDictionaryForTokenDifferenceManager:tokenEdit:originalAttributedString:sentenceRange:tagger:preferredLanguage:writingOptions:"
+ "spaceDoubleToSingleCorrectionDetailDictionaryForTokenDifferenceManager:tokenEdit:originalAttributedString:sentenceRange:tagger:preferredLanguage:writingOptions:"
+ "spaceInsertionCorrectionDetailDictionaryForTokenDifferenceManager:tokenEdit:originalAttributedString:sentenceRange:tagger:preferredLanguage:writingOptions:"
+ "system<n> A conversation between a user and a helpful assistant.<turn_end> user<n> {{ userContent }}<n>Generate a poll.<turn_end> assistant<n>"
+ "system<n> A conversation between a user and a helpful assistant.<turn_end> user<n> {{ userContent }}<n>If there's an action in this conversation, generate a title.<turn_end> assistant<n>"
+ "system<n> A conversation between a user and a helpful assistant.<turn_end> user<n> {{ userContent }}<n>Is there an action in this conversation?<turn_end> assistant<n>"
+ "trimmedRangeInString:"
+ "v56@0:8@16q24q32B40B44@?48"
+ "v80@0:8@16@24@32@40@48@56@64@?72"
+ "xpcInterface"
+ "{_NSRange=QQ}24@0:8@16"
- "@76@0:8@16@24@32B40@44@52@60^@68"
- "@80@0:8@16@24@32@40@48@56@64^@72"
- "Detected an attachment in lookback window. Conversation not eligible for poll generation"
- "Generate a poll."
- "Is there an action in this conversation?"
- "No output parsed from model"
- "Processed message list larger than max window size of %{private}lu. Trucating message list to max window size."
- "Unsupported mode for smart action follow up caching"
- "Unsupported mode for smart action intent caching"
- "[TCTextCompositionAssistant] : Detected an attachment in lookback window. Conversation not eligible for poll generation"
- "[TCTextCompositionAssistant] : No messaged id found, will cache or lookup by message texts"
- "[TCTextCompositionAssistant] : On compose state detected - smart actions follow up caching disabled"
- "[TCTextCompositionAssistant] : On compose state detected - smart actions intent caching disabled"
- "[TCTextCompositionAssistant] : cached smart action follow up found in memory"
- "[TCTextCompositionAssistant] : cached smart action follow up is up to date"
- "[TCTextCompositionAssistant] : no cached smart action follow up found"
- "[TCTextCompositionAssistant] : smart actions follow up caching disabled"
- "[TCTextCompositionAssistant] : smart actions intent caching disabled"
- "_TtC12TextComposer39ExternalTextCompositionXPCServiceServer"
- "_TtCC12TextComposer39ExternalTextCompositionXPCServiceServer6Server"
- "_fullPromptForSmartAction:inputContextHistory:contextBeforeCursor:onComposeState:outNormalizedNamesToNames:instruction:options:outError:"
- "_smartActionFollowUpFromModelOutput:smartAction:inputContextHistory:normalizedNamesToNames:inputPreferences:options:"
- "cached smart action intent found in memory"
- "cached smart action intent is up to date"
- "device locked: won't look into the caches"
- "generateActionIntentWithPrompt:inputContextHistory:replyToMessageID:documentType:contextBeforeCursor:mutableOptions:completionHandler:"
- "initWithInput:inputString:openEndedString:whitespaceString:writingOptions:resultOptions:tagger:error:"
- "model did not produce output or produced invalid output"
- "mostRecent4Messages:"
- "no cached smart action intent found"
- "nonWhitespaceIndexInString:"
- "smartActionFollowUpCacheForCompositionMode:"
- "smartActionFollowUpFromModelOutput:smartAction:inputContextHistory:normalizedNamesToNames:inputPreferences:options:"
- "smartActionIntentCacheForCompositionMode:"
- "spaceCorrectionDetailDictionaryForTokenDifferenceManager:tokenEdit:originalAttributedString:sentenceRange:tagger:preferredLanguage:writingOptions:"
- "unable to retrieve smart action follow up cache"
- "unable to retrieve smart action intent detection cache"

```
