## apsd

> `/System/Library/PrivateFrameworks/ApplePushService.framework/apsd`

```diff

-1128.100.2.0.0
-  __TEXT.__text: 0x105c9c
-  __TEXT.__auth_stubs: 0x3180
-  __TEXT.__objc_stubs: 0x10340
+1131.100.1.0.0
+  __TEXT.__text: 0x108a84
+  __TEXT.__auth_stubs: 0x3210
+  __TEXT.__objc_stubs: 0x10420
   __TEXT.__init_offsets: 0xc
-  __TEXT.__objc_methlist: 0xb570
-  __TEXT.__objc_methname: 0x19f82
-  __TEXT.__objc_classname: 0xe3a
-  __TEXT.__objc_methtype: 0x4e13
-  __TEXT.__cstring: 0xff0f
-  __TEXT.__const: 0x74a0
-  __TEXT.__oslogstring: 0x12e97
-  __TEXT.__gcc_except_tab: 0x2728
+  __TEXT.__objc_methlist: 0xb5d0
+  __TEXT.__objc_methname: 0x1a150
+  __TEXT.__objc_classname: 0xe54
+  __TEXT.__objc_methtype: 0x51ad
+  __TEXT.__cstring: 0x103ab
+  __TEXT.__const: 0x75f0
+  __TEXT.__oslogstring: 0x12f77
+  __TEXT.__gcc_except_tab: 0x273c
   __TEXT.__dlopen_cstrs: 0xae
-  __TEXT.__constg_swiftt: 0x1018
-  __TEXT.__swift5_typeref: 0x75e
-  __TEXT.__swift5_reflstr: 0xabd
-  __TEXT.__swift5_fieldmd: 0x908
-  __TEXT.__swift5_types: 0xa8
-  __TEXT.__swift5_capture: 0x258
+  __TEXT.__constg_swiftt: 0x104c
+  __TEXT.__swift5_typeref: 0x7a0
+  __TEXT.__swift5_reflstr: 0xb7d
+  __TEXT.__swift5_fieldmd: 0x9f4
+  __TEXT.__swift5_types: 0xc8
+  __TEXT.__swift5_capture: 0x29c
   __TEXT.__swift_as_entry: 0x48
   __TEXT.__swift_as_ret: 0x20
-  __TEXT.__swift5_builtin: 0x8c
-  __TEXT.__swift5_assocty: 0x78
-  __TEXT.__swift5_proto: 0x40
+  __TEXT.__swift5_builtin: 0xc8
   __TEXT.__swift5_mpenum: 0x8
-  __TEXT.__unwind_info: 0x3cf0
+  __TEXT.__swift5_proto: 0x40
+  __TEXT.__swift5_assocty: 0x78
+  __TEXT.__unwind_info: 0x3d50
   __TEXT.__eh_frame: 0x2f8
-  __DATA_CONST.__auth_got: 0x18d8
-  __DATA_CONST.__got: 0x8b8
-  __DATA_CONST.__auth_ptr: 0x198
-  __DATA_CONST.__const: 0x8a58
-  __DATA_CONST.__cfstring: 0x7dc0
-  __DATA_CONST.__objc_classlist: 0x3e8
-  __DATA_CONST.__objc_protolist: 0x268
+  __DATA_CONST.__auth_got: 0x1920
+  __DATA_CONST.__got: 0x8c0
+  __DATA_CONST.__auth_ptr: 0x1a0
+  __DATA_CONST.__const: 0x8ca0
+  __DATA_CONST.__cfstring: 0x7e20
+  __DATA_CONST.__objc_classlist: 0x3e0
+  __DATA_CONST.__objc_protolist: 0x278
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_protorefs: 0x88
+  __DATA_CONST.__objc_protorefs: 0x90
   __DATA_CONST.__objc_superrefs: 0x2b8
   __DATA_CONST.__objc_intobj: 0x360
   __DATA_CONST.__objc_arraydata: 0x68
   __DATA_CONST.__objc_dictobj: 0xc8
   __DATA_CONST.__objc_arrayobj: 0x30
   __DATA_CONST.__objc_doubleobj: 0x10
-  __DATA.__objc_const: 0x1b140
-  __DATA.__objc_selrefs: 0x5520
-  __DATA.__objc_ivar: 0xbc8
-  __DATA.__objc_data: 0x30c0
-  __DATA.__data: 0x4140
+  __DATA.__objc_const: 0x1b490
+  __DATA.__objc_selrefs: 0x5560
+  __DATA.__objc_ivar: 0xbd4
+  __DATA.__objc_data: 0x3010
+  __DATA.__data: 0x4260
   __DATA.__bss: 0xd28
   __DATA.__common: 0x1b8
   - /System/Library/Frameworks/CFNetwork.framework/CFNetwork

   - /usr/lib/libobjc.A.dylib
   - /usr/lib/swift/libswiftCore.dylib
   - /usr/lib/swift/libswiftCoreFoundation.dylib
-  - /usr/lib/swift/libswiftDarwin.dylib
   - /usr/lib/swift/libswiftDispatch.dylib
   - /usr/lib/swift/libswiftObjectiveC.dylib
   - /usr/lib/swift/libswiftXPC.dylib
   - /usr/lib/swift/libswift_Builtin_float.dylib
   - /usr/lib/swift/libswift_Concurrency.dylib
-  - /usr/lib/swift/libswift_DarwinFoundation1.dylib
-  - /usr/lib/swift/libswift_DarwinFoundation2.dylib
-  - /usr/lib/swift/libswift_DarwinFoundation3.dylib
   - /usr/lib/swift/libswiftos.dylib
-  UUID: D3D0E20C-1519-3B30-B4FB-0D01A6813A56
-  Functions: 6221
-  Symbols:   1139
-  CStrings:  9400
+  UUID: 9D760847-1B61-3F19-BB70-04DE3DAC78CD
+  Functions: 6276
+  Symbols:   1146
+  CStrings:  9446
 
Symbols:
+ _$s10Foundation13__DataStorageC5bytes6lengthACSVSg_Sitcfc
+ _$s10Foundation13__DataStorageCMa
+ _$s10Foundation4DataV14RangeReferenceCMa
+ _$sSS18_fromUTF8RepairingySS6result_Sb11repairsMadetSRys5UInt8VGFZ
+ _$ss5Int32VMn
+ _$ss5Int32VN
+ _sec_protocol_metadata_copy_negotiated_protocol
+ _tb_message_decode_s16
+ _tb_message_decode_s32
+ _tb_message_decode_s8
+ _tb_message_encode_u32
+ _tb_message_raw_encode_s16
+ _tb_message_raw_encode_s32
+ _tb_message_raw_encode_s8
- __swift_FORCE_LOAD_$_swiftDarwin
- __swift_FORCE_LOAD_$_swift_DarwinFoundation1
- __swift_FORCE_LOAD_$_swift_DarwinFoundation2
- __swift_FORCE_LOAD_$_swift_DarwinFoundation3
- _nw_connection_copy_parameters
- _sec_protocol_metadata_get_negotiated_protocol
- _tb_message_raw_decode_u64
CStrings:
+ "%@ Forcing reconnections on all interfaces, ignoring delay reconnect timer."
+ "%@ Reconnecting on all interfaces with reason %d."
+ "%@: Failed to preload identity."
+ "%@: Terminating connection, deleting identity and clearing public token. Connect immediately? %{bool}d Connected on %lu interfaces"
+ "3"
+ "@\"<APSConnectionOffloadServerDelegate><APSOffloadMetricReporter>\""
+ "@\"<APSOffloadMetricReporter>\""
+ "@\"<APSOffloadMetricReporter>\"16@0:8"
+ "@\"NSObject<OS_nw_parameters>\""
+ "APSOffloadMetricReporter"
+ "APSSharedCoder.mm"
+ "ParserError"
+ "Saving keep alive info from AOP. Interval: %f isInInitialGrowth: %{bool}d"
+ "T@\"<APSConnectionOffloadServerDelegate><APSOffloadMetricReporter>\",W,N,V_delegate"
+ "T@\"<APSConnectionOffloadingDelegate>\",W,N,V_offloadDelegate"
+ "T@\"<APSOffloadMetricReporter>\",W,N"
+ "T@\"<APSOffloadMetricReporter>\",W,N,V_metricDelegate"
+ "T@\"APSUserCourier\",R,N,V_rootUserCourier"
+ "T@\"NSObject<OS_nw_parameters>\",&,N,V_parameters"
+ "TB,N,V_establishingOffload"
+ "TB_ASSERT: (aonmicroapsd_microapsdperfsamples__decode(msg, &samples) == TB_ERROR_SUCCESS) && \"failed to decode type: AONMicroAPSD.MicroAPSDPerfSamples\""
+ "TB_ASSERT: (server->reportperfsamples != ((void*)0)) && \"implementation for ReportPerfSamples is not present\""
+ "T^{CourierMessage=^^?CQQ^{SbfRef}^{SbfAtom}*QS*},N,V_courierMessage"
+ "The courier message is expected to be deleted by the time we create a new one."
+ "T{aonmicroapsd_microapsdservicecallback__service_s=^{tb_connection_s}},N,V_service"
+ "^{CourierMessage=^^?CQQ^{SbfRef}^{SbfAtom}*QS*}"
+ "^{CourierMessage=^^?CQQ^{SbfRef}^{SbfAtom}*QS*}16@0:8"
+ "_establishingOffload"
+ "_metricDelegate"
+ "_offloadDelegate"
+ "_parameters"
+ "_processInvalidIdentityAndConnectImmediately:"
+ "_reconnectAllConnectionsWithReason:"
+ "_reconnectIgnoringDelayReconnectTimer:"
+ "_rootUserCourier"
+ "_service"
+ "establishingOffload"
+ "filterForTopicHash:"
+ "metricDelegate"
+ "offloadDelegate"
+ "parameters"
+ "reportOffloadEvents:droppedEvents:"
+ "rollTokenAndReconnectImmediately:"
+ "rootUserCourier"
+ "service"
+ "setEstablishingOffload:"
+ "setMetricDelegate:"
+ "setOffloadDelegate:"
+ "setParameters:"
+ "setService:"
+ "size"
+ "storageUsed"
+ "v16@?0r^{aonmicroapsd_microapsdperfsamples_s={aonmicroapsdu32_v_s=C(?={?=^IQ@?}{?=*QQ}{?=^{tb_message_s}QQQ})}{aonmicroapsdu32_v_s=C(?={?=^IQ@?}{?=*QQ}{?=^{tb_message_s}QQQ})}{aonmicroapsdu32_v_s=C(?={?=^IQ@?}{?=*QQ}{?=^{tb_message_s}QQQ})}{aonmicroapsdu32_v_s=C(?={?=^IQ@?}{?=*QQ}{?=^{tb_message_s}QQQ})}}8"
+ "v20@?0Q8C16"
+ "v20@?0Q8I16"
+ "v20@?0q8C16"
+ "v24@0:8@\"<APSOffloadMetricReporter>\"16"
+ "v24@0:8^{CourierMessage=^^?CQQ^{SbfRef}^{SbfAtom}*QS*}16"
+ "v24@0:8{aonmicroapsd_microapsdservicecallback__service_s=^{tb_connection_s}}16"
+ "v24@?0Q8r^{aonmicroapsd_telemetryeventrecord_s={aonmicroapsd_telemetryevent_s=Q(?={?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}}{?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}C}{?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}}{?=CI}{?=CCC}{?=CCI}{?=CC{aonmicroapsdu8_v_s=C(?={?=*Q@?}{?=*QQ}{?=^{tb_message_s}QQQ})}iIscc}{?=CC{aonmicroapsdu8_v_s=C(?={?=*Q@?}{?=*QQ}{?=^{tb_message_s}QQQ})}iIsccI}{?=CC{aonmicroapsdu8_v_s=C(?={?=*Q@?}{?=*QQ}{?=^{tb_message_s}QQQ})}iIscc})}QC}16"
+ "v24@?0q8r^{aonmicroapsd_telemetryeventrecord_s={aonmicroapsd_telemetryevent_s=Q(?={?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}}{?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}C}{?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}}{?=CI}{?=CCC}{?=CCI}{?=CC{aonmicroapsdu8_v_s=C(?={?=*Q@?}{?=*QQ}{?=^vQQQ})}iIscc}{?=CC{aonmicroapsdu8_v_s=C(?={?=*Q@?}{?=*QQ}{?=^vQQQ})}iIsccI}{?=CC{aonmicroapsdu8_v_s=C(?={?=*Q@?}{?=*QQ}{?=^vQQQ})}iIscc})}QC}16"
+ "v44@0:8r^{aonmicroapsd_telemetryeventrecord_v_s=C(?={?=^{aonmicroapsd_telemetryeventrecord_s}Q@?}{?=*QQ}{?=^{tb_message_s}QQQ})}16{aonmicroapsd_droppedtelemetryeventcount_s=ISSSSSSSS}24"
+ "{aonmicroapsd_microapsdservicecallback__server_s=\"savekeepalivestate\"@?\"reporttelemetryevents\"@?\"reportperfsamples\"@?}"
+ "{aonmicroapsd_microapsdservicecallback__service_s=\"connection\"^{tb_connection_s}}"
+ "{aonmicroapsd_microapsdservicecallback__service_s=^{tb_connection_s}}16@0:8"
- "#"
- "%@ Forcing reconnections on all interfaces"
- "%@: Terminating connection, deleting identity and clearing public token. Connected on %lu interfaces"
- "@\"<APSConnectionOffloadServerDelegate>\""
- "APSOffloadTelemetry"
- "T@\"<APSConnectionOffloadServerDelegate>\",W,N,V_delegate"
- "T@\"<APSConnectionOffloadingDelegate>\",W,N,V_delegate"
- "T@\"APSUserCourier\",&,N,V_mainCourier"
- "T@\"NSMutableDictionary\",&,N,V_offloadingStatePerInterface"
- "TB_ASSERT: (server->reportstats != ((void*)0)) && \"implementation for ReportStats is not present\""
- "T^v,N,V_courierMessage"
- "_forceReconnectionsWithReason:"
- "_mainCourier"
- "_offloadingStatePerInterface"
- "_processInvalidIdentity"
- "currentlyOffloadingOnInterface:"
- "mainCourier"
- "offloadingStatePerInterface"
- "reportWithEvents:droppedEvents:"
- "setCurrentlyOffloading:onInterface:"
- "setMainCourier:"
- "setOffloadingStatePerInterface:"
- "v24@?0Q8r^{aonmicroapsd_telemetryeventrecord_s={aonmicroapsd_telemetryevent_s=Q(?={?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}}{?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}C}{?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}}{?=CI}{?=CCC}{?=CCI}{?=C}{?=CI}{?=C})}QC}16"
- "v24@?0q8r^{aonmicroapsd_telemetryeventrecord_s={aonmicroapsd_telemetryevent_s=Q(?={?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}}{?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}C}{?=CC{aonmicroapsd_keepalivestate_s={aonmicroapsd_seconds_s=d}CC}}{?=CI}{?=CCC}{?=CCI}{?=C}{?=CI}{?=C})}QC}16"
- "{aonmicroapsd_microapsdservicecallback__server_s=\"savekeepalivestate\"@?\"reporttelemetryevents\"@?\"reportstats\"@?}"

```
