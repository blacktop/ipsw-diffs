## ScreenTimeAgent

> `/System/Library/PrivateFrameworks/ScreenTimeCore.framework/ScreenTimeAgent`

```diff

-503.4.14.0.0
-  __TEXT.__text: 0xe3304
+503.5.12.3.0
+  __TEXT.__text: 0xe4958
   __TEXT.__auth_stubs: 0x1ae0
-  __TEXT.__objc_stubs: 0x10dc0
-  __TEXT.__objc_methlist: 0x76d4
-  __TEXT.__const: 0x15b0
-  __TEXT.__gcc_except_tab: 0x18ec
-  __TEXT.__cstring: 0x99f4
-  __TEXT.__oslogstring: 0xf507
-  __TEXT.__objc_methname: 0x19c85
-  __TEXT.__objc_classname: 0x1f56
-  __TEXT.__objc_methtype: 0x5166
-  __TEXT.__swift5_typeref: 0x1242
+  __TEXT.__objc_stubs: 0x10ec0
+  __TEXT.__objc_methlist: 0x77ac
+  __TEXT.__const: 0x15d0
+  __TEXT.__gcc_except_tab: 0x1904
+  __TEXT.__cstring: 0x9c04
+  __TEXT.__oslogstring: 0xf823
+  __TEXT.__objc_methname: 0x19ee3
+  __TEXT.__objc_classname: 0x1f8e
+  __TEXT.__objc_methtype: 0x5236
+  __TEXT.__swift5_typeref: 0x125c
   __TEXT.__swift5_capture: 0x750
-  __TEXT.__constg_swiftt: 0x1018
-  __TEXT.__swift5_fieldmd: 0x860
-  __TEXT.__swift5_reflstr: 0xd59
+  __TEXT.__constg_swiftt: 0x1030
+  __TEXT.__swift5_fieldmd: 0x86c
+  __TEXT.__swift5_reflstr: 0xd89
   __TEXT.__swift5_builtin: 0xa0
   __TEXT.__swift5_assocty: 0xd8
   __TEXT.__swift5_proto: 0xf8
   __TEXT.__swift5_types: 0x9c
   __TEXT.__swift5_protos: 0x48
   __TEXT.__swift5_mpenum: 0x14
-  __TEXT.__unwind_info: 0x3358
+  __TEXT.__unwind_info: 0x33b8
   __TEXT.__eh_frame: 0x2240
   __DATA_CONST.__auth_got: 0xd80
-  __DATA_CONST.__got: 0x890
+  __DATA_CONST.__got: 0x888
   __DATA_CONST.__auth_ptr: 0x90
-  __DATA_CONST.__const: 0x5f20
-  __DATA_CONST.__cfstring: 0x46c0
-  __DATA_CONST.__objc_classlist: 0x570
+  __DATA_CONST.__const: 0x5f88
+  __DATA_CONST.__cfstring: 0x47a0
+  __DATA_CONST.__objc_classlist: 0x578
   __DATA_CONST.__objc_catlist: 0x28
-  __DATA_CONST.__objc_protolist: 0x488
+  __DATA_CONST.__objc_protolist: 0x498
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__objc_protorefs: 0xf8
-  __DATA_CONST.__objc_classrefs: 0xb80
-  __DATA_CONST.__objc_superrefs: 0x3a8
-  __DATA_CONST.__objc_intobj: 0x378
+  __DATA_CONST.__objc_classrefs: 0xb98
+  __DATA_CONST.__objc_superrefs: 0x3b0
+  __DATA_CONST.__objc_intobj: 0x360
   __DATA_CONST.__objc_doubleobj: 0x80
   __DATA_CONST.__objc_arraydata: 0x80
   __DATA_CONST.__objc_arrayobj: 0x90
   __DATA_CONST.__objc_dictobj: 0x78
-  __DATA.__objc_const: 0x1ce58
-  __DATA.__objc_selrefs: 0x4c58
-  __DATA.__objc_ivar: 0x824
-  __DATA.__objc_data: 0x39c8
-  __DATA.__data: 0x46c8
+  __DATA.__objc_const: 0x1d410
+  __DATA.__objc_selrefs: 0x4cb8
+  __DATA.__objc_ivar: 0x834
+  __DATA.__objc_data: 0x3a18
+  __DATA.__data: 0x47a8
   __DATA.__bss: 0x16b0
   __DATA.__common: 0xa0
   - /System/Library/Frameworks/Accounts.framework/Accounts

   - /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
   - /System/Library/PrivateFrameworks/AskTo.framework/AskTo
   - /System/Library/PrivateFrameworks/AskToCore.framework/AskToCore
+  - /System/Library/PrivateFrameworks/BackgroundSystemTasks.framework/BackgroundSystemTasks
   - /System/Library/PrivateFrameworks/BiomeLibrary.framework/BiomeLibrary
   - /System/Library/PrivateFrameworks/BiomeStorage.framework/BiomeStorage
   - /System/Library/PrivateFrameworks/BiomeStreams.framework/BiomeStreams

   - /usr/lib/swift/libswift_Concurrency.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  UUID: 88A7B101-2DD7-38EC-ADE5-0047338C439A
-  Functions: 4948
-  Symbols:   1058
-  CStrings:  7111
+  UUID: E811164F-B246-39CE-BD7E-2C9B1B13F0B8
+  Functions: 4970
+  Symbols:   1059
+  CStrings:  7172
 
Symbols:
+ _$s5AskTo14ATAnswerChoiceC2id5title21completedRequestTitleACSS_S2SSgtcfc
+ _OBJC_CLASS_$_STLocationServicesLockedUserNotificationContext
+ _OBJC_CLASS_$_STLocationServicesUnlockedUserNotificationContext
- _$s5AskTo14ATAnswerChoiceC2id5titleACSS_SStcfc
- _STOrganizationIdentifierPersonal
CStrings:
+ "\x1f\n"
+ "$__lazy_storage_$_accountNotifier"
+ "(%K != %d) AND (%K < %@) AND (%K == NULL)"
+ "(%K != %d) AND (%K == NULL) AND (%K == NULL)"
+ "@\"<STAccountNotifying>\""
+ "@\"<STAccountObserving>\""
+ "@\"NSPersistentHistoryToken\"16@?0@\"NSPersistentStore\"8"
+ "@40@0:8@16q24@?32"
+ "Adding usage object to device that is missing one: %@"
+ "AskForMoreTimeApprovedAllDayAskToAnswerTitle"
+ "AskForMoreTimeApprovedFifteenMinutesAskToAnswerTitle"
+ "AskForMoreTimeApprovedOneHourAskToAnswerTitle"
+ "AskForMoreTimeDeniedAskToAnswerTitle"
+ "B48@0:8@16@24@32@40"
+ "B48@0:8@16@24q32^@40"
+ "Cleaning up persistent history for store %@ from before date %{public}@"
+ "Cleaning up persistent history for store %@ from before token %{public}@"
+ "Delete Persistent History - request failed with error: %@"
+ "Deleting a device that has not received usage in 30 days: %@"
+ "Deleting devices for Cloud sign-out"
+ "Device that is missing usage object also has no assigned user. Unable to add usage object to device. Device will be removed."
+ "Failed to persist fetched usage: %{public}@ %{public}@"
+ "Fetch history after date failed with error: %@"
+ "Fetch history after token failed with error: %@"
+ "Fetch request for non-local devices failed; not cleaning up devices for iCloud sign-out; error details: %@"
+ "For iCloud sign-out, deleted STCoreDevice instances: %@"
+ "Found applicationRecord %@"
+ "Ignoring application record %@ with type %@ (is internal or hidden)"
+ "Not saving icon for %{public}@ due to failure to get application record: %{public}@"
+ "STAccountNotifier"
+ "STAccountNotifying"
+ "STAccountObserving"
+ "STPersistentHistoryCleanupManager.m"
+ "Setting an initial date on a usage object that is missing one: %@"
+ "T@\"<STAccountNotifying>\",&,N,V_accountNotifier"
+ "T@\"<STAccountObserving>\",&,N,V_observer"
+ "T@\"STAccountStateMonitor\",&,N,V_monitor"
+ "T@?,R,V_historyTokenForStore"
+ "_accountNotifier"
+ "_historyTokenForStore"
+ "_monitor"
+ "_transactionsFoundByRequest:forStore:inManagedObjectContext:error:"
+ "_wouldDeletingTransactionsBeforeDate:causeExpiryOfToken:forStore:inManagedObjectContext:"
+ "accountDidUpdateToState:initializing:"
+ "accountNotifier"
+ "cleanUpInContext:beforeDate:error:"
+ "cleanUpPersistentHistoryForStores:inContext:hourAge:error:"
+ "deleteHistoryBeforeToken:"
+ "deleteHistoryRequest not initialized"
+ "device.localUserDeviceState"
+ "device.platform"
+ "fetchRequestForDevicesMissingUsage"
+ "fetchRequestForNonLocalDevices"
+ "historyTokenForStore"
+ "historyTokenFromStore:"
+ "initForLocalDeviceWithPersistenceController:selectedUsageReportType:usageContext:"
+ "initWithPersistenceController:askForTimeManager:mirroringMonitor:accountNotifier:capabilities:"
+ "initWithRelevantStores:hourAge:historyTokenForStore:"
+ "monitor"
+ "postNotificationForContext:"
+ "setAccountNotifier:"
+ "setMonitor:"
+ "v24@0:8@\"<STAccountObserving>\"16"
+ "v24@0:8@\"STUserNotificationContext\"16"
+ "v28@0:8@\"STAccountState\"16B24"
- "\x1f\t"
- "Deleting expired device record: %@"
- "Failed to get application record for %{public}@ %{public}@"
- "Failed to persist fetched usage: %{public}@"
- "Unable to fetch the local identifier: %{public}@"
- "cleaning up persistent history from before %{public}@"
- "fetchRequestForOrphanedDevices"
- "getLocalDeviceIdentifierAndReturnError:"
- "initWithPersistenceController:askForTimeManager:mirroringMonitor:capabilities:"
- "initWithPersistenceController:organizationIdentifier:userDSID:devices:selectedDeviceIdentifier:selectedUsageReportType:usageContext:"
- "initWithRelevantStores:hourAge:"
- "setCoreDuetIdentifier:"

```
