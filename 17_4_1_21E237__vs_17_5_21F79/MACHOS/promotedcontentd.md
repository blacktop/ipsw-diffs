## promotedcontentd

> `/usr/libexec/promotedcontentd`

```diff

-510.12.0.0.0
-  __TEXT.__text: 0x196e44
-  __TEXT.__auth_stubs: 0x21b0
-  __TEXT.__objc_stubs: 0x16820
-  __TEXT.__objc_methlist: 0x125e4
-  __TEXT.__const: 0x13200
-  __TEXT.__objc_methname: 0x2230e
-  __TEXT.__oslogstring: 0xb537
-  __TEXT.__cstring: 0xdb18
-  __TEXT.__objc_classname: 0x244a
-  __TEXT.__objc_methtype: 0x46ea
-  __TEXT.__gcc_except_tab: 0xd48
+511.16.0.0.0
+  __TEXT.__text: 0x19bbe8
+  __TEXT.__auth_stubs: 0x21a0
+  __TEXT.__objc_stubs: 0x16ec0
+  __TEXT.__objc_methlist: 0x12a34
+  __TEXT.__const: 0x13210
+  __TEXT.__objc_methname: 0x22cd4
+  __TEXT.__oslogstring: 0xba00
+  __TEXT.__cstring: 0xded1
+  __TEXT.__objc_classname: 0x24af
+  __TEXT.__objc_methtype: 0x477c
+  __TEXT.__gcc_except_tab: 0xdc8
   __TEXT.__constg_swiftt: 0x1f4c
   __TEXT.__swift5_typeref: 0x15f8
-  __TEXT.__swift5_fieldmd: 0x17a0
+  __TEXT.__swift5_fieldmd: 0x17b8
   __TEXT.__swift5_types: 0x1d4
-  __TEXT.__swift5_reflstr: 0xde3
+  __TEXT.__swift5_reflstr: 0xe03
   __TEXT.__swift5_capture: 0x1c0
   __TEXT.__swift5_proto: 0x2d0
   __TEXT.__swift5_builtin: 0x78
   __TEXT.__swift5_assocty: 0x78
   __TEXT.__swift5_protos: 0x64
   __TEXT.__swift5_mpenum: 0x18
-  __TEXT.__unwind_info: 0x48c4
+  __TEXT.__unwind_info: 0x4b1c
   __TEXT.__eh_frame: 0x1fa8
-  __DATA_CONST.__auth_got: 0x10e8
-  __DATA_CONST.__got: 0x680
+  __DATA_CONST.__auth_got: 0x10e0
+  __DATA_CONST.__got: 0x698
   __DATA_CONST.__auth_ptr: 0x1a8
-  __DATA_CONST.__const: 0xbad8
-  __DATA_CONST.__cfstring: 0xe0a0
-  __DATA_CONST.__objc_classlist: 0xb90
-  __DATA_CONST.__objc_catlist: 0xb8
+  __DATA_CONST.__const: 0xbbc8
+  __DATA_CONST.__cfstring: 0xe400
+  __DATA_CONST.__objc_classlist: 0xbb0
+  __DATA_CONST.__objc_catlist: 0xc0
   __DATA_CONST.__objc_protolist: 0x248
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__objc_protorefs: 0xe0
-  __DATA_CONST.__objc_classrefs: 0xd68
-  __DATA_CONST.__objc_superrefs: 0x6c8
+  __DATA_CONST.__objc_classrefs: 0xda0
+  __DATA_CONST.__objc_superrefs: 0x6e0
   __DATA_CONST.__linkguard: 0x15
-  __DATA_CONST.__objc_intobj: 0x1680
+  __DATA_CONST.__objc_intobj: 0x1698
   __DATA_CONST.__objc_arraydata: 0x700
   __DATA_CONST.__objc_dictobj: 0xa28
   __DATA_CONST.__objc_arrayobj: 0x90
   __DATA_CONST.__objc_doubleobj: 0x20
-  __DATA.__objc_const: 0x25d08
-  __DATA.__objc_selrefs: 0x8460
-  __DATA.__objc_ivar: 0x1400
-  __DATA.__objc_data: 0x6cc8
+  __DATA.__objc_const: 0x262b0
+  __DATA.__objc_selrefs: 0x8640
+  __DATA.__objc_ivar: 0x1434
+  __DATA.__objc_data: 0x6e08
   __DATA.__data: 0x6978
-  __DATA.__bss: 0x4cc0
+  __DATA.__bss: 0x4cd0
   __DATA.__common: 0xf8
   - /System/Library/Frameworks/AdServices.framework/AdServices
   - /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

   - /usr/lib/swift/libswiftObjectiveC.dylib
   - /usr/lib/swift/libswiftXPC.dylib
   - /usr/lib/swift/libswiftos.dylib
-  UUID: 5584E2EB-6E58-3EF6-8FC2-40C05F5B0CDB
-  Functions: 8382
-  Symbols:   2000
-  CStrings:  12154
+  UUID: 29AC7AF0-D141-351B-81A2-6B35107FD3C6
+  Functions: 8479
+  Symbols:   2032
+  CStrings:  12332
 
Symbols:
+ OBJC_IVAR_$_APPBAdData._targetingDimensions
+ OBJC_IVAR_$_APPBAdLayoutDetails._localizedHeadlines
+ OBJC_IVAR_$_APPBAdLayoutDetails._sponsoredByAssetURLForDarkMode
+ OBJC_IVAR_$_APPBLocalizedStringEntry._languageIdentifier
+ OBJC_IVAR_$_APPBLocalizedStringEntry._value
+ OBJC_IVAR_$_APPBTargetingCriteria._criteriaIdentifier
+ OBJC_IVAR_$_APPBTargetingCriteria._criteriaValues
+ OBJC_IVAR_$_APPBTargetingDimensions._exclusionCriterias
+ OBJC_IVAR_$_APPBTargetingDimensions._inclusionCriterias
+ _APPBLocalizedStringEntryReadFrom
+ _APPBTargetingCriteriaReadFrom
+ _APPBTargetingDimensionsReadFrom
+ _OBJC_CLASS_$_APPBLocalizedStringEntry
+ _OBJC_CLASS_$_APPBTargetingCriteria
+ _OBJC_CLASS_$_APPBTargetingDimensions
+ _OBJC_CLASS_$_APSponsorshipAdTransformer
+ _OBJC_CLASS_$_APTargetingCriteria
+ _OBJC_CLASS_$_APTargetingDimensions
+ _OBJC_CLASS_$_PCNativeLocalizedHeadline
+ _OBJC_METACLASS_$_APPBLocalizedStringEntry
+ _OBJC_METACLASS_$_APPBTargetingCriteria
+ _OBJC_METACLASS_$_APPBTargetingDimensions
+ _OBJC_METACLASS_$_APSponsorshipAdTransformer
+ _cloneSecureCodingObject
+ _kAPOriginalContentIdentifier
+ _kAPServerUnfilledReason
+ _kAPSupplementalContext
+ _kAttributionAnalyticsFieldpayloadDeliveryTime
+ _kAttributionAnalyticsFieldpayloadFlowTime
+ _kAttributionAnalyticsFieldtokenClientQueuingTime
+ _kAttributionAnalyticsTimingDelivery
+ _kAttributionAnalyticsTimingPayloadFlow
+ _kAttributionAnalyticsTimingQueuing
- _objc_retain_x7
CStrings:
+ "\x03\x13"
+ "\x04\x18"
+ "+[APAttributionServer signPayloadWithFpdi:requestTimestamp:interval:jsonBody:startDate:payloadDeliveryStartDate:completionHandler:]"
+ "+[APAttributionServer signPayloadWithMescal:requestTimestamp:interval:jsonBody:startDate:deliveryStartDate:isFallback:completionHandler:]_block_invoke"
+ "-[APPBLocalizedStringEntry writeTo:]"
+ "-[APPBTargetingCriteria writeTo:]"
+ "-[APPCControllerCoordinator requestFromLegacyInterfaceForPromotedContents:context:withToken:andBundleID:clientInfo:idAccount:deliverEntireBatch:completionHandler:]"
+ "@\"APPBTargetingDimensions\""
+ "@64@0:8Q16@24@32@40@48@56"
+ "@72@0:8@16@24Q32@40@48@56@?64"
+ "APPBLocalizedStringEntry"
+ "APPBLocalizedStringEntry.m"
+ "APPBTargetingCriteria"
+ "APPBTargetingCriteria.m"
+ "APPBTargetingDimensions"
+ "APSponsorshipAdTransformer"
+ "Attempted to perform EC signing when signing authority is not ready: '%ld'"
+ "B40@0:8@16@24q32"
+ "B64@0:8@16@24@32Q40^@48@?56"
+ "B88@0:8@16@24@32Q40@48@56@64@72@80"
+ "BundleID cannot be nil, aborting the request."
+ "Can't parse impressionIdentifier."
+ "Cannot encrypt a nil string of key: %{public}@"
+ "Content %{public}@ has no targeting dimensions data."
+ "Content override was requested but the copy operation has failed."
+ "Created new context ctx:[%{public}@] for Legacy Interface Sponsorship Ad metric"
+ "EC signing has failed while signing authority state is 'success'."
+ "Failed to Base64 for %{public}@"
+ "Failed to attach new content data to the context"
+ "Failed to clone content data."
+ "Failed to copy content data"
+ "Failed to create content data with server unfilled reason."
+ "Failed to create new managed context ctx:[%{public}@] for Legacy Interface metric."
+ "Failed to find content data in the cache"
+ "Failed to find context in the cache"
+ "Failed to read account data from Keychain"
+ "Loading attribution config"
+ "Metric context ID has invalid format. %{public}@"
+ "Metric environment account id is nil"
+ "Metrics is in backoff for %{sensitive}@. Scheduled time: %{public}@"
+ "Processing a special case for originalContentId: %{public}@."
+ "Processing a special case for serverUnfilledReason: %{public}@"
+ "Sending %lu of %lu contents with identifier %{public}@ and context %{public}@"
+ "Server unfilled reason was requested but the operation has failed."
+ "Sponsorship"
+ "Started..."
+ "Successfully loaded override context for metric %{public}@"
+ "T@\"APPBTargetingDimensions\",&,N,V_targetingDimensions"
+ "T@\"NSDate\",&,N,V_deliveryStartDate"
+ "T@\"NSDate\",&,N,V_tokenPayloadDeliveryStartTime"
+ "T@\"NSMutableArray\",&,N,V_criteriaValues"
+ "T@\"NSMutableArray\",&,N,V_exclusionCriterias"
+ "T@\"NSMutableArray\",&,N,V_inclusionCriterias"
+ "T@\"NSMutableArray\",&,N,V_localizedHeadlines"
+ "T@\"NSString\",&,N,V_criteriaIdentifier"
+ "T@\"NSString\",&,N,V_languageIdentifier"
+ "T@\"NSString\",&,N,V_sponsoredByAssetURLForDarkMode"
+ "TB,R,V_isSponsoredAd"
+ "Unable to get bundle ID for connection. Terminating the connection."
+ "User Account is nil"
+ "Using attribution config loaded value %@"
+ "X\x13\x16\x18\x13\x12\x1f\x13"
+ "_%@"
+ "_OnScreen metric with content identifier %@ for sponsored Ad is attempting to report onScreen but is collapsed."
+ "_createContentDataInternalFrom:newContentDataId:"
+ "_createManagedContextWithId:"
+ "_criteriaIdentifier"
+ "_criteriaValues"
+ "_deliveryStartDate"
+ "_exclusionCriterias"
+ "_inclusionCriterias"
+ "_isSponsoredAd"
+ "_languageIdentifier"
+ "_loadOverrideContextForMetric:"
+ "_localizedHeadlines"
+ "_processContentIdOverrideIfNecessaryForMetric:"
+ "_serverPost:requestTimestamp:payloadDeliveryStartDate:interval:completionHandler:"
+ "_sponsoredByAssetURLForDarkMode"
+ "_targetingDimensions"
+ "_targetingDimensionsFromAdData:"
+ "_tokenPayloadDeliveryStartTime"
+ "adResponseSponsorship"
+ "addCriteriaValues:"
+ "addExclusionCriteria:"
+ "addInclusionCriteria:"
+ "addLocalizedHeadlines:"
+ "anonymousDemandIDRead"
+ "attribution.timingDelivery"
+ "attribution.timingPayloadFlow"
+ "attribution.timingQueuing"
+ "cache-dump"
+ "cache-startgc-all"
+ "clearCriteriaValues"
+ "clearExclusionCriterias"
+ "clearInclusionCriterias"
+ "clearLocalizedHeadlines"
+ "contentIDRead"
+ "copyContentDataId:toNewContentDataId:"
+ "createContentDataForContextId:contentId:withServerUnfilledReason:"
+ "createItemWithRequest:requestTimestamp:interval:jsonBody:startDate:deliveryStartDate:completionHandler:"
+ "criteriaIdentifier"
+ "criteriaValues"
+ "criteriaValuesAtIndex:"
+ "criteriaValuesCount"
+ "criteriaValuesType"
+ "deliveryStartDate"
+ "exclusionCriteria"
+ "exclusionCriteriaAtIndex:"
+ "exclusionCriteriaType"
+ "exclusionCriterias"
+ "exclusionCriteriasCount"
+ "fakeIDString is nil"
+ "handleNewPromotedContent:adsReceived:adsRequested:token:context:lastInBatch:deliverEntireBatch:completionHandler:"
+ "hasSponsoredByAssetURLForDarkMode"
+ "hasTargetingDimensions"
+ "https://amp-api-edge.apps.apple.com"
+ "iAdIDRead"
+ "id=%{public, name=id}lld retryCount=%{public, name=retryCount}ld enableTelemetry=YES "
+ "id=%{public, name=id}lld service=%{public, name=service}lu"
+ "impressionIdentifier is not set."
+ "inclusionCriteria"
+ "inclusionCriteriaAtIndex:"
+ "inclusionCriteriaType"
+ "inclusionCriterias"
+ "inclusionCriteriasCount"
+ "initWithContent:privateContent:andTransientContent:"
+ "initWithIdentifier:maxSize:requestedAdIdentifier:currentContent:adjacentContent:supplementalContext:"
+ "initWithIntervalId:reportingStorefront:requestTimestamp:daemonStartTime:tokenPayloadDeliveryStartTime:tokenReturnedToClientDate:"
+ "initWithLocalizedStringEntry:"
+ "isSponsoredAd"
+ "languageIdentifier"
+ "localizedHeadlines"
+ "localizedHeadlinesAtIndex:"
+ "localizedHeadlinesCount"
+ "localizedHeadlinesType"
+ "nil != self->_criteriaIdentifier"
+ "nil != self->_languageIdentifier"
+ "payloadDeliveryStartDate"
+ "payloadDeliveryTime"
+ "payloadFlowTime"
+ "q24@?0@\"APContentDataInternal\"8@\"APContentDataInternal\"16"
+ "requestFromLegacyInterfaceForPromotedContents:context:withToken:andBundleID:clientInfo:idAccount:deliverEntireBatch:completionHandler:"
+ "scheduledDate"
+ "sendRequestToServer:requestTimestamp:payloadDeliveryTimestamp:interval:error:completionHandler:"
+ "sendTimedAnalytic:fieldName:startDate:endDate:"
+ "sendTimedAnalytic:fieldName:startDate:endDate:additionalFields:"
+ "setCriteriaIdentifier:"
+ "setCriteriaValues:"
+ "setDeliveryStartDate:"
+ "setExclusionCriteria:"
+ "setExclusionCriterias:"
+ "setInclusionCriteria:"
+ "setInclusionCriterias:"
+ "setLanguageIdentifier:"
+ "setLocalizedHeadlines:"
+ "setSponsoredByAssetURLForDarkMode:"
+ "setTargetingDimensions:"
+ "setTokenPayloadDeliveryStartTime:"
+ "setValues:"
+ "signPayloadWithFpdi:requestTimestamp:interval:jsonBody:startDate:payloadDeliveryStartDate:completionHandler:"
+ "signPayloadWithMescal:requestTimestamp:interval:jsonBody:startDate:deliveryStartDate:isFallback:completionHandler:"
+ "sponsoredByAssetURLForDarkMode"
+ "startWithSession:request:requestorId:intervalId:reportingStorefront:requestTimestamp:daemonStartTime:tokenReturnedToClientDate:payloadDeliveryStartDate:"
+ "stringWithUTF8String:"
+ "targetingDimensions"
+ "tokenClientQueuingTime"
+ "tokenPayloadDeliveryStartTime"
+ "toroIDRead"
+ "v20@?0@\"APContentDataInternal\"8B16"
+ "v56@0:8@16@24@32@40@48"
+ "v56@0:8@16@24@32Q40@?48"
+ "v72@0:8@\"NSArray\"16@\"APContext\"24@\"NSUUID\"32@\"NSString\"40@\"APClientInfo\"48@\"<APIDAccount_Private>\"56@?<v@?@\"APContentDataInternal\"B>64"
+ "v72@0:8@16@24Q32@40@48@56@?64"
+ "v72@0:8@16^Q24Q32@40@48B56B60@?64"
+ "v76@0:8@16@24@32@40@48@56B64@?68"
+ "v76@0:8@16@24Q32@40@48@56B64@?68"
- "\x04\x16"
- "+[APAttributionServer signPayloadWithFpdi:requestTimestamp:interval:jsonBody:startDate:completionHandler:]"
- "+[APAttributionServer signPayloadWithMescal:requestTimestamp:interval:jsonBody:startDate:isFallback:completionHandler:]_block_invoke"
- "-[APPCControllerCoordinator requestFromLegacyInterfaceForPromotedContents:context:withToken:andBundleID:clientInfo:idAccount:completionHandler:]"
- "@56@0:8Q16@24@32@40@48"
- "@64@0:8@16@24Q32@40@48@?56"
- "B56@0:8@16@24Q32^@40@?48"
- "B80@0:8@16@24@32Q40@48@56@64@72"
- "Cannot encrypt a nil string"
- "Failed to register for '%@' notification - error %d"
- "Metrics is in backoff for %{sensitive}@"
- "Sending %d of %lu contents with identifier %{public}@ and context %{public}@"
- "Unable to get bundle ID for connection. Please file a radar against Promoted Content | (New Bugs)."
- "X\x13\x16\x18\x13\x12\x1e\x13"
- "_initWithContent:privateContent:andTransientContent:"
- "_serverPost:requestTimestamp:interval:completionHandler:"
- "_setupNotifyListenerForNotification:handler:"
- "com.apple.com.ap.promotedcontentd.dump-cache"
- "com.apple.com.ap.promotedcontentd.startgc-all"
- "createItemWithRequest:requestTimestamp:interval:jsonBody:startDate:completionHandler:"
- "handleNewPromotedContent:adsReceived:adsRequested:token:context:completionHandler:"
- "https://api-edge.apps.apple.com"
- "id=%{public, name=id}lld retryCount=%ld enableTelemetry=YES "
- "initWithIntervalId:reportingStorefront:requestTimestamp:daemonStartTime:tokenReturnedToClientDate:"
- "requestFromLegacyInterfaceForPromotedContents:context:withToken:andBundleID:clientInfo:idAccount:completionHandler:"
- "sendRequestToServer:requestTimestamp:interval:error:completionHandler:"
- "signPayloadWithFpdi:requestTimestamp:interval:jsonBody:startDate:completionHandler:"
- "signPayloadWithMescal:requestTimestamp:interval:jsonBody:startDate:isFallback:completionHandler:"
- "startWithSession:request:requestorId:intervalId:reportingStorefront:requestTimestamp:daemonStartTime:tokenReturnedToClientDate:"
- "v16@?0@\"APContentDataInternal\"8"
- "v64@0:8@16@24Q32@40@48@?56"
- "v64@0:8@16^Q24Q32@40@48@?56"
- "v68@0:8@16@24Q32@40@48B56@?60"
- "v72@0:8@\"NSArray\"16@\"APContext\"24@\"NSUUID\"32@\"NSString\"40@\"APClientInfo\"48@\"<APIDAccount_Private>\"56@?<v@?@\"APContentDataInternal\">64"

```
