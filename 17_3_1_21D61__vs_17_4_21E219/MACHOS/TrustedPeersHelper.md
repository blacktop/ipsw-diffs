## TrustedPeersHelper

> `/System/Library/Frameworks/Security.framework/XPCServices/TrustedPeersHelper.xpc/TrustedPeersHelper`

```diff

-61040.82.1.0.0
-  __TEXT.__text: 0x1f1c50
-  __TEXT.__auth_stubs: 0x1ba0
-  __TEXT.__objc_stubs: 0x2900
-  __TEXT.__objc_methlist: 0x28e4
-  __TEXT.__const: 0x9508
-  __TEXT.__objc_methname: 0x7bc0
-  __TEXT.__cstring: 0x1c392
+61123.100.169.0.0
+  __TEXT.__text: 0x1edcc4
+  __TEXT.__auth_stubs: 0x1c60
+  __TEXT.__objc_stubs: 0x2a00
+  __TEXT.__objc_methlist: 0x2934
+  __TEXT.__const: 0x80f8
+  __TEXT.__cstring: 0x1ccbb
+  __TEXT.__objc_methname: 0x7db0
   __TEXT.__swift5_entry: 0x8
-  __TEXT.__constg_swiftt: 0x30d4
-  __TEXT.__swift5_typeref: 0x32a2
-  __TEXT.__swift5_fieldmd: 0x23b8
-  __TEXT.__swift5_builtin: 0x8c
-  __TEXT.__swift5_reflstr: 0x1e0b
-  __TEXT.__swift5_assocty: 0x2b8
-  __TEXT.__swift5_proto: 0x878
-  __TEXT.__swift5_types: 0x268
-  __TEXT.__objc_classname: 0x44b
-  __TEXT.__objc_methtype: 0x1da1
+  __TEXT.__constg_swiftt: 0x2e08
+  __TEXT.__swift5_typeref: 0x300e
+  __TEXT.__swift5_fieldmd: 0x2070
+  __TEXT.__swift5_reflstr: 0x1c8b
+  __TEXT.__swift5_builtin: 0xb4
+  __TEXT.__swift5_assocty: 0x348
+  __TEXT.__swift5_proto: 0x728
+  __TEXT.__swift5_types: 0x228
+  __TEXT.__objc_classname: 0x464
+  __TEXT.__objc_methtype: 0x1e3c
   __TEXT.__swift5_mpenum: 0x18
-  __TEXT.__swift5_capture: 0x322c
-  __TEXT.__gcc_except_tab: 0x114
+  __TEXT.__swift5_capture: 0x3080
+  __TEXT.__gcc_except_tab: 0x148
   __TEXT.__swift5_protos: 0x18
   __TEXT.__dlopen_cstrs: 0x216
   __TEXT.__oslogstring: 0x2cc
-  __TEXT.__unwind_info: 0x5ec8
-  __TEXT.__eh_frame: 0x5e80
-  __DATA_CONST.__auth_got: 0xde0
-  __DATA_CONST.__got: 0x408
+  __TEXT.__unwind_info: 0x4d5c
+  __TEXT.__eh_frame: 0x6098
+  __DATA_CONST.__auth_got: 0xe40
+  __DATA_CONST.__got: 0x430
   __DATA_CONST.__auth_ptr: 0x78
-  __DATA_CONST.__const: 0x85a0
-  __DATA_CONST.__cfstring: 0x1ee0
-  __DATA_CONST.__objc_classlist: 0x238
+  __DATA_CONST.__const: 0x83d0
+  __DATA_CONST.__cfstring: 0x1f20
+  __DATA_CONST.__objc_classlist: 0x240
   __DATA_CONST.__objc_catlist: 0x20
-  __DATA_CONST.__objc_protolist: 0xc8
+  __DATA_CONST.__objc_protolist: 0xd8
   __DATA_CONST.__objc_imageinfo: 0x8
+  __DATA_CONST.__objc_protorefs: 0x58
+  __DATA_CONST.__objc_classrefs: 0x388
+  __DATA_CONST.__objc_superrefs: 0xf0
   __DATA_CONST.__objc_intobj: 0x30
-  __DATA.__objc_const: 0x7488
-  __DATA.__objc_selrefs: 0x1d80
-  __DATA.__objc_protorefs: 0x50
-  __DATA.__objc_classrefs: 0x388
-  __DATA.__objc_superrefs: 0xf0
-  __DATA.__objc_ivar: 0x29c
-  __DATA.__objc_data: 0x2828
-  __DATA.__data: 0xee38
-  __DATA.__objc_stublist: 0x98
-  __DATA.__common: 0x958
-  __DATA.__bss: 0x10bc0
+  __DATA.__objc_const: 0x7618
+  __DATA.__objc_selrefs: 0x1e10
+  __DATA.__objc_ivar: 0x2a0
+  __DATA.__objc_data: 0x2780
+  __DATA.__data: 0xe100
+  __DATA.__objc_stublist: 0x78
+  __DATA.__common: 0x790
+  __DATA.__bss: 0xe1f0
   - /System/Library/Frameworks/CloudKit.framework/CloudKit
   - /System/Library/Frameworks/CoreData.framework/CoreData
   - /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

   - /usr/lib/swift/libswiftXPC.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  Functions: 10164
-  Symbols:   462
-  CStrings:  3097
+  Functions: 9061
+  Symbols:   456
+  CStrings:  3150
 
Symbols:
+ _CKUnderlyingErrorDomain
+ _objc_release_x3
- _CKInternalErrorDomain
- _OBJC_METACLASS_$__TtCO18TrustedPeersHelper13CuttlefishAPI21ReportHealthOperation
- _OBJC_METACLASS_$__TtCO18TrustedPeersHelper13CuttlefishAPI26PushHealthInquiryOperation
- _OBJC_METACLASS_$__TtCO18TrustedPeersHelper13CuttlefishAPI28GetClubCertificatesOperation
- _OBJC_METACLASS_$__TtCO18TrustedPeersHelper13CuttlefishAPI31FetchSosiCloudIdentityOperation
- _objc_retain_x10
- _objc_retain_x5
- _swift_projectBox
CStrings:
+ "<HealthCheckResult: postRepairCFU: %@, postEscrowCFU: %@, resetOctagon: %@, leaveTrust: %@, reroll: %@, moveRequest? %@, totalEscrowRecords: %llu, collectableEscrowRecords: %llu, collectedEscrowRecords: %llu, escrowRecordGarbageCollectionEnabled: %@, totalTlkShares: %llu, collectableTlkShares: %llu, collectedTlkShares: %llu, tlkShareGarbageCollectionEnabled: %@, totalPeers: %llu, trustedPeers: %llu, superfluousPeers: %llu, peersCleanedup: %llu, superfluousPeersCleanupEnabled: %@>"
+ "@\"NSArray\"16@0:8"
+ "@\"TPPeer\"24@0:8@\"NSString\"16"
+ "@136@0:8B16B20B24B28B32@36Q44Q52Q60B68Q72Q80Q88B96Q100Q108Q116Q124B132"
+ "AAFAnalyticsEvent"
+ "AAFAnalyticsEvent+Security.m"
+ "AKAccountManager"
+ "Can't construct Array with count < 0"
+ "Class getAAFAnalyticsEventClass(void)_block_invoke"
+ "Class getAKAccountManagerClass(void)_block_invoke"
+ "Could not find peerMO for beneficiary %{public}s"
+ "Couldn't parse peer identity: %{public}s"
+ "Currently know about %lu peers"
+ "DBAdapter PeerMO has no ID?"
+ "DBAdapter peer %{public}s has no/incomplete dynamic info/sig"
+ "DBAdapter peer %{public}s has no/incomplete permanent info/sig"
+ "DBAdapter peer %{public}s has no/incomplete stable info/sig"
+ "DBAdapter peer %{public}s has unparseable dynamic info/sig"
+ "DBAdapter peer %{public}s has unparseable stable info/sig"
+ "DBAdapter unable to construct permanent info for peerID %{public}s"
+ "DBAdapter unable to init for peerID %{public}s): %{public}s"
+ "Division by zero"
+ "Division results in an overflow"
+ "Error creating voucher using reroll: %{public}s"
+ "Evicted machine ID last modified %{public}s; distrusting: %{public}s"
+ "Evicted machine ID last modified %{public}s; leaving evicted: %{public}s"
+ "Evicted removal! machine ID last modified %{public}s; tagging as evicted: %{public}s"
+ "Failed to calculate hasAnyPeers: %{public}s"
+ "Failed to fetch peerID %{public}s: %{public}s"
+ "Failed to fetch peers for enumeration: %{public}s"
+ "Failed to fetch peers: %{public}s"
+ "Failed to fetch vouchers for count: %{public}s"
+ "Failed to fetch vouchers for enumeration: %{public}s"
+ "Failed to move vouchers for beneficiary %{public}s): %@"
+ "Failed to verify hmac"
+ "Insufficient space allocated to copy string contents"
+ "MachineID was allowed but no longer on the TDL, last modified %{public}s, tagging as ghosted fromt TDL: %{public}s"
+ "NSString *getkAAFDeviceSessionId(void)"
+ "NSString *getkAAFFlowId(void)"
+ "Negative value is not representable"
+ "Newly evicted machine ID: %{public}s"
+ "Newly removed with unknown reason machine ID: %{public}s"
+ "REPAIR_ACTION_REROLL"
+ "Saved model with %lu peers"
+ "Seen on full list machine ID isn't on full list, last modified %{public}s, distrusting: %{public}s"
+ "Seen on full list machine ID isn't on full list, last modified %{public}s, ignoring: %{public}s"
+ "Swift/Array.swift"
+ "Swift/ContiguousArrayBuffer.swift"
+ "Swift/IntegerTypes.swift"
+ "Swift/Integers.swift"
+ "Swift/StringTesting.swift"
+ "Swift/StringUTF8View.swift"
+ "Swift/UnsafeBufferPointer.swift"
+ "Swift/UnsafePointer.swift"
+ "Swift/UnsafeRawPointer.swift"
+ "T@\"NSString\",?,R,C"
+ "TB,V_reroll"
+ "TPModelDBAdapterProtocol"
+ "Unexpectedly found nil while unwrapping an Optional value"
+ "Unknown reason machine ID last modified %{public}s; distrusting: %{public}s"
+ "Unknown reason machine ID last modified %{public}s; leaving unknown reason: %{public}s"
+ "Unknown reason removal! machine ID last modified %{public}s; tagging as unknown reason: %{public}s"
+ "UnsafeMutableBufferPointer with negative count"
+ "UnsafeMutablePointer.initialize overlapping range"
+ "UnsafeMutablePointer.initialize with negative count"
+ "UnsafeMutablePointer.moveInitialize with negative count"
+ "UnsafeMutableRawPointer.initializeMemory overlapping range"
+ "User initiated removal! machine ID last modified %{public}s; distrusting: %{public}s"
+ "Vouching With Reroll"
+ "Vouching With Reroll %{public}s"
+ "Vouching with Reroll failed for %{public}s: %{public}s"
+ "_TtCC18TrustedPeersHelper9Container9DBAdapter"
+ "_accountInfo"
+ "_reroll"
+ "_unsetHmacpeers"
+ "_updatedHmacpeers"
+ "aa_altDSID"
+ "accountAccessTelemetryOptInForAccount:"
+ "addOrUpdate peer %{public}s has no/incomplete permanent info/sig"
+ "authKitAccountWithAltDSID:"
+ "beginning a vouchWithReroll"
+ "beneficiary.container == %@"
+ "bestRecoveryKeyForStableInfo:vouchers:"
+ "bestWalrusForStableInfo:walrusStableChanges:"
+ "bestWebAccessForStableInfo:webAccessStableChanges:"
+ "calculateHmacWithHmacKey:"
+ "com.apple.security.aafanalyticsevent.queue"
+ "copyPeerWithNewDynamicInfo:forPeerWithID:error:"
+ "copyPeerWithNewStableInfo:forPeerWithID:error:"
+ "countForFetchRequest:error:"
+ "dbAdapter"
+ "duplicate voucher for peerID %{public}s sponsorID %{public}s beneficiaryID %{public}s reason %{public}lu"
+ "enumeratePeersUsingBlock:"
+ "enumerateVouchersUsingBlock:"
+ "failed generating random bytes: %d"
+ "failed to construct peer for %{public}s: %@"
+ "fetchViableBottles in %{public}s from source (%{public}ld)"
+ "fetchViableEscrowRecords in %{public}s from source (%{public}ld)"
+ "generating random failed: "
+ "getHmacKey: ignoring %{public}s"
+ "getHmacKey: locked -- cannot return hmac"
+ "getHmacKey: locked -- cannot save hmac"
+ "getHmacKey: saveSecret failed: %{public}s"
+ "hasAnyPeers"
+ "hmacKey"
+ "hmacSig"
+ "idmsTrustedDeviceListFetchDate"
+ "initWithDecrypter:dbAdapter:"
+ "initWithEventName:eventCategory:initData:"
+ "initWithPermanentInfo:stableInfo:dynamicInfo:error:"
+ "initWithPermanentInfo:stableInfo:dynamicInfo:hmacKey:hmacSig:error:"
+ "initWithPostRepairCFU:postEscrowCFU:resetOctagon:leaveTrust:reroll:moveRequest:totalEscrowRecords:collectableEscrowRecords:collectedEscrowRecords:escrowRecordGarbageCollectionEnabled:totalTlkShares:collectableTlkShares:collectedTlkShares:tlkShareGarbageCollectionEnabled:totalPeers:trustedPeers:superfluousPeers:peersCleanedup:superfluousPeersCleanupEnabled:"
+ "invalid Collection: less than 'count' elements in collection"
+ "isCKInternalServerHTTPError"
+ "kAAFDeviceSessionId"
+ "kAAFFlowId"
+ "loadModel: loaded %lu peers"
+ "loadModel: loaded %lu vouchers"
+ "onqueueRemoveDuplicateVouchers complete"
+ "onqueueRemoveDuplicateVouchers start"
+ "peerCount"
+ "permanentInfoWithMachineID:modelID:epoch:signingKeyPair:encryptionKeyPair:creationTime:peerIDHashAlgo:error:"
+ "persisting changes failed: %{public}s"
+ "primaryAuthKitAccount"
+ "reason"
+ "reroll"
+ "setAllowedMachineIDs(_:userInitiatedRemovals:evictedRemovals:unknownReasonRemovals:honorIDMSListChanges:version:reply:)"
+ "setAllowedMachineIDsWithSpecificUser:allowedMachineIDs:userInitiatedRemovals:evictedRemovals:unknownReasonRemovals:honorIDMSListChanges:version:reply:"
+ "setFetchBatchSize:"
+ "setHmacSig:"
+ "setIdmsTrustedDeviceListFetchDate:"
+ "setPropertiesToFetch:"
+ "setReroll:"
+ "sharedInstance"
+ "telemetryDeviceSessionIDForAccount:"
+ "tlkSharesBatch"
+ "unable to create directory"
+ "unsetHMACpeers"
+ "updatedHMACpeers"
+ "v24@0:8@?<v@?@\"TPPeer\"^B>16"
+ "v24@0:8@?<v@?@\"TPVoucher\"^B>16"
+ "v24@?0@\"TPPeer\"8^B16"
+ "v24@?0@\"TPVoucher\"8^B16"
+ "v48@0:8@\"TPSpecificUser\"16@\"NSString\"24@\"NSArray\"32@?<v@?@\"NSData\"@\"NSData\"@\"NSArray\"@\"TrustedPeersHelperTLKRecoveryResult\"@\"NSError\">40"
+ "v76@0:8@\"TPSpecificUser\"16@\"NSSet\"24@\"NSSet\"32@\"NSSet\"40@\"NSSet\"48B56@\"NSString\"60@?<v@?B@\"NSError\">68"
+ "v76@0:8@16@24@32@40@48B56@60@?68"
+ "void *AuthKitLibrary(void)"
+ "vouchWithReroll complete: %{public}s"
+ "vouchWithReroll(oldPeerID:tlkShares:reply:)"
+ "vouchWithRerollWithSpecificUser:oldPeerID:tlkShares:reply:"
+ "voucher cleanup unable to find beneficiary relation %{public}@"
+ "voucher dedup unable to construct TPVoucher for peerID %{public}s, leaving in DB"
+ "voucher dedup unable to find beneficiary relation %{public}@"
+ "voucher inconsistency for peerID %{public}s sponsorID %{public}s beneficiaryID %{public}s reason %{public}lu"
+ "voucher kept for peerID %{public}s sponsorID %{public}s beneficiaryID %{public}s reason %{public}lu"
+ "voucherCount"
- "<HealthCheckResult: postRepairCFU: %@, postEscrowCFU: %@, resetOctagon: %@, leaveTrust: %@, moveRequest? %@, totalEscrowRecords: %llu, collectableEscrowRecords: %llu, collectedEscrowRecords: %llu, escrowRecordGarbageCollectionEnabled: %@, totalTlkShares: %llu, collectableTlkShares: %llu, collectedTlkShares: %llu, tlkShareGarbageCollectionEnabled: %@, totalPeers: %llu, trustedPeers: %llu, superfluousPeers: %llu, peersCleanedup: %llu, superfluousPeersCleanupEnabled: %@>"
- "@132@0:8B16B20B24B28@32Q40Q48Q56B64Q68Q76Q84B92Q96Q104Q112Q120B128"
- "Adding allowed machine IDs: %{public}s"
- "Adding allowed machineID failed for %{public}s: %{public}s"
- "Adding allowed machineIDs"
- "Adding allowed machineIDs for %{public}s: %{public}s"
- "Continue to trust machine ID: %{public}s"
- "Currently know about %ld peers"
- "Dropping peer from model: %{private}s"
- "Error adding to machine ID list: %{public}s"
- "Error removing from machine ID list: %{public}s"
- "EscrowInformation.Metadata.ClientMetadata"
- "Now suspicious of machine ID: %{public}s"
- "Peer not found, but that's ok: %{private}s"
- "PushHealthInquiry failed for %{public}s: %{public}s"
- "PushHealthInquiry for %{public}s"
- "Removing allowed machine IDs: %{public}s"
- "Removing allowed machineID failed for %{public}s: %{public}s"
- "Removing allowed machineIDs"
- "Removing allowed machineIDs for %{public}s: %{public}s"
- "ReportHealth failed for %{public}s: %{public}s"
- "ReportHealth for %{public}s"
- "Saved model with %ld peers"
- "Suspicious of new machine ID: %{public}s"
- "TrustedPeersHelper.FetchSosiCloudIdentityOperation"
- "TrustedPeersHelper.GetClubCertificatesOperation"
- "TrustedPeersHelper.PushHealthInquiryOperation"
- "TrustedPeersHelper.ReportHealthOperation"
- "_TtCO18TrustedPeersHelper13CuttlefishAPI21ReportHealthOperation"
- "_TtCO18TrustedPeersHelper13CuttlefishAPI26PushHealthInquiryOperation"
- "_TtCO18TrustedPeersHelper13CuttlefishAPI28GetClubCertificatesOperation"
- "_TtCO18TrustedPeersHelper13CuttlefishAPI31FetchSosiCloudIdentityOperation"
- "addAllow complete: %{public}s"
- "addAllow(_:reply:)"
- "addAllowedMachineIDsWithSpecificUser:machineIDs:reply:"
- "allPeers"
- "allVouchers"
- "all_peers_count"
- "bestRecoveryKeyForStableInfo:dynamicInfo:vouchers:"
- "bestWalrusForStableInfo:dynamicInfo:walrusStableChanges:"
- "bestWebAccessForStableInfo:dynamicInfo:webAccessStableChanges:"
- "certdata"
- "certificates"
- "cloud_identity"
- "deletePeerWithID:"
- "device_machine_id"
- "escrow_records"
- "excluded"
- "federations"
- "fetchSOSiCloudIdentity"
- "fetchSosiCloudIdentity(_:completion:)"
- "fetchViableBottles in %{public}s from source (%{public}ld"
- "fetchViableEscrowRecords in %{public}s from source (%{public}ld"
- "getClubCertificates"
- "getClubCertificates(_:completion:)"
- "graph_valid"
- "graph_validation_error"
- "included"
- "initWithDecrypter:"
- "initWithPostRepairCFU:postEscrowCFU:resetOctagon:leaveTrust:moveRequest:totalEscrowRecords:collectableEscrowRecords:collectedEscrowRecords:escrowRecordGarbageCollectionEnabled:totalTlkShares:collectableTlkShares:collectedTlkShares:tlkShareGarbageCollectionEnabled:totalPeers:trustedPeers:superfluousPeers:peersCleanedup:superfluousPeersCleanupEnabled:"
- "invalid_peers_count"
- "loadModel unable to update dynamic info for peer(%{public}@): %{public}s"
- "loadModel unable to update stable info for peer(%{public}@): %{public}s"
- "loadModel: loaded %ld peers"
- "loadModel: loaded %ld vouchers"
- "loadModel: peer %{public}s has no dynamic info"
- "loadModel: peer %{public}s has no stable info"
- "loadModel: peer %{public}s has unparseable dynamic info"
- "loadModel: peer %{public}s has unparseable stable info"
- "machine_id"
- "missing_peers"
- "octagon_ego_identity"
- "octagon_encryption_key"
- "octagon_peer_id"
- "octagon_signing_key"
- "octagon_trust_state"
- "os_version"
- "peer_graph"
- "peer_name"
- "permanentInfoWithMachineID:modelID:epoch:signingKeyPair:encryptionKeyPair:peerIDHashAlgo:error:"
- "pushHealthInquiry"
- "pushHealthInquiry(_:completion:)"
- "pushHealthInquiry(reply:)"
- "pushHealthInquiryWithSpecificUser:reply:"
- "registerPeerWithPermanentInfo:"
- "registerVoucher:"
- "removeAllow complete: %{public}s"
- "removeAllow(_:reply:)"
- "removeAllowedMachineIDsWithSpecificUser:machineIDs:reply:"
- "removePeersObject:"
- "reportHealth complete %{public}s"
- "reportHealth(_:completion:)"
- "reportHealth(request:reply:)"
- "reportHealthWithSpecificUser:stateMachineState:trustState:reply:"
- "setAllowedMachineIDs(_:honorIDMSListChanges:version:reply:)"
- "setAllowedMachineIDsWithSpecificUser:allowedMachineIDs:honorIDMSListChanges:version:reply:"
- "sos_peer_id"
- "sos_trust_state"
- "state_machine_state"
- "trusted_root_cert_versions"
- "updateDynamicInfo:forPeerWithID:error:"
- "updateStableInfo:forPeerWithID:error:"
- "v40@0:8@\"TPSpecificUser\"16@\"NSArray\"24@?<v@?@\"NSError\">32"
- "v48@0:8@\"TPSpecificUser\"16@\"NSString\"24@\"NSString\"32@?<v@?@\"NSError\">40"
- "v52@0:8@\"TPSpecificUser\"16@\"NSSet\"24B32@\"NSString\"36@?<v@?B@\"NSError\">44"
- "v52@0:8@16@24B32@36@?44"
- "valid_peer"

```
