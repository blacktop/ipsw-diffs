## amsaccountsd

> `/System/Library/PrivateFrameworks/AppleMediaServices.framework/amsaccountsd`

```diff

-7.3.4.0.0
-  __TEXT.__text: 0xbec6c
-  __TEXT.__auth_stubs: 0x1d70
-  __TEXT.__objc_stubs: 0x8880
-  __TEXT.__objc_methlist: 0x2fb8
-  __TEXT.__const: 0x6900
-  __TEXT.__objc_classname: 0xce9
-  __TEXT.__objc_methname: 0xbfbb
-  __TEXT.__oslogstring: 0x8b85
-  __TEXT.__objc_methtype: 0x39d8
-  __TEXT.__cstring: 0x5578
-  __TEXT.__gcc_except_tab: 0x8a8
-  __TEXT.__dlopen_cstrs: 0x2a3
-  __TEXT.__constg_swiftt: 0xdc0
-  __TEXT.__swift5_typeref: 0x112d
-  __TEXT.__swift5_reflstr: 0x996
-  __TEXT.__swift5_fieldmd: 0x106c
-  __TEXT.__swift5_capture: 0x1dc
+7.4.38.2.4
+  __TEXT.__text: 0xc90a0
+  __TEXT.__auth_stubs: 0x1e80
+  __TEXT.__objc_stubs: 0x8980
+  __TEXT.__objc_methlist: 0x3070
+  __TEXT.__const: 0x5af0
+  __TEXT.__objc_classname: 0xce8
+  __TEXT.__objc_methname: 0xc2d3
+  __TEXT.__oslogstring: 0x8f05
+  __TEXT.__objc_methtype: 0x3a1b
+  __TEXT.__cstring: 0x600f
+  __TEXT.__gcc_except_tab: 0x88c
+  __TEXT.__dlopen_cstrs: 0x24d
+  __TEXT.__constg_swiftt: 0xf0c
+  __TEXT.__swift5_typeref: 0x1239
+  __TEXT.__swift5_reflstr: 0xa86
+  __TEXT.__swift5_fieldmd: 0x11b0
+  __TEXT.__swift5_capture: 0x238
   __TEXT.__swift5_builtin: 0x28
   __TEXT.__swift5_assocty: 0x138
-  __TEXT.__swift5_proto: 0x354
-  __TEXT.__swift5_types: 0x118
-  __TEXT.__swift5_protos: 0x44
+  __TEXT.__swift5_proto: 0x360
+  __TEXT.__swift5_types: 0x12c
+  __TEXT.__swift5_protos: 0x48
   __TEXT.__swift5_mpenum: 0x8
-  __TEXT.__unwind_info: 0x3120
-  __TEXT.__eh_frame: 0x29e0
-  __DATA_CONST.__auth_got: 0xec8
-  __DATA_CONST.__got: 0x4b8
+  __TEXT.__unwind_info: 0x2ba4
+  __TEXT.__eh_frame: 0x31e8
+  __DATA_CONST.__auth_got: 0xf50
+  __DATA_CONST.__got: 0x4c0
   __DATA_CONST.__auth_ptr: 0xb8
-  __DATA_CONST.__const: 0x5410
-  __DATA_CONST.__cfstring: 0x35c0
-  __DATA_CONST.__objc_classlist: 0x260
-  __DATA_CONST.__objc_catlist: 0x90
-  __DATA_CONST.__objc_protolist: 0x210
+  __DATA_CONST.__const: 0x57d0
+  __DATA_CONST.__cfstring: 0x3660
+  __DATA_CONST.__objc_classlist: 0x270
+  __DATA_CONST.__objc_catlist: 0x98
+  __DATA_CONST.__objc_protolist: 0x220
   __DATA_CONST.__objc_imageinfo: 0x8
+  __DATA_CONST.__objc_protorefs: 0xb0
+  __DATA_CONST.__objc_classrefs: 0x698
+  __DATA_CONST.__objc_superrefs: 0x178
   __DATA_CONST.__objc_intobj: 0x60
-  __DATA.__objc_const: 0xae00
-  __DATA.__objc_selrefs: 0x2968
-  __DATA.__objc_protorefs: 0xa0
-  __DATA.__objc_classrefs: 0x688
-  __DATA.__objc_superrefs: 0x178
-  __DATA.__objc_ivar: 0x2e4
-  __DATA.__objc_data: 0x16f8
-  __DATA.__data: 0x3368
-  __DATA.__bss: 0x62f8
-  __DATA.__common: 0x80
+  __DATA.__objc_const: 0xaf70
+  __DATA.__objc_selrefs: 0x2a08
+  __DATA.__objc_ivar: 0x2dc
+  __DATA.__objc_data: 0x1870
+  __DATA.__data: 0x3578
+  __DATA.__bss: 0x6418
+  __DATA.__common: 0xc8
   SMOOTH.SMOOTH: 0xc
   - /System/Library/Frameworks/Accounts.framework/Accounts
   - /System/Library/Frameworks/CloudKit.framework/CloudKit

   - /System/Library/Frameworks/LocalAuthentication.framework/LocalAuthentication
   - /System/Library/Frameworks/Security.framework/Security
   - /System/Library/Frameworks/UserNotifications.framework/UserNotifications
+  - /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
   - /System/Library/PrivateFrameworks/AppleMediaServices.framework/AppleMediaServices
   - /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
   - /System/Library/PrivateFrameworks/BaseBoard.framework/BaseBoard

   - /usr/lib/swift/libswift_Concurrency.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  UUID: 1CE73734-EE56-3659-A559-C034369E3660
-  Functions: 3850
-  Symbols:   868
-  CStrings:  4013
+  UUID: CA0B1D0B-238A-3842-A18B-CB3B1F8043F8
+  Functions: 4046
+  Symbols:   887
+  CStrings:  4109
 
Symbols:
+ _$s10Foundation4DataV06InlineB0VyAESWcfC
+ _$s10Foundation4DataV10LargeSliceVyAESWcfC
+ _$s10Foundation4DataV11InlineSliceVyAESWcfC
+ _$s18AppleMediaServices13DeviceDetailsO28deviceIsRunningInternalBuildSbyFZ
+ _$s18AppleMediaServices13DeviceDetailsOAA0D11InformationAAWP
+ _$s18AppleMediaServices13DeviceDetailsOMa
+ _$s18AppleMediaServices17DeviceInformationMp
+ _$s18AppleMediaServices17DeviceInformationP23deviceUnlockedSinceBootSbSgyFZTj
+ _$sSw10copyMemory4fromySW_tF
+ _$ss17_assertionFailure__4file4line5flagss5NeverOs12StaticStringV_A2HSus6UInt32VtF
+ _$ss18_fatalErrorMessage__4file4line5flagss5NeverOs12StaticStringV_A2HSus6UInt32VtF
+ _$ss22KeyedDecodingContainerV15decodeIfPresent_6forKeySSSgSSm_xtKF
+ _$ss22KeyedDecodingContainerV15decodeIfPresent_6forKeys6UInt64VSgAFm_xtKF
+ _$ss22KeyedEncodingContainerV15encodeIfPresent_6forKeyySSSg_xtKF
+ _$ss22KeyedEncodingContainerV15encodeIfPresent_6forKeyys6UInt64VSg_xtKF
+ _AMSODIServiceIdentifierAmpPaidBuy
+ _AMSStorageDatabaseDefaultDomain
+ _OBJC_CLASS_$_AADeviceInfo
+ _OBJC_CLASS_$_AMSAccountDeviceInfoTask
+ _OBJC_CLASS_$_AMSEngagement
+ _OBJC_CLASS_$_AMSRegulatoryEligibilityTask
+ _OBJC_CLASS_$_AMSStorageDatabase
+ _swift_allocateGenericClassMetadata
+ _swift_checkMetadataState
+ _swift_getErrorValue
+ _swift_getGenericMetadata
+ _swift_initClassMetadata2
- _$sSw5countSivg
- _AMSDemoAccountIdentifier
- _AMSLocalAccountIdentifier
- _OBJC_CLASS_$_DIAttributeCustom
- _OBJC_CLASS_$_DIExecutionFeedback
- _OBJC_CLASS_$_DIPage
- _OBJC_CLASS_$_DIVerificationSession
- _OBJC_CLASS_$_DIVerificationSessionContext
CStrings:
+ "\x1a"
+ "%02x"
+ "%{public}@ Complete cookie database cleanup and start XPC"
+ "%{public}@ Updating regulatory eligibility"
+ "%{public}@: [%{public}@] Acting on first device unlock notification"
+ "%{public}@: [%{public}@] Buddy has finished."
+ "%{public}@: [%{public}@] Did finish running device account updater"
+ "%{public}@: [%{public}@] Did finish running device account updater in response to buddy exit"
+ "%{public}@: [%{public}@] Did finish running device account updater in response to buddy exit with error %{public}@"
+ "%{public}@: [%{public}@] Did finish running device account updater with error %{public}@"
+ "%{public}@: [%{public}@] Evaluating if to run privacy updater"
+ "%{public}@: [%{public}@] Flattening JSON dictionary into AFDS"
+ "%{public}@: [%{public}@] Generating base64-encoded AFDS"
+ "%{public}@: [%{public}@] ODI evaluation not supported for action: %{public}@"
+ "%{public}@: [%{public}@] Partial assessments not supported for action: %@"
+ "%{public}@: [%{public}@] Successfully generated AFDS = %{public}@"
+ "%{public}@Caching cookies. cookies = %{public}@ | accountIdentifier = %{public}@"
+ "%{public}@Eligibility engine is requesting input."
+ "%{public}@Found cached cookie properties. cookieProperties = %{public}@ | identifier = %{public}@"
+ "%{public}@No account, environment or token to perform registration. Skipping registration. environment: %{public}@ | account: %{public}@ | token: %{public}@)"
+ "%{public}@Not posting token for the local account. (env: %{public}@)"
+ "%{public}@Throttling registration. account: %{public}@ | environment: %{public}@"
+ "-scoreWithScoreRequest:completionHandler is deprecated."
+ "."
+ "/"
+ "Action Not Supported"
+ "Action not supported: %@"
+ "Auth plugin handles known bundle privacy"
+ "Bundle owner could not be found. Will begin info task."
+ "Division by zero"
+ "Division results in an overflow"
+ "Error loading data:"
+ "Expected the account identifier not to contain path components"
+ "Failed to aquire acknowledgement"
+ "Failed to determine bundle owner value"
+ "Failed to determine lasset value"
+ "Failed to encode AFDS."
+ "Failed to update account"
+ "Generating a multi-user token"
+ "Insufficient space allocated to copy string contents"
+ "Negative value is not representable"
+ "No account provided"
+ "No iTunes account to handle"
+ "ODIAttributeKeyCallerID"
+ "ODIAttributeKeyUserEmail"
+ "ODIAttributeKeyUserFirstName"
+ "ODIAttributeKeyUserLastName"
+ "ODIAttributeKeyUserPhoneNumber"
+ "ODIServiceProviderIdAmpPaidBuy"
+ "Presentation handed off to engagement"
+ "Privacy task completed with false"
+ "Privacy will be handled by auth plugin"
+ "Private listening setting changed."
+ "Provided owner status"
+ "Swift/ContiguousArrayBuffer.swift"
+ "Swift/IntegerTypes.swift"
+ "Swift/Integers.swift"
+ "Swift/StringTesting.swift"
+ "Swift/StringUTF8View.swift"
+ "Swift/UnsafeBufferPointer.swift"
+ "Swift/UnsafePointer.swift"
+ "Swift/UnsafeRawPointer.swift"
+ "T@\"AMSBagKeySet\",?,R,N"
+ "T@\"AMSLRUCache\",R,N,V_cookiePropertyCache"
+ "T@\"AMSProcessInfo\",?,R,C,N"
+ "T@\"NSString\",?,R,C"
+ "T@\"_TtC12amsaccountsd27DeviceAccountPrivacyUpdater\",N,R"
+ "TB,?,R,N"
+ "Unexpectedly found nil while unwrapping an Optional value"
+ "Unknown Encoding Error"
+ "UnsafeMutableBufferPointer with negative count"
+ "UnsafeMutablePointer.initialize overlapping range"
+ "UnsafeMutablePointer.initialize with negative count"
+ "UnsafeMutablePointer.moveInitialize with negative count"
+ "UnsafeMutableRawPointer.initializeMemory overlapping range"
+ "UnsafeMutableRawPointer.initializeMemory with negative count"
+ "Update in progress"
+ "Update in progress already"
+ "Will begin update for active itunes account"
+ "Will present for account"
+ "_TtC12amsaccountsd15AuthURLDelegate"
+ "_TtC12amsaccountsd27DeviceAccountPrivacyUpdater"
+ "_accountIsEligibleForPushNotifications:"
+ "_cacheCookieProperties:forIdentifier:"
+ "_cachedCookiePropertiesForIdentifier:"
+ "_clearAllCachedCookieProperties"
+ "_clearDanglingCookieDatabasesWithCompletion:"
+ "_cookiePropertyCache"
+ "_createODISessionWithSessionIdentifier:cacheIdentifier:accountType:bundleIdentifier:completion:"
+ "_generateLegacyFDSWithRequest:completion:"
+ "_generateODIFDSWithRequest:completion:"
+ "_handleCachedDataUpdate"
+ "_handleDeviceLanguageChangeNotification:"
+ "_registerAccounts:withOptions:"
+ "_updateDeviceAccountPrivacyIfNeeded"
+ "_updateRegulatoryEligibility"
+ "accountType"
+ "ams_isBackingAccountForActiveiCloudAccount"
+ "ams_isBundleOwner"
+ "ams_propertyXPCClasses"
+ "amsaccountsd1"
+ "availablePartialAssessment"
+ "bundlePrivacyAcknowledgementRequest"
+ "clearAllCachedCookieProperties"
+ "com.apple.AppleMediaServices.eligibilityoverridechanged"
+ "com.apple.StoreServices.SSAccountStore.activeaccountchanged"
+ "com.apple.mobile.keybagd.lock_status"
+ "com.apple.os-eligibility-domain.input-needed"
+ "com.apple.purplebuddy.setupexited"
+ "combinedStoreFrontId"
+ "cookiePropertyCache"
+ "enqueueData:"
+ "forceRegisterAccount:"
+ "getCookiePropertiesForAccount:cookieDatabaseOnly:error:"
+ "getCookiePropertiesForAccount:cookieDatabaseOnly:withCompletion:"
+ "getCookiePropertiesForAccount:withCompletion:"
+ "handleCachedDataUpdate"
+ "home:didUpdateSupportsResidentActionSetStateEvaluation:"
+ "initWithAccount:accountStore:bag:"
+ "initWithAttributes:"
+ "initWithBool:"
+ "initWithDomain:"
+ "initWithUnsignedLongLong:"
+ "initWithValue:action:"
+ "invalid Collection: less than 'count' elements in collection"
+ "isLassetAndReturnError:"
+ "isU18OrCountrysEquivalent"
+ "lasset is false - no additional steps"
+ "oneAccountLinkedDsid"
+ "partialFDSAssessmentForRequest:completion:"
+ "performMultiUserAuthenticationForHomeUserIdentifier:completion:"
+ "prepareBindingsFromContext:"
+ "setCombinedStoreFrontID:"
+ "setIsAskToBuy:"
+ "setIsU18OrCountrysEquivalent:"
+ "setIso2CountryCode:"
+ "setIso3CountryCode:"
+ "setOneAccountLinkedDSID:"
+ "setOverride:"
+ "stateTracker"
+ "updateCookiesWithCookiePropertiesToAdd:cookiePropertiesToRemove:forAccount:withCompletion:"
+ "updateIfNeededWithAccount:completionHandler:"
+ "updateIfNeededWithCompletionHandler:"
+ "v24@?0@\"AMSAccountDeviceInfoResult\"8@\"NSError\"16"
+ "v24@?0@\"AMSEngagementEnqueueResult\"8@\"NSError\"16"
+ "v24@?0@\"AMSODIAssessment\"8@\"NSError\"16"
+ "v32@0:8@\"ACAccount\"16@?<v@?@\"NSError\">24"
+ "v32@0:8@\"AMSFDSRequest\"16@?<v@?@\"AMSFDSResult\"@\"NSError\">24"
+ "v32@0:8@\"NSUUID\"16@?<v@?@\"AMSAuthenticateResult\"@\"NSError\">24"
+ "v56@0:8@16@24Q32@40@?48"
+ "~"
- "\x12\x19"
- "%{public}@: [%{public}@] Account not active: %{public}@"
- "%{public}@: [%{public}@] Caching cookies. cookies = %{public}@ | accountIdentifier = %{public}@"
- "%{public}@: [%{public}@] Found cached cookies. cookies = %{public}@ | identifier = %{public}@"
- "%{public}@: [%{public}@] Loaded %lu cookie property dictionaries from database. Parsed and merged into %lu cookies."
- "@\"DIVerificationSession\""
- "AADeviceInfo"
- "Always"
- "Attributes conversion from identities count = %ld"
- "Expected the account identifier to be a UUID."
- "Failed to fetch config in expected time."
- "Never"
- "Private listenting setting changed."
- "Sometimes"
- "T@\"AMSBagKeySet\",R,N"
- "T@\"AMSLRUCache\",R,N,V_cookieCache"
- "T@\"AMSProcessInfo\",R,C,N"
- "T@\"DIVerificationSession\",&,N,V_diSession"
- "TB,N,V_shouldTriggerCoreODI"
- "Undefined"
- "WARNING: Attributes conversion no identities found"
- "_cacheCookies:forIdentifier:"
- "_cachedCookiesForIdentifier:"
- "_clearAllCachedCookies"
- "_clearDanglingCookieDatabases"
- "_cookieCache"
- "_diSession"
- "_shouldTriggerCoreODI"
- "amp"
- "ams_cookiesForProperties:"
- "blob is %@"
- "callback from IDV getVerificationResultWithOptions, error = %@"
- "callback from IDV performVerificationWithAttributes, error = %@"
- "clearAllCachedCookies"
- "confirmVerificationCompletedWithFeedback:"
- "cookieCache"
- "diSession"
- "error calling getVerificationResultWithOptions"
- "error calling performVerificationWithAttributes"
- "feature.amp.trigger-odi"
- "fetchShouldTriggerCoreODI"
- "getCookiesForAccount:cookieDatabaseOnly:error:"
- "getCookiesForAccount:cookieDatabaseOnly:withCompletion:"
- "getCookiesForAccount:withCompletion:"
- "getCurrentValue"
- "getVerificationResultWithOptions:completion:"
- "initWithName:tier:serviceUrl:httpHeaders:"
- "pageFromContext:"
- "performVerificationWithAttributes:completion:"
- "prepare: switching to IDVFLOW"
- "prepareBindingsDict:"
- "setCurrentValue:"
- "setDiSession:"
- "setIdentifier:"
- "setPage:"
- "setShouldTriggerCoreODI:"
- "shouldTriggerCoreODI"
- "softlink:r:path:/System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount"
- "updateCookiesWithCookiesToAdd:cookiesToRemove:forAccount:withCompletion:"
- "v32@0:8@\"AMSFDSRequest\"16@?<v@?@\"NSData\"@\"NSError\">24"
- "v32@?0@\"DIAttribute\"8Q16^B24"
- "v32@?0@\"DIPage\"8q16@\"NSError\"24"

```
