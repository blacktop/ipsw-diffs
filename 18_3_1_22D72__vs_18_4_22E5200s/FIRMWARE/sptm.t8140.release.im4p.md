## sptm.t8140.release.im4p

> `sptm.t8140.release.im4p`

```diff

-392.80.3.0.0
-  __TEXT.__cstring: 0xd98c
+392.100.137.0.0
+  __TEXT.__cstring: 0xe447
   __TEXT.__binname: 0x40
-  __TEXT.__chain_starts: 0x70
-  __TEXT.__const: 0xa10
-  __DATA_CONST.__const: 0x5d38
-  __LATE_CONST.__late_const: 0x5d640
-  __TEXT_EXEC.__text: 0x4b2d4
+  __TEXT.__const: 0xb00
+  __TEXT.__chain_starts: 0x78
+  __DATA_CONST.__const: 0x68c8
+  __LATE_CONST.__late_const: 0x5d660
+  __TEXT_EXEC.__text: 0x5045c
   __LAST.__pinst: 0x8
   __DATA.__auth_ptr: 0x18
   __DATA.__data: 0x6
-  __DATA.__common: 0x57b0
-  __DATA.__bss: 0x5b80
+  __DATA.__common: 0x5810
+  __DATA.__bss: 0x5c20
   __BOOTDATA.__data: 0x14000
-  Functions: 312
+  Functions: 353
   Symbols:   1
-  CStrings:  1708
+  CStrings:  1800
 
CStrings:
+ "!is_immutable(dst_paddr)"
+ "%s: Attempted to register a IO range %p %u with invalid type %u"
+ "%s: Could not get devicetree"
+ "%s: IO PADDR does not have an associated PAPT address %p %d"
+ "%s: IO frame does not have a valid type for IO range %p %u"
+ "%s: Invalid element_size/num_elements %zd %lld"
+ "%s: SK_HIB_encrypt(0x%llu) returned error (%llu)"
+ "%s: SK_HIB_finish() returned error (%llu)"
+ "%s: SK_HIB_patchup() returned error (%llu)"
+ "%s: SK_HIB_start() returned error (%llu)"
+ "%s: The /chosen devicetree node should always exist"
+ "%s: The ASC carveout region is smaller than a page in size or not a multiple of the SPTM_PAGE_SIZE %llu"
+ "%s: The Handoff region is smaller than a page in size or not a multiple of the SPTM_PAGE_SIZE %llu"
+ "%s: The TTBAT is smaller than a page in size or not a multiple of the SPTM_PAGE_SIZE %llu"
+ "%s: The TTBR1 shared L2 region size (0x%llx) is not equal to the SPTM_PAGE_SIZE"
+ "%s: The `gpu-iouat` property should be %lu bytes not %d"
+ "%s: dt /chosen/hibernation/key-exclave-entropy length mismatch (%zu != %zu)"
+ "%s: unsupported full TLBI flavor 0x%x"
+ "%s:%u: %s (%#llx/%s)"
+ "(&cputrace_instance->va_guard)"
+ "(((uintptr_t)dst) & SPTM_PAGE_MASK) == 0"
+ "(addr & SPTM_PAGE_MASK) == 0"
+ "(child_pt_paddr & SPTM_PAGE_MASK) == 0"
+ "(len >> SPTM_PAGE_SHIFT) <= UINT32_MAX"
+ "(size & SPTM_PAGE_MASK) == 0"
+ "(tag & kIOHibernateTagSigMask) == kIOHibernateTagSignature"
+ "-internal-reg"
+ "/Library/Caches/com.apple.xbs/Sources/SPTM/sptm/core/sptm_hibentry.c"
+ "/chosen/hibernation"
+ "1241"
+ "63U"
+ "Could not find device tree in handoff region"
+ "Failed to locate chosen/memory-map node in device tree"
+ "Failed to locate hibernate node in device tree"
+ "Invalid bitmap page attempted to be allocated"
+ "Type (%d) class of FTE (%p) does not match the type class of the type-specific-data trying to be retrieved: actual (%d) != requested (%d)."
+ "VIOLATION_CPUTRACE_MODE_MISMATCH"
+ "VIOLATION_CPUTRACE_PA_BUFFER"
+ "VIOLATION_CPUTRACE_STRM_BASE"
+ "VIOLATION_CPUTRACE_VA_ACTIVE"
+ "VIOLATION_CPUTRACE_VA_BUFFER"
+ "VIOLATION_CPUTRACE_VA_FRAME"
+ "VIOLATION_CPUTRACE_VA_LOCKED"
+ "VIOLATION_CPUTRACE_VA_RACE"
+ "VIOLATION_CPUTRACE_VA_REGION"
+ "VIOLATION_CPUTRACE_VA_TYPE"
+ "VIOLATION_CPUTRACE_VA_UNLOCKED"
+ "VIOLATION_CPUTRACE_VA_UNMAPPED"
+ "VIOLATION_DANGLING_PAPT_TAG"
+ "VIOLATION_GUEST_ILLEGAL_NV2_BADDR"
+ "VIOLATION_GUEST_INVALID_S1_TLB_OP"
+ "VIOLATION_ILLEGAL_TAGGED_MAPPING"
+ "VIOLATION_ILLEGAL_TAG_FRAME"
+ "VIOLATION_ILLEGAL_UNTAGGED_MAPPING"
+ "VIOLATION_ILLEGAL_UNTAG_FRAME"
+ "VIOLATION_INVALID_TAG_STORAGE_FRAME"
+ "VIOLATION_OOB_MULTIPAGE_OPS"
+ "[SK HIB PANIC] SK panic during SPTM hibernation hook"
+ "acquire_stage2_root_pt"
+ "active_refcnt"
+ "assert '!(paddr >> PROD_TRC_STRM_BASE_ADDR_SIZE)' failed."
+ "assert '!(region_size & SPTM_PAGE_MASK)' failed."
+ "assert '!(region_start & SPTM_PAGE_MASK)' failed."
+ "assert '!(size_limit >> PROD_TRC_STRM_BASE_VALID_BASE)' failed."
+ "assert '!__builtin_add_overflow(carveout_start_paddr, carveout_size, &carveout_end_paddr)' failed."
+ "assert '!__builtin_add_overflow(frame_vaddr, SPTM_PAGE_SIZE, &frame_end)' failed."
+ "assert '!__builtin_add_overflow(region_size, SPTM_PAGE_SIZE, &region_size)' failed."
+ "assert '!__builtin_add_overflow(region_start, region_size, &region_end)' failed."
+ "assert '(!region_start) == (!region_size)' failed."
+ "assert 'carveout_size' failed."
+ "assert 'carveout_start_paddr' failed."
+ "assert 'cluster_id <= MAX_CPU_CLUSTER_PHY_ID' failed."
+ "assert 'nb_units' failed."
+ "assert 'region->active_refcnt' failed."
+ "assert 'region_size >= SPTM_PAGE_SIZE' failed."
+ "assert 'region_start' failed."
+ "avncr_fte"
+ "avncr_fte->type"
+ "avncr_paddr"
+ "bitmap_page_is_valid(first_free_paddr, header)"
+ "carveout_nb_frames %#llx %#llx does not fit in an unsigned int."
+ "ccgcm_finalize(gcm, ctx, sizeof(hib_header_copy->exclave_iv.tag), hib_header_copy->exclave_iv.tag) == 0"
+ "child_pt_tsd->level"
+ "chosen/hibernation node not found in DT for key"
+ "compressed_size <= SPTM_PAGE_SIZE"
+ "cpt_mapcnt_load(&child_pt_tsd->mapping_refcnt)"
+ "cputrace_get_carveout_size_mib"
+ "cputrace_mode_bits()"
+ "cputrace_va_locked_frame_lock"
+ "cputrace_va_locked_frame_unlock"
+ "cputrace_va_locked_region_add"
+ "cputrace_va_locked_region_remove"
+ "cputrace_validation.c"
+ "dst_paddr != hib_ctx->hibtext_stack_paddr"
+ "entry_size"
+ "flags"
+ "frame_paddr"
+ "frame_vaddr"
+ "fte_tsd->iommu_id"
+ "hib_bootstrap_patchup"
+ "hib_header_copy->protected_metadata.exclave_key_phys != 0"
+ "hmac-reg-base property size is incorrect."
+ "interrupts must be disabled by caller"
+ "invalid bootstrap frames type %d, expected SPTM_IOMMU_BOOTSTRAP (%d) or XNU_CPUTRACE_PA_BUFFER (%d)."
+ "io_range != NULL"
+ "iommu_frame_acquire_type"
+ "is_active0"
+ "is_active1"
+ "key has unexpected size"
+ "key is all-zero"
+ "key not found in DT"
+ "key property found but key is NULL"
+ "key-exclave"
+ "key-exclave-entropy"
+ "key-exclave-original"
+ "leaf_pt_fte"
+ "max_entry_count"
+ "new_frame_paddr"
+ "op"
+ "per-cpu last_avncr_paddr already set (%llx)"
+ "per-cpu last_vncr_paddr already set (%llx)"
+ "pmgr-aes-offset property size is incorrect."
+ "pmgr-reg-base property size is incorrect."
+ "rc16_load(&child_pt_tsd->nested_refcnt)"
+ "region_size"
+ "region_start"
+ "sanitize_integer(stage2_root_pt_U.UNSAFE_VALUE)"
+ "sid-mcw"
+ "sid-ocla"
+ "sid-trace"
+ "sptm_cputrace_set_base"
+ "sptm_cputrace_start"
+ "sptm_cputrace_stop"
+ "sptm_cputrace_va_deinit"
+ "sptm_cputrace_va_frame_lock"
+ "sptm_cputrace_va_frame_unlock"
+ "sptm_cputrace_va_init"
+ "sptm_cputrace_va_set_base"
+ "sptm_cputrace_va_start"
+ "sptm_cputrace_va_stop"
+ "sptm_get_va_size(root_pt_fte)"
+ "sptm_guest_stage1_tlb_op"
+ "sptm_hib_finalize_sk"
+ "stage2_root_pt"
+ "stage2_root_pt_fte"
+ "stage2_root_pt_fte->in_flight_ops"
+ "stage2_root_pt_fte->type"
+ "stage2_root_pt_tsd->vmid"
+ "stashed_avncr_paddr"
+ "stashed_vncr_paddr"
+ "type"
+ "uat_is_enabled"
+ "va_region_id"
+ "validate_cputrace_pa_buffer"
+ "validate_cputrace_strm_base_id"
+ "validate_cputrace_va_buffer"
+ "validate_cputrace_va_frame_vaddr"
+ "validate_cputrace_va_region_id"
+ "validate_multipage_ops_entries"
+ "validate_sptm_cputrace_mode"
+ "vncr_fte"
+ "vncr_fte->type"
+ "vncr_paddr"
- "\nSPTM PANIC: Invalid (NULL) sptm_cpu_data_ptr()\n"
- " - 0x"
- "!(paddr >> PROD_TRC_STRM_BASE_PA_SIZE)"
- "!(size_limit >> PROD_TRC_STRM_BASE_VALID_BASE)"
- "%s: Attempted to allocate bootstrap frame with invalid CTRR permissions"
- "%s: Found NULL retype_in() function new_type: %u"
- "%s: Found NULL retype_out() function current_type: %u"
- "%s: IO PADDR not of type XNU_PROTECTED_IO %p"
- "%s: IO frame is not XNU_PROTECTED_IO typed for IO range %p %u"
- "%s: Invalid element_size/num_elements %zd %d"
- "%s: The ASC carveout region is smaller than a page in size or not a multiple of the PAGE_SIZE %llu"
- "%s: The Handoff region is smaller than a page in size or not a multiple of the PAGE_SIZE %llu"
- "%s: The TTBAT is smaller than a page in size or not a multiple of the PAGE_SIZE %llu"
- "%s: The TTBR1 shared L2 region size (0x%llx) is not equal to the PAGE_SIZE"
- "%s: gpu-iouat is not %zu bytes wide (%d)"
- "%s: hibernation key '%s' has unexpected size %u != %zu"
- "%s: hibernation key '%s' is all-zero"
- "%s: hibernation key '%s' not found in DT"
- "%s: hibernation node (/chosen/hibernation) not found in DT"
- "(((uintptr_t)dst) & PAGE_MASK) == 0"
- "(child_pt_paddr & PAGE_MASK) == 0"
- "(hib_ctx != NULL) && (hib_header != NULL)"
- "(io_range->addr & PAGE_MASK) == 0"
- "(io_range->len >> PAGE_SHIFT) <= UINT32_MAX"
- "(size & PAGE_MASK) == 0"
- "(tag & ~kIOHibernateTagLength) == kIOHibernateTagSignature"
- "/Library/Caches/com.apple.xbs/Sources/SPTM/sptm/iommu/cputrace/cputrace.c"
- "1197"
- "60U"
- "Could not find device tree in handoff region @ %p."
- "Failed to locate chosen/memory-map node in device tree @ %p."
- "Failed to locate hibernate node in device tree @ %p."
- "Invalid phys to virt type"
- "VIOLATION_CPUTRACE_BUFFER_INVALID"
- "VIOLATION_CPUTRACE_NOT_INITIALIZED"
- "VIOLATION_INVALID_DT_RANGE"
- "VIOLATION_INVALID_IO_PADDR"
- "__probable(!is_immutable(dst_paddr))"
- "_check_carveout"
- "_get_carveout_size_mib"
- "_get_strm_base"
- "_trace_buffer_check"
- "acquire_t8110dart_paddr"
- "carveout_nb_frames %#llx does not fit in an unsigned int."
- "child_pt_fte->cpu_page_table.level"
- "compressed_size <= PAGE_SIZE"
- "cpt_mapcnt_load(&child_pt_fte->cpu_page_table.mapping_refcnt)"
- "cur_mapping_data->leaf_pt_fte"
- "cur_mapping_data->leaf_pt_fte->type"
- "hib_bootstrap_copy_and_efface_hibernation_key"
- "hib_bootstrap_obtain_hibernation_key"
- "hib_find_phys_range(hib_ctx->hib_io_ranges, hib_ctx->num_hib_io_ranges, dst_paddr) != NULL"
- "hibernation key has unexpected size"
- "hibernation key is all-zero"
- "hibernation key not found in DT"
- "hibernation node (/chosen/hibernation) not found in DT"
- "hmac-reg-base property size (%d) is incorrect."
- "invalid bootstrap frames type %d, expected SPTM_IOMMU_BOOTSTRAP (%d) or XNU_CPUTRACE_BUFFER (%d)."
- "iommu_frame_acquire"
- "nb_units"
- "phys_to_fte(state_object_handle)->type"
- "phys_to_type(pt_paddr)"
- "pmgr-aes-offset property size (%d) is incorrect."
- "pmgr-reg-base property size (%d) is incorrect."
- "rc16_load(&child_pt_fte->cpu_page_table.nested_refcnt)"
- "root_pt->type"
- "root_pt_fte->cpu_root_table.vmid"
- "segments_pa_type"
- "sptm_iommu_bootstrap"
- "sptm_uat_get_info"
- "va_size"

```
